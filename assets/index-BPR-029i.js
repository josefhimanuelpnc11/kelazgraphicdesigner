(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var $f={exports:{}},Cl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z_;function qb(){if(Z_)return Cl;Z_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var p in o)p!=="key"&&(u[p]=o[p])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:d,ref:o!==void 0?o:null,props:u}}return Cl.Fragment=e,Cl.jsx=n,Cl.jsxs=n,Cl}var J_;function Hb(){return J_||(J_=1,$f.exports=qb()),$f.exports}var m=Hb(),Wf={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ev;function Fb(){if(ev)return Ne;ev=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),I=Symbol.iterator;function N(D){return D===null||typeof D!="object"?null:(D=I&&D[I]||D["@@iterator"],typeof D=="function"?D:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,te={};function K(D,ee,oe){this.props=D,this.context=ee,this.refs=te,this.updater=oe||O}K.prototype.isReactComponent={},K.prototype.setState=function(D,ee){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,ee,"setState")},K.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function se(){}se.prototype=K.prototype;function he(D,ee,oe){this.props=D,this.context=ee,this.refs=te,this.updater=oe||O}var ne=he.prototype=new se;ne.constructor=he,Q(ne,K.prototype),ne.isPureReactComponent=!0;var ge=Array.isArray,ue={H:null,A:null,T:null,S:null,V:null},Z=Object.prototype.hasOwnProperty;function C(D,ee,oe,z,ce,De){return oe=De.ref,{$$typeof:s,type:D,key:ee,ref:oe!==void 0?oe:null,props:De}}function S(D,ee){return C(D.type,ee,void 0,void 0,void 0,D.props)}function R(D){return typeof D=="object"&&D!==null&&D.$$typeof===s}function M(D){var ee={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(oe){return ee[oe]})}var V=/\/+/g;function j(D,ee){return typeof D=="object"&&D!==null&&D.key!=null?M(""+D.key):ee.toString(36)}function w(){}function ie(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(w,w):(D.status="pending",D.then(function(ee){D.status==="pending"&&(D.status="fulfilled",D.value=ee)},function(ee){D.status==="pending"&&(D.status="rejected",D.reason=ee)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function be(D,ee,oe,z,ce){var De=typeof D;(De==="undefined"||De==="boolean")&&(D=null);var we=!1;if(D===null)we=!0;else switch(De){case"bigint":case"string":case"number":we=!0;break;case"object":switch(D.$$typeof){case s:case e:we=!0;break;case T:return we=D._init,be(we(D._payload),ee,oe,z,ce)}}if(we)return ce=ce(D),we=z===""?"."+j(D,0):z,ge(ce)?(oe="",we!=null&&(oe=we.replace(V,"$&/")+"/"),be(ce,ee,oe,"",function(Jn){return Jn})):ce!=null&&(R(ce)&&(ce=S(ce,oe+(ce.key==null||D&&D.key===ce.key?"":(""+ce.key).replace(V,"$&/")+"/")+we)),ee.push(ce)),1;we=0;var Mt=z===""?".":z+":";if(ge(D))for(var nt=0;nt<D.length;nt++)z=D[nt],De=Mt+j(z,nt),we+=be(z,ee,oe,De,ce);else if(nt=N(D),typeof nt=="function")for(D=nt.call(D),nt=0;!(z=D.next()).done;)z=z.value,De=Mt+j(z,nt++),we+=be(z,ee,oe,De,ce);else if(De==="object"){if(typeof D.then=="function")return be(ie(D),ee,oe,z,ce);throw ee=String(D),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return we}function G(D,ee,oe){if(D==null)return D;var z=[],ce=0;return be(D,z,"","",function(De){return ee.call(oe,De,ce++)}),z}function ae(D){if(D._status===-1){var ee=D._result;ee=ee(),ee.then(function(oe){(D._status===0||D._status===-1)&&(D._status=1,D._result=oe)},function(oe){(D._status===0||D._status===-1)&&(D._status=2,D._result=oe)}),D._status===-1&&(D._status=0,D._result=ee)}if(D._status===1)return D._result.default;throw D._result}var pe=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function Le(){}return Ne.Children={map:G,forEach:function(D,ee,oe){G(D,function(){ee.apply(this,arguments)},oe)},count:function(D){var ee=0;return G(D,function(){ee++}),ee},toArray:function(D){return G(D,function(ee){return ee})||[]},only:function(D){if(!R(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Ne.Component=K,Ne.Fragment=n,Ne.Profiler=o,Ne.PureComponent=he,Ne.StrictMode=r,Ne.Suspense=y,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ue,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(D){return ue.H.useMemoCache(D)}},Ne.cache=function(D){return function(){return D.apply(null,arguments)}},Ne.cloneElement=function(D,ee,oe){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var z=Q({},D.props),ce=D.key,De=void 0;if(ee!=null)for(we in ee.ref!==void 0&&(De=void 0),ee.key!==void 0&&(ce=""+ee.key),ee)!Z.call(ee,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&ee.ref===void 0||(z[we]=ee[we]);var we=arguments.length-2;if(we===1)z.children=oe;else if(1<we){for(var Mt=Array(we),nt=0;nt<we;nt++)Mt[nt]=arguments[nt+2];z.children=Mt}return C(D.type,ce,void 0,void 0,De,z)},Ne.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:u,_context:D},D},Ne.createElement=function(D,ee,oe){var z,ce={},De=null;if(ee!=null)for(z in ee.key!==void 0&&(De=""+ee.key),ee)Z.call(ee,z)&&z!=="key"&&z!=="__self"&&z!=="__source"&&(ce[z]=ee[z]);var we=arguments.length-2;if(we===1)ce.children=oe;else if(1<we){for(var Mt=Array(we),nt=0;nt<we;nt++)Mt[nt]=arguments[nt+2];ce.children=Mt}if(D&&D.defaultProps)for(z in we=D.defaultProps,we)ce[z]===void 0&&(ce[z]=we[z]);return C(D,De,void 0,void 0,null,ce)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(D){return{$$typeof:p,render:D}},Ne.isValidElement=R,Ne.lazy=function(D){return{$$typeof:T,_payload:{_status:-1,_result:D},_init:ae}},Ne.memo=function(D,ee){return{$$typeof:_,type:D,compare:ee===void 0?null:ee}},Ne.startTransition=function(D){var ee=ue.T,oe={};ue.T=oe;try{var z=D(),ce=ue.S;ce!==null&&ce(oe,z),typeof z=="object"&&z!==null&&typeof z.then=="function"&&z.then(Le,pe)}catch(De){pe(De)}finally{ue.T=ee}},Ne.unstable_useCacheRefresh=function(){return ue.H.useCacheRefresh()},Ne.use=function(D){return ue.H.use(D)},Ne.useActionState=function(D,ee,oe){return ue.H.useActionState(D,ee,oe)},Ne.useCallback=function(D,ee){return ue.H.useCallback(D,ee)},Ne.useContext=function(D){return ue.H.useContext(D)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(D,ee){return ue.H.useDeferredValue(D,ee)},Ne.useEffect=function(D,ee,oe){var z=ue.H;if(typeof oe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return z.useEffect(D,ee)},Ne.useId=function(){return ue.H.useId()},Ne.useImperativeHandle=function(D,ee,oe){return ue.H.useImperativeHandle(D,ee,oe)},Ne.useInsertionEffect=function(D,ee){return ue.H.useInsertionEffect(D,ee)},Ne.useLayoutEffect=function(D,ee){return ue.H.useLayoutEffect(D,ee)},Ne.useMemo=function(D,ee){return ue.H.useMemo(D,ee)},Ne.useOptimistic=function(D,ee){return ue.H.useOptimistic(D,ee)},Ne.useReducer=function(D,ee,oe){return ue.H.useReducer(D,ee,oe)},Ne.useRef=function(D){return ue.H.useRef(D)},Ne.useState=function(D){return ue.H.useState(D)},Ne.useSyncExternalStore=function(D,ee,oe){return ue.H.useSyncExternalStore(D,ee,oe)},Ne.useTransition=function(){return ue.H.useTransition()},Ne.version="19.1.1",Ne}var tv;function Fm(){return tv||(tv=1,Wf.exports=Fb()),Wf.exports}var fe=Fm(),Zf={exports:{}},xl={},Jf={exports:{}},em={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nv;function Gb(){return nv||(nv=1,(function(s){function e(G,ae){var pe=G.length;G.push(ae);e:for(;0<pe;){var Le=pe-1>>>1,D=G[Le];if(0<o(D,ae))G[Le]=ae,G[pe]=D,pe=Le;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var ae=G[0],pe=G.pop();if(pe!==ae){G[0]=pe;e:for(var Le=0,D=G.length,ee=D>>>1;Le<ee;){var oe=2*(Le+1)-1,z=G[oe],ce=oe+1,De=G[ce];if(0>o(z,pe))ce<D&&0>o(De,z)?(G[Le]=De,G[ce]=pe,Le=ce):(G[Le]=z,G[oe]=pe,Le=oe);else if(ce<D&&0>o(De,pe))G[Le]=De,G[ce]=pe,Le=ce;else break e}}return ae}function o(G,ae){var pe=G.sortIndex-ae.sortIndex;return pe!==0?pe:G.id-ae.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var d=Date,p=d.now();s.unstable_now=function(){return d.now()-p}}var y=[],_=[],T=1,I=null,N=3,O=!1,Q=!1,te=!1,K=!1,se=typeof setTimeout=="function"?setTimeout:null,he=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function ge(G){for(var ae=n(_);ae!==null;){if(ae.callback===null)r(_);else if(ae.startTime<=G)r(_),ae.sortIndex=ae.expirationTime,e(y,ae);else break;ae=n(_)}}function ue(G){if(te=!1,ge(G),!Q)if(n(y)!==null)Q=!0,Z||(Z=!0,j());else{var ae=n(_);ae!==null&&be(ue,ae.startTime-G)}}var Z=!1,C=-1,S=5,R=-1;function M(){return K?!0:!(s.unstable_now()-R<S)}function V(){if(K=!1,Z){var G=s.unstable_now();R=G;var ae=!0;try{e:{Q=!1,te&&(te=!1,he(C),C=-1),O=!0;var pe=N;try{t:{for(ge(G),I=n(y);I!==null&&!(I.expirationTime>G&&M());){var Le=I.callback;if(typeof Le=="function"){I.callback=null,N=I.priorityLevel;var D=Le(I.expirationTime<=G);if(G=s.unstable_now(),typeof D=="function"){I.callback=D,ge(G),ae=!0;break t}I===n(y)&&r(y),ge(G)}else r(y);I=n(y)}if(I!==null)ae=!0;else{var ee=n(_);ee!==null&&be(ue,ee.startTime-G),ae=!1}}break e}finally{I=null,N=pe,O=!1}ae=void 0}}finally{ae?j():Z=!1}}}var j;if(typeof ne=="function")j=function(){ne(V)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,ie=w.port2;w.port1.onmessage=V,j=function(){ie.postMessage(null)}}else j=function(){se(V,0)};function be(G,ae){C=se(function(){G(s.unstable_now())},ae)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(G){G.callback=null},s.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<G?Math.floor(1e3/G):5},s.unstable_getCurrentPriorityLevel=function(){return N},s.unstable_next=function(G){switch(N){case 1:case 2:case 3:var ae=3;break;default:ae=N}var pe=N;N=ae;try{return G()}finally{N=pe}},s.unstable_requestPaint=function(){K=!0},s.unstable_runWithPriority=function(G,ae){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var pe=N;N=G;try{return ae()}finally{N=pe}},s.unstable_scheduleCallback=function(G,ae,pe){var Le=s.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Le+pe:Le):pe=Le,G){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=pe+D,G={id:T++,callback:ae,priorityLevel:G,startTime:pe,expirationTime:D,sortIndex:-1},pe>Le?(G.sortIndex=pe,e(_,G),n(y)===null&&G===n(_)&&(te?(he(C),C=-1):te=!0,be(ue,pe-Le))):(G.sortIndex=D,e(y,G),Q||O||(Q=!0,Z||(Z=!0,j()))),G},s.unstable_shouldYield=M,s.unstable_wrapCallback=function(G){var ae=N;return function(){var pe=N;N=ae;try{return G.apply(this,arguments)}finally{N=pe}}}})(em)),em}var iv;function Qb(){return iv||(iv=1,Jf.exports=Gb()),Jf.exports}var tm={exports:{}},$t={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sv;function Kb(){if(sv)return $t;sv=1;var s=Fm();function e(y){var _="https://react.dev/errors/"+y;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)_+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+y+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(y,_,T){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:I==null?null:""+I,children:y,containerInfo:_,implementation:T}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(y,_){if(y==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return $t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,$t.createPortal=function(y,_){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return u(y,_,null,T)},$t.flushSync=function(y){var _=d.T,T=r.p;try{if(d.T=null,r.p=2,y)return y()}finally{d.T=_,r.p=T,r.d.f()}},$t.preconnect=function(y,_){typeof y=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,r.d.C(y,_))},$t.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},$t.preinit=function(y,_){if(typeof y=="string"&&_&&typeof _.as=="string"){var T=_.as,I=p(T,_.crossOrigin),N=typeof _.integrity=="string"?_.integrity:void 0,O=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;T==="style"?r.d.S(y,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:I,integrity:N,fetchPriority:O}):T==="script"&&r.d.X(y,{crossOrigin:I,integrity:N,fetchPriority:O,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},$t.preinitModule=function(y,_){if(typeof y=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var T=p(_.as,_.crossOrigin);r.d.M(y,{crossOrigin:T,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&r.d.M(y)},$t.preload=function(y,_){if(typeof y=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var T=_.as,I=p(T,_.crossOrigin);r.d.L(y,T,{crossOrigin:I,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},$t.preloadModule=function(y,_){if(typeof y=="string")if(_){var T=p(_.as,_.crossOrigin);r.d.m(y,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:T,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else r.d.m(y)},$t.requestFormReset=function(y){r.d.r(y)},$t.unstable_batchedUpdates=function(y,_){return y(_)},$t.useFormState=function(y,_,T){return d.H.useFormState(y,_,T)},$t.useFormStatus=function(){return d.H.useHostTransitionStatus()},$t.version="19.1.1",$t}var rv;function Yb(){if(rv)return tm.exports;rv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),tm.exports=Kb(),tm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var av;function Xb(){if(av)return xl;av=1;var s=Qb(),e=Fm(),n=Yb();function r(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function d(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(u(t)!==t)throw Error(r(188))}function y(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(r(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return p(h),t;if(f===l)return p(h),i;f=f.sibling}throw Error(r(188))}if(a.return!==l.return)a=h,l=f;else{for(var E=!1,A=h.child;A;){if(A===a){E=!0,a=h,l=f;break}if(A===l){E=!0,l=h,a=f;break}A=A.sibling}if(!E){for(A=f.child;A;){if(A===a){E=!0,a=f,l=h;break}if(A===l){E=!0,l=f,a=h;break}A=A.sibling}if(!E)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:i}function _(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=_(t),i!==null)return i;t=t.sibling}return null}var T=Object.assign,I=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),Q=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),se=Symbol.for("react.provider"),he=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function j(t){return t===null||typeof t!="object"?null:(t=V&&t[V]||t["@@iterator"],typeof t=="function"?t:null)}var w=Symbol.for("react.client.reference");function ie(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===w?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Q:return"Fragment";case K:return"Profiler";case te:return"StrictMode";case ue:return"Suspense";case Z:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case O:return"Portal";case ne:return(t.displayName||"Context")+".Provider";case he:return(t._context.displayName||"Context")+".Consumer";case ge:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case C:return i=t.displayName||null,i!==null?i:ie(t.type)||"Memo";case S:i=t._payload,t=t._init;try{return ie(t(i))}catch{}}return null}var be=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},Le=[],D=-1;function ee(t){return{current:t}}function oe(t){0>D||(t.current=Le[D],Le[D]=null,D--)}function z(t,i){D++,Le[D]=t.current,t.current=i}var ce=ee(null),De=ee(null),we=ee(null),Mt=ee(null);function nt(t,i){switch(z(we,i),z(De,t),z(ce,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?R_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=R_(i),t=I_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}oe(ce),z(ce,t)}function Jn(){oe(ce),oe(De),oe(we)}function ls(t){t.memoizedState!==null&&z(Mt,t);var i=ce.current,a=I_(i,t.type);i!==a&&(z(De,t),z(ce,a))}function Ii(t){De.current===t&&(oe(ce),oe(De)),Mt.current===t&&(oe(Mt),Sl._currentValue=pe)}var rr=Object.prototype.hasOwnProperty,ar=s.unstable_scheduleCallback,or=s.unstable_cancelCallback,To=s.unstable_shouldYield,yu=s.unstable_requestPaint,wn=s.unstable_now,Xh=s.unstable_getCurrentPriorityLevel,Ao=s.unstable_ImmediatePriority,ia=s.unstable_UserBlockingPriority,lr=s.unstable_NormalPriority,$h=s.unstable_LowPriority,sa=s.unstable_IdlePriority,bo=s.log,_u=s.unstable_setDisableYieldValue,ct=null,Ye=null;function pn(t){if(typeof bo=="function"&&_u(t),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(ct,t)}catch{}}var Yt=Math.clz32?Math.clz32:ur,vu=Math.log,Wh=Math.LN2;function ur(t){return t>>>=0,t===0?32:31-(vu(t)/Wh|0)|0}var cr=256,hr=4194304;function qn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ra(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,f=t.suspendedLanes,E=t.pingedLanes;t=t.warmLanes;var A=l&134217727;return A!==0?(l=A&~f,l!==0?h=qn(l):(E&=A,E!==0?h=qn(E):a||(a=A&~t,a!==0&&(h=qn(a))))):(A=l&~f,A!==0?h=qn(A):E!==0?h=qn(E):a||(a=l&~t,a!==0&&(h=qn(a)))),h===0?0:i!==0&&i!==h&&(i&f)===0&&(f=h&-h,a=i&-i,f>=a||f===32&&(a&4194048)!==0)?i:h}function dr(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function So(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wo(){var t=cr;return cr<<=1,(cr&4194048)===0&&(cr=256),t}function Ro(){var t=hr;return hr<<=1,(hr&62914560)===0&&(hr=4194304),t}function Ni(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Ci(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Io(t,i,a,l,h,f){var E=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var A=t.entanglements,x=t.expirationTimes,B=t.hiddenUpdates;for(a=E&~a;0<a;){var Y=31-Yt(a),W=1<<Y;A[Y]=0,x[Y]=-1;var q=B[Y];if(q!==null)for(B[Y]=null,Y=0;Y<q.length;Y++){var H=q[Y];H!==null&&(H.lane&=-536870913)}a&=~W}l!==0&&ei(t,l,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(E&~i))}function ei(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-Yt(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function No(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-Yt(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function us(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function aa(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function cs(){var t=ae.p;return t!==0?t:(t=window.event,t===void 0?32:Q_(t.type))}function Eu(t,i){var a=ae.p;try{return ae.p=t,i()}finally{ae.p=a}}var at=Math.random().toString(36).slice(2),It="__reactFiber$"+at,Et="__reactProps$"+at,Rn="__reactContainer$"+at,Co="__reactEvents$"+at,Zh="__reactListeners$"+at,hs="__reactHandles$"+at,Tu="__reactResources$"+at,fr="__reactMarker$"+at;function ds(t){delete t[It],delete t[Et],delete t[Co],delete t[Zh],delete t[hs]}function xi(t){var i=t[It];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Rn]||a[It]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=D_(t);t!==null;){if(a=t[It])return a;t=D_(t)}return i}t=a,a=t.parentNode}return null}function ti(t){if(t=t[It]||t[Rn]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function ni(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(r(33))}function sn(t){var i=t[Tu];return i||(i=t[Tu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ft(t){t[fr]=!0}var xo=new Set,oa={};function Hn(t,i){Di(t,i),Di(t+"Capture",i)}function Di(t,i){for(oa[t]=i,t=0;t<i.length;t++)xo.add(i[t])}var Au=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bu={},mr={};function Su(t){return rr.call(mr,t)?!0:rr.call(bu,t)?!1:Au.test(t)?mr[t]=!0:(bu[t]=!0,!1)}function fs(t,i,a){if(Su(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function ii(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function zt(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}var pr,wu;function Oi(t){if(pr===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);pr=i&&i[1]||"",wu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pr+t+wu}var la=!1;function ua(t,i){if(!t||la)return"";la=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(H){var q=H}Reflect.construct(t,[],W)}else{try{W.call()}catch(H){q=H}t.call(W.prototype)}}else{try{throw Error()}catch(H){q=H}(W=t())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(H){if(H&&q&&typeof H.stack=="string")return[H.stack,q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),E=f[0],A=f[1];if(E&&A){var x=E.split(`
`),B=A.split(`
`);for(h=l=0;l<x.length&&!x[l].includes("DetermineComponentFrameRoot");)l++;for(;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;if(l===x.length||h===B.length)for(l=x.length-1,h=B.length-1;1<=l&&0<=h&&x[l]!==B[h];)h--;for(;1<=l&&0<=h;l--,h--)if(x[l]!==B[h]){if(l!==1||h!==1)do if(l--,h--,0>h||x[l]!==B[h]){var Y=`
`+x[l].replace(" at new "," at ");return t.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",t.displayName)),Y}while(1<=l&&0<=h);break}}}finally{la=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Oi(a):""}function Do(t){switch(t.tag){case 26:case 27:case 5:return Oi(t.type);case 16:return Oi("Lazy");case 13:return Oi("Suspense");case 19:return Oi("SuspenseList");case 0:case 15:return ua(t.type,!1);case 11:return ua(t.type.render,!1);case 1:return ua(t.type,!0);case 31:return Oi("Activity");default:return""}}function ca(t){try{var i="";do i+=Do(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function rn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Oo(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Jh(t){var i=Oo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),l=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(E){l=""+E,f.call(this,E)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function ha(t){t._valueTracker||(t._valueTracker=Jh(t))}function Mo(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=Oo(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function gr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ed=/[\n"\\]/g;function Tt(t){return t.replace(ed,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function gn(t,i,a,l,h,f,E,A){t.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.type=E:t.removeAttribute("type"),i!=null?E==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+rn(i)):t.value!==""+rn(i)&&(t.value=""+rn(i)):E!=="submit"&&E!=="reset"||t.removeAttribute("value"),i!=null?ms(t,E,rn(i)):a!=null?ms(t,E,rn(a)):l!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?t.name=""+rn(A):t.removeAttribute("name")}function yr(t,i,a,l,h,f,E,A){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null))return;a=a!=null?""+rn(a):"",i=i!=null?""+rn(i):a,A||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=A?t.checked:!!l,t.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(t.name=E)}function ms(t,i,a){i==="number"&&gr(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Mi(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+rn(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function We(t,i,a){if(i!=null&&(i=""+rn(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+rn(a):""}function _r(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(be(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=rn(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function In(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var vr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ru(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||vr.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Vo(t,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&Ru(t,h,l)}else for(var f in i)i.hasOwnProperty(f)&&Ru(t,f,i[f])}function ko(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var td=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),nd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function da(t){return nd.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Vi=null;function Nn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ki=null,ji=null;function jo(t){var i=ti(t);if(i&&(t=i.stateNode)){var a=t[Et]||null;e:switch(t=i.stateNode,i.type){case"input":if(gn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Tt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[Et]||null;if(!h)throw Error(r(90));gn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&Mo(l)}break e;case"textarea":We(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Mi(t,!!a.multiple,i,!1)}}}var si=!1;function Iu(t,i,a){if(si)return t(i,a);si=!0;try{var l=t(i);return l}finally{if(si=!1,(ki!==null||ji!==null)&&(Ec(),ki&&(i=ki,t=ji,ji=ki=null,jo(i),t)))for(i=0;i<t.length;i++)jo(t[i])}}function Er(t,i){var a=t.stateNode;if(a===null)return null;var l=a[Et]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cn=!1;if(Fn)try{var Tr={};Object.defineProperty(Tr,"passive",{get:function(){Cn=!0}}),window.addEventListener("test",Tr,Tr),window.removeEventListener("test",Tr,Tr)}catch{Cn=!1}var ri=null,ps=null,Pi=null;function Po(){if(Pi)return Pi;var t,i=ps,a=i.length,l,h="value"in ri?ri.value:ri.textContent,f=h.length;for(t=0;t<a&&i[t]===h[t];t++);var E=a-t;for(l=1;l<=E&&i[a-l]===h[f-l];l++);return Pi=h.slice(t,1<l?1-l:void 0)}function ai(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function oi(){return!0}function Lo(){return!1}function Vt(t){function i(a,l,h,f,E){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=f,this.target=E,this.currentTarget=null;for(var A in t)t.hasOwnProperty(A)&&(a=t[A],this[A]=a?a(f):f[A]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?oi:Lo,this.isPropagationStopped=Lo,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=oi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=oi)},persist:function(){},isPersistent:oi}),i}var Qe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fa=Vt(Qe),Ar=T({},Qe,{view:0,detail:0}),Nu=Vt(Ar),ma,pa,li,br=T({},Ar,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==li&&(li&&t.type==="mousemove"?(ma=t.screenX-li.screenX,pa=t.screenY-li.screenY):pa=ma=0,li=t),ma)},movementY:function(t){return"movementY"in t?t.movementY:pa}}),xn=Vt(br),Cu=T({},br,{dataTransfer:0}),id=Vt(Cu),Sr=T({},Ar,{relatedTarget:0}),ga=Vt(Sr),Uo=T({},Qe,{animationName:0,elapsedTime:0,pseudoElement:0}),ya=Vt(Uo),xu=T({},Qe,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_a=Vt(xu),sd=T({},Qe,{data:0}),zo=Vt(sd),wr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Du={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ou={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bo(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Ou[t])?!!i[t]:!1}function Rr(){return Bo}var Mu=T({},Ar,{key:function(t){if(t.key){var i=wr[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=ai(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Du[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rr,charCode:function(t){return t.type==="keypress"?ai(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ai(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),va=Vt(Mu),Vu=T({},br,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qo=Vt(Vu),Li=T({},Ar,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rr}),ku=Vt(Li),ju=T({},Qe,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pu=Vt(ju),Lu=T({},br,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ea=Vt(Lu),an=T({},Qe,{newState:0,oldState:0}),Uu=Vt(an),zu=[9,13,27,32],ui=Fn&&"CompositionEvent"in window,c=null;Fn&&"documentMode"in document&&(c=document.documentMode);var g=Fn&&"TextEvent"in window&&!c,v=Fn&&(!ui||c&&8<c&&11>=c),b=" ",L=!1;function F(t,i){switch(t){case"keyup":return zu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function re(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ue=!1;function Nt(t,i){switch(t){case"compositionend":return re(i);case"keypress":return i.which!==32?null:(L=!0,b);case"textInput":return t=i.data,t===b&&L?null:t;default:return null}}function ze(t,i){if(Ue)return t==="compositionend"||!ui&&F(t,i)?(t=Po(),Pi=ps=ri=null,Ue=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return v&&i.locale!=="ko"?null:i.data;default:return null}}var kt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ct(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!kt[t.type]:i==="textarea"}function Ui(t,i,a,l){ki?ji?ji.push(l):ji=[l]:ki=l,i=Rc(i,"onChange"),0<i.length&&(a=new fa("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var Bt=null,ci=null;function Ho(t){T_(t,0)}function Bu(t){var i=ni(t);if(Mo(i))return t}function qp(t,i){if(t==="change")return i}var Hp=!1;if(Fn){var rd;if(Fn){var ad="oninput"in document;if(!ad){var Fp=document.createElement("div");Fp.setAttribute("oninput","return;"),ad=typeof Fp.oninput=="function"}rd=ad}else rd=!1;Hp=rd&&(!document.documentMode||9<document.documentMode)}function Gp(){Bt&&(Bt.detachEvent("onpropertychange",Qp),ci=Bt=null)}function Qp(t){if(t.propertyName==="value"&&Bu(ci)){var i=[];Ui(i,ci,t,Nn(t)),Iu(Ho,i)}}function _A(t,i,a){t==="focusin"?(Gp(),Bt=i,ci=a,Bt.attachEvent("onpropertychange",Qp)):t==="focusout"&&Gp()}function vA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Bu(ci)}function EA(t,i){if(t==="click")return Bu(i)}function TA(t,i){if(t==="input"||t==="change")return Bu(i)}function AA(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var yn=typeof Object.is=="function"?Object.is:AA;function Fo(t,i){if(yn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!rr.call(i,h)||!yn(t[h],i[h]))return!1}return!0}function Kp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yp(t,i){var a=Kp(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Kp(a)}}function Xp(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Xp(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function $p(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=gr(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=gr(t.document)}return i}function od(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var bA=Fn&&"documentMode"in document&&11>=document.documentMode,Ta=null,ld=null,Go=null,ud=!1;function Wp(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ud||Ta==null||Ta!==gr(l)||(l=Ta,"selectionStart"in l&&od(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Go&&Fo(Go,l)||(Go=l,l=Rc(ld,"onSelect"),0<l.length&&(i=new fa("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=Ta)))}function Ir(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Aa={animationend:Ir("Animation","AnimationEnd"),animationiteration:Ir("Animation","AnimationIteration"),animationstart:Ir("Animation","AnimationStart"),transitionrun:Ir("Transition","TransitionRun"),transitionstart:Ir("Transition","TransitionStart"),transitioncancel:Ir("Transition","TransitionCancel"),transitionend:Ir("Transition","TransitionEnd")},cd={},Zp={};Fn&&(Zp=document.createElement("div").style,"AnimationEvent"in window||(delete Aa.animationend.animation,delete Aa.animationiteration.animation,delete Aa.animationstart.animation),"TransitionEvent"in window||delete Aa.transitionend.transition);function Nr(t){if(cd[t])return cd[t];if(!Aa[t])return t;var i=Aa[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Zp)return cd[t]=i[a];return t}var Jp=Nr("animationend"),eg=Nr("animationiteration"),tg=Nr("animationstart"),SA=Nr("transitionrun"),wA=Nr("transitionstart"),RA=Nr("transitioncancel"),ng=Nr("transitionend"),ig=new Map,hd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");hd.push("scrollEnd");function Gn(t,i){ig.set(t,i),Hn(i,[t])}var sg=new WeakMap;function Dn(t,i){if(typeof t=="object"&&t!==null){var a=sg.get(t);return a!==void 0?a:(i={value:t,source:i,stack:ca(i)},sg.set(t,i),i)}return{value:t,source:i,stack:ca(i)}}var On=[],ba=0,dd=0;function qu(){for(var t=ba,i=dd=ba=0;i<t;){var a=On[i];On[i++]=null;var l=On[i];On[i++]=null;var h=On[i];On[i++]=null;var f=On[i];if(On[i++]=null,l!==null&&h!==null){var E=l.pending;E===null?h.next=h:(h.next=E.next,E.next=h),l.pending=h}f!==0&&rg(a,h,f)}}function Hu(t,i,a,l){On[ba++]=t,On[ba++]=i,On[ba++]=a,On[ba++]=l,dd|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function fd(t,i,a,l){return Hu(t,i,a,l),Fu(t)}function Sa(t,i){return Hu(t,null,null,i),Fu(t)}function rg(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&i!==null&&(h=31-Yt(a),t=f.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),f):null}function Fu(t){if(50<gl)throw gl=0,Ef=null,Error(r(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var wa={};function IA(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(t,i,a,l){return new IA(t,i,a,l)}function md(t){return t=t.prototype,!(!t||!t.isReactComponent)}function zi(t,i){var a=t.alternate;return a===null?(a=_n(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function ag(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Gu(t,i,a,l,h,f){var E=0;if(l=t,typeof t=="function")md(t)&&(E=1);else if(typeof t=="string")E=Cb(t,a,ce.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=_n(31,a,i,h),t.elementType=R,t.lanes=f,t;case Q:return Cr(a.children,h,f,i);case te:E=8,h|=24;break;case K:return t=_n(12,a,i,h|2),t.elementType=K,t.lanes=f,t;case ue:return t=_n(13,a,i,h),t.elementType=ue,t.lanes=f,t;case Z:return t=_n(19,a,i,h),t.elementType=Z,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case se:case ne:E=10;break e;case he:E=9;break e;case ge:E=11;break e;case C:E=14;break e;case S:E=16,l=null;break e}E=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return i=_n(E,a,i,h),i.elementType=t,i.type=l,i.lanes=f,i}function Cr(t,i,a,l){return t=_n(7,t,l,i),t.lanes=a,t}function pd(t,i,a){return t=_n(6,t,null,i),t.lanes=a,t}function gd(t,i,a){return i=_n(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Ra=[],Ia=0,Qu=null,Ku=0,Mn=[],Vn=0,xr=null,Bi=1,qi="";function Dr(t,i){Ra[Ia++]=Ku,Ra[Ia++]=Qu,Qu=t,Ku=i}function og(t,i,a){Mn[Vn++]=Bi,Mn[Vn++]=qi,Mn[Vn++]=xr,xr=t;var l=Bi;t=qi;var h=32-Yt(l)-1;l&=~(1<<h),a+=1;var f=32-Yt(i)+h;if(30<f){var E=h-h%5;f=(l&(1<<E)-1).toString(32),l>>=E,h-=E,Bi=1<<32-Yt(i)+h|a<<h|l,qi=f+t}else Bi=1<<f|a<<h|l,qi=t}function yd(t){t.return!==null&&(Dr(t,1),og(t,1,0))}function _d(t){for(;t===Qu;)Qu=Ra[--Ia],Ra[Ia]=null,Ku=Ra[--Ia],Ra[Ia]=null;for(;t===xr;)xr=Mn[--Vn],Mn[Vn]=null,qi=Mn[--Vn],Mn[Vn]=null,Bi=Mn[--Vn],Mn[Vn]=null}var on=null,ht=null,Fe=!1,Or=null,hi=!1,vd=Error(r(519));function Mr(t){var i=Error(r(418,""));throw Yo(Dn(i,t)),vd}function lg(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[It]=t,i[Et]=l,a){case"dialog":Ve("cancel",i),Ve("close",i);break;case"iframe":case"object":case"embed":Ve("load",i);break;case"video":case"audio":for(a=0;a<_l.length;a++)Ve(_l[a],i);break;case"source":Ve("error",i);break;case"img":case"image":case"link":Ve("error",i),Ve("load",i);break;case"details":Ve("toggle",i);break;case"input":Ve("invalid",i),yr(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),ha(i);break;case"select":Ve("invalid",i);break;case"textarea":Ve("invalid",i),_r(i,l.value,l.defaultValue,l.children),ha(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||w_(i.textContent,a)?(l.popover!=null&&(Ve("beforetoggle",i),Ve("toggle",i)),l.onScroll!=null&&Ve("scroll",i),l.onScrollEnd!=null&&Ve("scrollend",i),l.onClick!=null&&(i.onclick=Ic),i=!0):i=!1,i||Mr(t)}function ug(t){for(on=t.return;on;)switch(on.tag){case 5:case 13:hi=!1;return;case 27:case 3:hi=!0;return;default:on=on.return}}function Qo(t){if(t!==on)return!1;if(!Fe)return ug(t),Fe=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||jf(t.type,t.memoizedProps)),a=!a),a&&ht&&Mr(t),ug(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){ht=Kn(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}ht=null}}else i===27?(i=ht,Ds(t.type)?(t=zf,zf=null,ht=t):ht=i):ht=on?Kn(t.stateNode.nextSibling):null;return!0}function Ko(){ht=on=null,Fe=!1}function cg(){var t=Or;return t!==null&&(hn===null?hn=t:hn.push.apply(hn,t),Or=null),t}function Yo(t){Or===null?Or=[t]:Or.push(t)}var Ed=ee(null),Vr=null,Hi=null;function gs(t,i,a){z(Ed,i._currentValue),i._currentValue=a}function Fi(t){t._currentValue=Ed.current,oe(Ed)}function Td(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function Ad(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var E=h.child;f=f.firstContext;e:for(;f!==null;){var A=f;f=h;for(var x=0;x<i.length;x++)if(A.context===i[x]){f.lanes|=a,A=f.alternate,A!==null&&(A.lanes|=a),Td(f.return,a,t),l||(E=null);break e}f=A.next}}else if(h.tag===18){if(E=h.return,E===null)throw Error(r(341));E.lanes|=a,f=E.alternate,f!==null&&(f.lanes|=a),Td(E,a,t),E=null}else E=h.child;if(E!==null)E.return=h;else for(E=h;E!==null;){if(E===t){E=null;break}if(h=E.sibling,h!==null){h.return=E.return,E=h;break}E=E.return}h=E}}function Xo(t,i,a,l){t=null;for(var h=i,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var E=h.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var A=h.type;yn(h.pendingProps.value,E.value)||(t!==null?t.push(A):t=[A])}}else if(h===Mt.current){if(E=h.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Sl):t=[Sl])}h=h.return}t!==null&&Ad(i,t,a,l),i.flags|=262144}function Yu(t){for(t=t.firstContext;t!==null;){if(!yn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function kr(t){Vr=t,Hi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Xt(t){return hg(Vr,t)}function Xu(t,i){return Vr===null&&kr(t),hg(t,i)}function hg(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Hi===null){if(t===null)throw Error(r(308));Hi=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Hi=Hi.next=i;return a}var NA=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},CA=s.unstable_scheduleCallback,xA=s.unstable_NormalPriority,xt={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bd(){return{controller:new NA,data:new Map,refCount:0}}function $o(t){t.refCount--,t.refCount===0&&CA(xA,function(){t.controller.abort()})}var Wo=null,Sd=0,Na=0,Ca=null;function DA(t,i){if(Wo===null){var a=Wo=[];Sd=0,Na=If(),Ca={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Sd++,i.then(dg,dg),i}function dg(){if(--Sd===0&&Wo!==null){Ca!==null&&(Ca.status="fulfilled");var t=Wo;Wo=null,Na=0,Ca=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function OA(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var fg=G.S;G.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&DA(t,i),fg!==null&&fg(t,i)};var jr=ee(null);function wd(){var t=jr.current;return t!==null?t:it.pooledCache}function $u(t,i){i===null?z(jr,jr.current):z(jr,i.pool)}function mg(){var t=wd();return t===null?null:{parent:xt._currentValue,pool:t}}var Zo=Error(r(460)),pg=Error(r(474)),Wu=Error(r(542)),Rd={then:function(){}};function gg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Zu(){}function yg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Zu,Zu),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,vg(t),t;default:if(typeof i.status=="string")i.then(Zu,Zu);else{if(t=it,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,vg(t),t}throw Jo=i,Zo}}var Jo=null;function _g(){if(Jo===null)throw Error(r(459));var t=Jo;return Jo=null,t}function vg(t){if(t===Zo||t===Wu)throw Error(r(483))}var ys=!1;function Id(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Nd(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function _s(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function vs(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Xe&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=Fu(t),rg(t,null,a),i}return Hu(t,l,i,a),Fu(t)}function el(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,No(t,a)}}function Cd(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=E:f=f.next=E,a=a.next}while(a!==null);f===null?h=f=i:f=f.next=i}else h=f=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var xd=!1;function tl(){if(xd){var t=Ca;if(t!==null)throw t}}function nl(t,i,a,l){xd=!1;var h=t.updateQueue;ys=!1;var f=h.firstBaseUpdate,E=h.lastBaseUpdate,A=h.shared.pending;if(A!==null){h.shared.pending=null;var x=A,B=x.next;x.next=null,E===null?f=B:E.next=B,E=x;var Y=t.alternate;Y!==null&&(Y=Y.updateQueue,A=Y.lastBaseUpdate,A!==E&&(A===null?Y.firstBaseUpdate=B:A.next=B,Y.lastBaseUpdate=x))}if(f!==null){var W=h.baseState;E=0,Y=B=x=null,A=f;do{var q=A.lane&-536870913,H=q!==A.lane;if(H?(Be&q)===q:(l&q)===q){q!==0&&q===Na&&(xd=!0),Y!==null&&(Y=Y.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var Se=t,ve=A;q=i;var et=a;switch(ve.tag){case 1:if(Se=ve.payload,typeof Se=="function"){W=Se.call(et,W,q);break e}W=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=ve.payload,q=typeof Se=="function"?Se.call(et,W,q):Se,q==null)break e;W=T({},W,q);break e;case 2:ys=!0}}q=A.callback,q!==null&&(t.flags|=64,H&&(t.flags|=8192),H=h.callbacks,H===null?h.callbacks=[q]:H.push(q))}else H={lane:q,tag:A.tag,payload:A.payload,callback:A.callback,next:null},Y===null?(B=Y=H,x=W):Y=Y.next=H,E|=q;if(A=A.next,A===null){if(A=h.shared.pending,A===null)break;H=A,A=H.next,H.next=null,h.lastBaseUpdate=H,h.shared.pending=null}}while(!0);Y===null&&(x=W),h.baseState=x,h.firstBaseUpdate=B,h.lastBaseUpdate=Y,f===null&&(h.shared.lanes=0),Is|=E,t.lanes=E,t.memoizedState=W}}function Eg(t,i){if(typeof t!="function")throw Error(r(191,t));t.call(i)}function Tg(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Eg(a[t],i)}var xa=ee(null),Ju=ee(0);function Ag(t,i){t=Wi,z(Ju,t),z(xa,i),Wi=t|i.baseLanes}function Dd(){z(Ju,Wi),z(xa,xa.current)}function Od(){Wi=Ju.current,oe(xa),oe(Ju)}var Es=0,Ce=null,Ze=null,At=null,ec=!1,Da=!1,Pr=!1,tc=0,il=0,Oa=null,MA=0;function mt(){throw Error(r(321))}function Md(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!yn(t[a],i[a]))return!1;return!0}function Vd(t,i,a,l,h,f){return Es=f,Ce=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,G.H=t===null||t.memoizedState===null?ry:ay,Pr=!1,f=a(l,h),Pr=!1,Da&&(f=Sg(i,a,l,h)),bg(t),f}function bg(t){G.H=oc;var i=Ze!==null&&Ze.next!==null;if(Es=0,At=Ze=Ce=null,ec=!1,il=0,Oa=null,i)throw Error(r(300));t===null||jt||(t=t.dependencies,t!==null&&Yu(t)&&(jt=!0))}function Sg(t,i,a,l){Ce=t;var h=0;do{if(Da&&(Oa=null),il=0,Da=!1,25<=h)throw Error(r(301));if(h+=1,At=Ze=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}G.H=zA,f=i(a,l)}while(Da);return f}function VA(){var t=G.H,i=t.useState()[0];return i=typeof i.then=="function"?sl(i):i,t=t.useState()[0],(Ze!==null?Ze.memoizedState:null)!==t&&(Ce.flags|=1024),i}function kd(){var t=tc!==0;return tc=0,t}function jd(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Pd(t){if(ec){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}ec=!1}Es=0,At=Ze=Ce=null,Da=!1,il=tc=0,Oa=null}function un(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?Ce.memoizedState=At=t:At=At.next=t,At}function bt(){if(Ze===null){var t=Ce.alternate;t=t!==null?t.memoizedState:null}else t=Ze.next;var i=At===null?Ce.memoizedState:At.next;if(i!==null)At=i,Ze=t;else{if(t===null)throw Ce.alternate===null?Error(r(467)):Error(r(310));Ze=t,t={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},At===null?Ce.memoizedState=At=t:At=At.next=t}return At}function Ld(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function sl(t){var i=il;return il+=1,Oa===null&&(Oa=[]),t=yg(Oa,t,i),i=Ce,(At===null?i.memoizedState:At.next)===null&&(i=i.alternate,G.H=i===null||i.memoizedState===null?ry:ay),t}function nc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return sl(t);if(t.$$typeof===ne)return Xt(t)}throw Error(r(438,String(t)))}function Ud(t){var i=null,a=Ce.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Ce.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Ld(),Ce.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=M;return i.index++,a}function Gi(t,i){return typeof i=="function"?i(t):i}function ic(t){var i=bt();return zd(i,Ze,t)}function zd(t,i,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var h=t.baseQueue,f=l.pending;if(f!==null){if(h!==null){var E=h.next;h.next=f.next,f.next=E}i.baseQueue=h=f,l.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{i=h.next;var A=E=null,x=null,B=i,Y=!1;do{var W=B.lane&-536870913;if(W!==B.lane?(Be&W)===W:(Es&W)===W){var q=B.revertLane;if(q===0)x!==null&&(x=x.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),W===Na&&(Y=!0);else if((Es&q)===q){B=B.next,q===Na&&(Y=!0);continue}else W={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},x===null?(A=x=W,E=f):x=x.next=W,Ce.lanes|=q,Is|=q;W=B.action,Pr&&a(f,W),f=B.hasEagerState?B.eagerState:a(f,W)}else q={lane:W,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},x===null?(A=x=q,E=f):x=x.next=q,Ce.lanes|=W,Is|=W;B=B.next}while(B!==null&&B!==i);if(x===null?E=f:x.next=A,!yn(f,t.memoizedState)&&(jt=!0,Y&&(a=Ca,a!==null)))throw a;t.memoizedState=f,t.baseState=E,t.baseQueue=x,l.lastRenderedState=f}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Bd(t){var i=bt(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,f=i.memoizedState;if(h!==null){a.pending=null;var E=h=h.next;do f=t(f,E.action),E=E.next;while(E!==h);yn(f,i.memoizedState)||(jt=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,l]}function wg(t,i,a){var l=Ce,h=bt(),f=Fe;if(f){if(a===void 0)throw Error(r(407));a=a()}else a=i();var E=!yn((Ze||h).memoizedState,a);E&&(h.memoizedState=a,jt=!0),h=h.queue;var A=Ng.bind(null,l,h,t);if(rl(2048,8,A,[t]),h.getSnapshot!==i||E||At!==null&&At.memoizedState.tag&1){if(l.flags|=2048,Ma(9,sc(),Ig.bind(null,l,h,a,i),null),it===null)throw Error(r(349));f||(Es&124)!==0||Rg(l,i,a)}return a}function Rg(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Ce.updateQueue,i===null?(i=Ld(),Ce.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function Ig(t,i,a,l){i.value=a,i.getSnapshot=l,Cg(i)&&xg(t)}function Ng(t,i,a){return a(function(){Cg(i)&&xg(t)})}function Cg(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!yn(t,a)}catch{return!0}}function xg(t){var i=Sa(t,2);i!==null&&bn(i,t,2)}function qd(t){var i=un();if(typeof t=="function"){var a=t;if(t=a(),Pr){pn(!0);try{a()}finally{pn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:t},i}function Dg(t,i,a,l){return t.baseState=a,zd(t,Ze,typeof l=="function"?l:Gi)}function kA(t,i,a,l,h){if(ac(t))throw Error(r(485));if(t=i.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){f.listeners.push(E)}};G.T!==null?a(!0):f.isTransition=!1,l(f),a=i.pending,a===null?(f.next=i.pending=f,Og(i,f)):(f.next=a.next,i.pending=a.next=f)}}function Og(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var f=G.T,E={};G.T=E;try{var A=a(h,l),x=G.S;x!==null&&x(E,A),Mg(t,i,A)}catch(B){Hd(t,i,B)}finally{G.T=f}}else try{f=a(h,l),Mg(t,i,f)}catch(B){Hd(t,i,B)}}function Mg(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Vg(t,i,l)},function(l){return Hd(t,i,l)}):Vg(t,i,a)}function Vg(t,i,a){i.status="fulfilled",i.value=a,kg(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Og(t,a)))}function Hd(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,kg(i),i=i.next;while(i!==l)}t.action=null}function kg(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function jg(t,i){return i}function Pg(t,i){if(Fe){var a=it.formState;if(a!==null){e:{var l=Ce;if(Fe){if(ht){t:{for(var h=ht,f=hi;h.nodeType!==8;){if(!f){h=null;break t}if(h=Kn(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){ht=Kn(h.nextSibling),l=h.data==="F!";break e}}Mr(l)}l=!1}l&&(i=a[0])}}return a=un(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jg,lastRenderedState:i},a.queue=l,a=ny.bind(null,Ce,l),l.dispatch=a,l=qd(!1),f=Yd.bind(null,Ce,!1,l.queue),l=un(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=kA.bind(null,Ce,h,f,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function Lg(t){var i=bt();return Ug(i,Ze,t)}function Ug(t,i,a){if(i=zd(t,i,jg)[0],t=ic(Gi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=sl(i)}catch(E){throw E===Zo?Wu:E}else l=i;i=bt();var h=i.queue,f=h.dispatch;return a!==i.memoizedState&&(Ce.flags|=2048,Ma(9,sc(),jA.bind(null,h,a),null)),[l,f,t]}function jA(t,i){t.action=i}function zg(t){var i=bt(),a=Ze;if(a!==null)return Ug(i,a,t);bt(),i=i.memoizedState,a=bt();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function Ma(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Ce.updateQueue,i===null&&(i=Ld(),Ce.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function sc(){return{destroy:void 0,resource:void 0}}function Bg(){return bt().memoizedState}function rc(t,i,a,l){var h=un();l=l===void 0?null:l,Ce.flags|=t,h.memoizedState=Ma(1|i,sc(),a,l)}function rl(t,i,a,l){var h=bt();l=l===void 0?null:l;var f=h.memoizedState.inst;Ze!==null&&l!==null&&Md(l,Ze.memoizedState.deps)?h.memoizedState=Ma(i,f,a,l):(Ce.flags|=t,h.memoizedState=Ma(1|i,f,a,l))}function qg(t,i){rc(8390656,8,t,i)}function Hg(t,i){rl(2048,8,t,i)}function Fg(t,i){return rl(4,2,t,i)}function Gg(t,i){return rl(4,4,t,i)}function Qg(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Kg(t,i,a){a=a!=null?a.concat([t]):null,rl(4,4,Qg.bind(null,i,t),a)}function Fd(){}function Yg(t,i){var a=bt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Md(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function Xg(t,i){var a=bt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Md(i,l[1]))return l[0];if(l=t(),Pr){pn(!0);try{t()}finally{pn(!1)}}return a.memoizedState=[l,i],l}function Gd(t,i,a){return a===void 0||(Es&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=Zy(),Ce.lanes|=t,Is|=t,a)}function $g(t,i,a,l){return yn(a,i)?a:xa.current!==null?(t=Gd(t,a,l),yn(t,i)||(jt=!0),t):(Es&42)===0?(jt=!0,t.memoizedState=a):(t=Zy(),Ce.lanes|=t,Is|=t,i)}function Wg(t,i,a,l,h){var f=ae.p;ae.p=f!==0&&8>f?f:8;var E=G.T,A={};G.T=A,Yd(t,!1,i,a);try{var x=h(),B=G.S;if(B!==null&&B(A,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var Y=OA(x,l);al(t,i,Y,An(t))}else al(t,i,l,An(t))}catch(W){al(t,i,{then:function(){},status:"rejected",reason:W},An())}finally{ae.p=f,G.T=E}}function PA(){}function Qd(t,i,a,l){if(t.tag!==5)throw Error(r(476));var h=Zg(t).queue;Wg(t,h,i,pe,a===null?PA:function(){return Jg(t),a(l)})}function Zg(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:pe},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Jg(t){var i=Zg(t).next.queue;al(t,i,{},An())}function Kd(){return Xt(Sl)}function ey(){return bt().memoizedState}function ty(){return bt().memoizedState}function LA(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=An();t=_s(a);var l=vs(i,t,a);l!==null&&(bn(l,i,a),el(l,i,a)),i={cache:bd()},t.payload=i;return}i=i.return}}function UA(t,i,a){var l=An();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},ac(t)?iy(i,a):(a=fd(t,i,a,l),a!==null&&(bn(a,t,l),sy(a,i,l)))}function ny(t,i,a){var l=An();al(t,i,a,l)}function al(t,i,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(ac(t))iy(i,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var E=i.lastRenderedState,A=f(E,a);if(h.hasEagerState=!0,h.eagerState=A,yn(A,E))return Hu(t,i,h,0),it===null&&qu(),!1}catch{}finally{}if(a=fd(t,i,h,l),a!==null)return bn(a,t,l),sy(a,i,l),!0}return!1}function Yd(t,i,a,l){if(l={lane:2,revertLane:If(),action:l,hasEagerState:!1,eagerState:null,next:null},ac(t)){if(i)throw Error(r(479))}else i=fd(t,a,l,2),i!==null&&bn(i,t,2)}function ac(t){var i=t.alternate;return t===Ce||i!==null&&i===Ce}function iy(t,i){Da=ec=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function sy(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,No(t,a)}}var oc={readContext:Xt,use:nc,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt,useHostTransitionStatus:mt,useFormState:mt,useActionState:mt,useOptimistic:mt,useMemoCache:mt,useCacheRefresh:mt},ry={readContext:Xt,use:nc,useCallback:function(t,i){return un().memoizedState=[t,i===void 0?null:i],t},useContext:Xt,useEffect:qg,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,rc(4194308,4,Qg.bind(null,i,t),a)},useLayoutEffect:function(t,i){return rc(4194308,4,t,i)},useInsertionEffect:function(t,i){rc(4,2,t,i)},useMemo:function(t,i){var a=un();i=i===void 0?null:i;var l=t();if(Pr){pn(!0);try{t()}finally{pn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=un();if(a!==void 0){var h=a(i);if(Pr){pn(!0);try{a(i)}finally{pn(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=UA.bind(null,Ce,t),[l.memoizedState,t]},useRef:function(t){var i=un();return t={current:t},i.memoizedState=t},useState:function(t){t=qd(t);var i=t.queue,a=ny.bind(null,Ce,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:Fd,useDeferredValue:function(t,i){var a=un();return Gd(a,t,i)},useTransition:function(){var t=qd(!1);return t=Wg.bind(null,Ce,t.queue,!0,!1),un().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Ce,h=un();if(Fe){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),it===null)throw Error(r(349));(Be&124)!==0||Rg(l,i,a)}h.memoizedState=a;var f={value:a,getSnapshot:i};return h.queue=f,qg(Ng.bind(null,l,f,t),[t]),l.flags|=2048,Ma(9,sc(),Ig.bind(null,l,f,a,i),null),a},useId:function(){var t=un(),i=it.identifierPrefix;if(Fe){var a=qi,l=Bi;a=(l&~(1<<32-Yt(l)-1)).toString(32)+a,i="«"+i+"R"+a,a=tc++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=MA++,i="«"+i+"r"+a.toString(32)+"»";return t.memoizedState=i},useHostTransitionStatus:Kd,useFormState:Pg,useActionState:Pg,useOptimistic:function(t){var i=un();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Yd.bind(null,Ce,!0,a),a.dispatch=i,[t,i]},useMemoCache:Ud,useCacheRefresh:function(){return un().memoizedState=LA.bind(null,Ce)}},ay={readContext:Xt,use:nc,useCallback:Yg,useContext:Xt,useEffect:Hg,useImperativeHandle:Kg,useInsertionEffect:Fg,useLayoutEffect:Gg,useMemo:Xg,useReducer:ic,useRef:Bg,useState:function(){return ic(Gi)},useDebugValue:Fd,useDeferredValue:function(t,i){var a=bt();return $g(a,Ze.memoizedState,t,i)},useTransition:function(){var t=ic(Gi)[0],i=bt().memoizedState;return[typeof t=="boolean"?t:sl(t),i]},useSyncExternalStore:wg,useId:ey,useHostTransitionStatus:Kd,useFormState:Lg,useActionState:Lg,useOptimistic:function(t,i){var a=bt();return Dg(a,Ze,t,i)},useMemoCache:Ud,useCacheRefresh:ty},zA={readContext:Xt,use:nc,useCallback:Yg,useContext:Xt,useEffect:Hg,useImperativeHandle:Kg,useInsertionEffect:Fg,useLayoutEffect:Gg,useMemo:Xg,useReducer:Bd,useRef:Bg,useState:function(){return Bd(Gi)},useDebugValue:Fd,useDeferredValue:function(t,i){var a=bt();return Ze===null?Gd(a,t,i):$g(a,Ze.memoizedState,t,i)},useTransition:function(){var t=Bd(Gi)[0],i=bt().memoizedState;return[typeof t=="boolean"?t:sl(t),i]},useSyncExternalStore:wg,useId:ey,useHostTransitionStatus:Kd,useFormState:zg,useActionState:zg,useOptimistic:function(t,i){var a=bt();return Ze!==null?Dg(a,Ze,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Ud,useCacheRefresh:ty},Va=null,ol=0;function lc(t){var i=ol;return ol+=1,Va===null&&(Va=[]),yg(Va,t,i)}function ll(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function uc(t,i){throw i.$$typeof===I?Error(r(525)):(t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function oy(t){var i=t._init;return i(t._payload)}function ly(t){function i(P,k){if(t){var U=P.deletions;U===null?(P.deletions=[k],P.flags|=16):U.push(k)}}function a(P,k){if(!t)return null;for(;k!==null;)i(P,k),k=k.sibling;return null}function l(P){for(var k=new Map;P!==null;)P.key!==null?k.set(P.key,P):k.set(P.index,P),P=P.sibling;return k}function h(P,k){return P=zi(P,k),P.index=0,P.sibling=null,P}function f(P,k,U){return P.index=U,t?(U=P.alternate,U!==null?(U=U.index,U<k?(P.flags|=67108866,k):U):(P.flags|=67108866,k)):(P.flags|=1048576,k)}function E(P){return t&&P.alternate===null&&(P.flags|=67108866),P}function A(P,k,U,$){return k===null||k.tag!==6?(k=pd(U,P.mode,$),k.return=P,k):(k=h(k,U),k.return=P,k)}function x(P,k,U,$){var me=U.type;return me===Q?Y(P,k,U.props.children,$,U.key):k!==null&&(k.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===S&&oy(me)===k.type)?(k=h(k,U.props),ll(k,U),k.return=P,k):(k=Gu(U.type,U.key,U.props,null,P.mode,$),ll(k,U),k.return=P,k)}function B(P,k,U,$){return k===null||k.tag!==4||k.stateNode.containerInfo!==U.containerInfo||k.stateNode.implementation!==U.implementation?(k=gd(U,P.mode,$),k.return=P,k):(k=h(k,U.children||[]),k.return=P,k)}function Y(P,k,U,$,me){return k===null||k.tag!==7?(k=Cr(U,P.mode,$,me),k.return=P,k):(k=h(k,U),k.return=P,k)}function W(P,k,U){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=pd(""+k,P.mode,U),k.return=P,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case N:return U=Gu(k.type,k.key,k.props,null,P.mode,U),ll(U,k),U.return=P,U;case O:return k=gd(k,P.mode,U),k.return=P,k;case S:var $=k._init;return k=$(k._payload),W(P,k,U)}if(be(k)||j(k))return k=Cr(k,P.mode,U,null),k.return=P,k;if(typeof k.then=="function")return W(P,lc(k),U);if(k.$$typeof===ne)return W(P,Xu(P,k),U);uc(P,k)}return null}function q(P,k,U,$){var me=k!==null?k.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return me!==null?null:A(P,k,""+U,$);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case N:return U.key===me?x(P,k,U,$):null;case O:return U.key===me?B(P,k,U,$):null;case S:return me=U._init,U=me(U._payload),q(P,k,U,$)}if(be(U)||j(U))return me!==null?null:Y(P,k,U,$,null);if(typeof U.then=="function")return q(P,k,lc(U),$);if(U.$$typeof===ne)return q(P,k,Xu(P,U),$);uc(P,U)}return null}function H(P,k,U,$,me){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return P=P.get(U)||null,A(k,P,""+$,me);if(typeof $=="object"&&$!==null){switch($.$$typeof){case N:return P=P.get($.key===null?U:$.key)||null,x(k,P,$,me);case O:return P=P.get($.key===null?U:$.key)||null,B(k,P,$,me);case S:var Oe=$._init;return $=Oe($._payload),H(P,k,U,$,me)}if(be($)||j($))return P=P.get(U)||null,Y(k,P,$,me,null);if(typeof $.then=="function")return H(P,k,U,lc($),me);if($.$$typeof===ne)return H(P,k,U,Xu(k,$),me);uc(k,$)}return null}function Se(P,k,U,$){for(var me=null,Oe=null,ye=k,Ee=k=0,Lt=null;ye!==null&&Ee<U.length;Ee++){ye.index>Ee?(Lt=ye,ye=null):Lt=ye.sibling;var He=q(P,ye,U[Ee],$);if(He===null){ye===null&&(ye=Lt);break}t&&ye&&He.alternate===null&&i(P,ye),k=f(He,k,Ee),Oe===null?me=He:Oe.sibling=He,Oe=He,ye=Lt}if(Ee===U.length)return a(P,ye),Fe&&Dr(P,Ee),me;if(ye===null){for(;Ee<U.length;Ee++)ye=W(P,U[Ee],$),ye!==null&&(k=f(ye,k,Ee),Oe===null?me=ye:Oe.sibling=ye,Oe=ye);return Fe&&Dr(P,Ee),me}for(ye=l(ye);Ee<U.length;Ee++)Lt=H(ye,P,Ee,U[Ee],$),Lt!==null&&(t&&Lt.alternate!==null&&ye.delete(Lt.key===null?Ee:Lt.key),k=f(Lt,k,Ee),Oe===null?me=Lt:Oe.sibling=Lt,Oe=Lt);return t&&ye.forEach(function(js){return i(P,js)}),Fe&&Dr(P,Ee),me}function ve(P,k,U,$){if(U==null)throw Error(r(151));for(var me=null,Oe=null,ye=k,Ee=k=0,Lt=null,He=U.next();ye!==null&&!He.done;Ee++,He=U.next()){ye.index>Ee?(Lt=ye,ye=null):Lt=ye.sibling;var js=q(P,ye,He.value,$);if(js===null){ye===null&&(ye=Lt);break}t&&ye&&js.alternate===null&&i(P,ye),k=f(js,k,Ee),Oe===null?me=js:Oe.sibling=js,Oe=js,ye=Lt}if(He.done)return a(P,ye),Fe&&Dr(P,Ee),me;if(ye===null){for(;!He.done;Ee++,He=U.next())He=W(P,He.value,$),He!==null&&(k=f(He,k,Ee),Oe===null?me=He:Oe.sibling=He,Oe=He);return Fe&&Dr(P,Ee),me}for(ye=l(ye);!He.done;Ee++,He=U.next())He=H(ye,P,Ee,He.value,$),He!==null&&(t&&He.alternate!==null&&ye.delete(He.key===null?Ee:He.key),k=f(He,k,Ee),Oe===null?me=He:Oe.sibling=He,Oe=He);return t&&ye.forEach(function(Bb){return i(P,Bb)}),Fe&&Dr(P,Ee),me}function et(P,k,U,$){if(typeof U=="object"&&U!==null&&U.type===Q&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case N:e:{for(var me=U.key;k!==null;){if(k.key===me){if(me=U.type,me===Q){if(k.tag===7){a(P,k.sibling),$=h(k,U.props.children),$.return=P,P=$;break e}}else if(k.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===S&&oy(me)===k.type){a(P,k.sibling),$=h(k,U.props),ll($,U),$.return=P,P=$;break e}a(P,k);break}else i(P,k);k=k.sibling}U.type===Q?($=Cr(U.props.children,P.mode,$,U.key),$.return=P,P=$):($=Gu(U.type,U.key,U.props,null,P.mode,$),ll($,U),$.return=P,P=$)}return E(P);case O:e:{for(me=U.key;k!==null;){if(k.key===me)if(k.tag===4&&k.stateNode.containerInfo===U.containerInfo&&k.stateNode.implementation===U.implementation){a(P,k.sibling),$=h(k,U.children||[]),$.return=P,P=$;break e}else{a(P,k);break}else i(P,k);k=k.sibling}$=gd(U,P.mode,$),$.return=P,P=$}return E(P);case S:return me=U._init,U=me(U._payload),et(P,k,U,$)}if(be(U))return Se(P,k,U,$);if(j(U)){if(me=j(U),typeof me!="function")throw Error(r(150));return U=me.call(U),ve(P,k,U,$)}if(typeof U.then=="function")return et(P,k,lc(U),$);if(U.$$typeof===ne)return et(P,k,Xu(P,U),$);uc(P,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,k!==null&&k.tag===6?(a(P,k.sibling),$=h(k,U),$.return=P,P=$):(a(P,k),$=pd(U,P.mode,$),$.return=P,P=$),E(P)):a(P,k)}return function(P,k,U,$){try{ol=0;var me=et(P,k,U,$);return Va=null,me}catch(ye){if(ye===Zo||ye===Wu)throw ye;var Oe=_n(29,ye,null,P.mode);return Oe.lanes=$,Oe.return=P,Oe}finally{}}}var ka=ly(!0),uy=ly(!1),kn=ee(null),di=null;function Ts(t){var i=t.alternate;z(Dt,Dt.current&1),z(kn,t),di===null&&(i===null||xa.current!==null||i.memoizedState!==null)&&(di=t)}function cy(t){if(t.tag===22){if(z(Dt,Dt.current),z(kn,t),di===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(di=t)}}else As()}function As(){z(Dt,Dt.current),z(kn,kn.current)}function Qi(t){oe(kn),di===t&&(di=null),oe(Dt)}var Dt=ee(0);function cc(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Uf(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Xd(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:T({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var $d={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=An(),h=_s(l);h.payload=i,a!=null&&(h.callback=a),i=vs(t,h,l),i!==null&&(bn(i,t,l),el(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=An(),h=_s(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=vs(t,h,l),i!==null&&(bn(i,t,l),el(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=An(),l=_s(a);l.tag=2,i!=null&&(l.callback=i),i=vs(t,l,a),i!==null&&(bn(i,t,a),el(i,t,a))}};function hy(t,i,a,l,h,f,E){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,E):i.prototype&&i.prototype.isPureReactComponent?!Fo(a,l)||!Fo(h,f):!0}function dy(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&$d.enqueueReplaceState(i,i.state,null)}function Lr(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var hc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function fy(t){hc(t)}function my(t){console.error(t)}function py(t){hc(t)}function dc(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function gy(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Wd(t,i,a){return a=_s(a),a.tag=3,a.payload={element:null},a.callback=function(){dc(t,i)},a}function yy(t){return t=_s(t),t.tag=3,t}function _y(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=l.value;t.payload=function(){return h(f)},t.callback=function(){gy(i,a,l)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(t.callback=function(){gy(i,a,l),typeof h!="function"&&(Ns===null?Ns=new Set([this]):Ns.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})})}function BA(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Xo(i,a,h,!0),a=kn.current,a!==null){switch(a.tag){case 13:return di===null?Af():a.alternate===null&&dt===0&&(dt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Rd?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Sf(t,l,h)),!1;case 22:return a.flags|=65536,l===Rd?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Sf(t,l,h)),!1}throw Error(r(435,a.tag))}return Sf(t,l,h),Af(),!1}if(Fe)return i=kn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==vd&&(t=Error(r(422),{cause:l}),Yo(Dn(t,a)))):(l!==vd&&(i=Error(r(423),{cause:l}),Yo(Dn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Dn(l,a),h=Wd(t.stateNode,l,h),Cd(t,h),dt!==4&&(dt=2)),!1;var f=Error(r(520),{cause:l});if(f=Dn(f,a),pl===null?pl=[f]:pl.push(f),dt!==4&&(dt=2),i===null)return!0;l=Dn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Wd(a.stateNode,l,t),Cd(a,t),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Ns===null||!Ns.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=yy(h),_y(h,t,a,l),Cd(a,h),!1}a=a.return}while(a!==null);return!1}var vy=Error(r(461)),jt=!1;function qt(t,i,a,l){i.child=t===null?uy(i,null,a,l):ka(i,t.child,a,l)}function Ey(t,i,a,l,h){a=a.render;var f=i.ref;if("ref"in l){var E={};for(var A in l)A!=="ref"&&(E[A]=l[A])}else E=l;return kr(i),l=Vd(t,i,a,E,f,h),A=kd(),t!==null&&!jt?(jd(t,i,h),Ki(t,i,h)):(Fe&&A&&yd(i),i.flags|=1,qt(t,i,l,h),i.child)}function Ty(t,i,a,l,h){if(t===null){var f=a.type;return typeof f=="function"&&!md(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,Ay(t,i,f,l,h)):(t=Gu(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(f=t.child,!af(t,h)){var E=f.memoizedProps;if(a=a.compare,a=a!==null?a:Fo,a(E,l)&&t.ref===i.ref)return Ki(t,i,h)}return i.flags|=1,t=zi(f,l),t.ref=i.ref,t.return=i,i.child=t}function Ay(t,i,a,l,h){if(t!==null){var f=t.memoizedProps;if(Fo(f,l)&&t.ref===i.ref)if(jt=!1,i.pendingProps=l=f,af(t,h))(t.flags&131072)!==0&&(jt=!0);else return i.lanes=t.lanes,Ki(t,i,h)}return Zd(t,i,a,l,h)}function by(t,i,a){var l=i.pendingProps,h=l.children,f=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=f!==null?f.baseLanes|a:a,t!==null){for(h=i.child=t.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;i.childLanes=f&~l}else i.childLanes=0,i.child=null;return Sy(t,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&$u(i,f!==null?f.cachePool:null),f!==null?Ag(i,f):Dd(),cy(i);else return i.lanes=i.childLanes=536870912,Sy(t,i,f!==null?f.baseLanes|a:a,a)}else f!==null?($u(i,f.cachePool),Ag(i,f),As(),i.memoizedState=null):(t!==null&&$u(i,null),Dd(),As());return qt(t,i,h,a),i.child}function Sy(t,i,a,l){var h=wd();return h=h===null?null:{parent:xt._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},t!==null&&$u(i,null),Dd(),cy(i),t!==null&&Xo(t,i,l,!0),null}function fc(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Zd(t,i,a,l,h){return kr(i),a=Vd(t,i,a,l,void 0,h),l=kd(),t!==null&&!jt?(jd(t,i,h),Ki(t,i,h)):(Fe&&l&&yd(i),i.flags|=1,qt(t,i,a,h),i.child)}function wy(t,i,a,l,h,f){return kr(i),i.updateQueue=null,a=Sg(i,l,a,h),bg(t),l=kd(),t!==null&&!jt?(jd(t,i,f),Ki(t,i,f)):(Fe&&l&&yd(i),i.flags|=1,qt(t,i,a,f),i.child)}function Ry(t,i,a,l,h){if(kr(i),i.stateNode===null){var f=wa,E=a.contextType;typeof E=="object"&&E!==null&&(f=Xt(E)),f=new a(l,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=$d,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=l,f.state=i.memoizedState,f.refs={},Id(i),E=a.contextType,f.context=typeof E=="object"&&E!==null?Xt(E):wa,f.state=i.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(Xd(i,a,E,l),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(E=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),E!==f.state&&$d.enqueueReplaceState(f,f.state,null),nl(i,l,f,h),tl(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){f=i.stateNode;var A=i.memoizedProps,x=Lr(a,A);f.props=x;var B=f.context,Y=a.contextType;E=wa,typeof Y=="object"&&Y!==null&&(E=Xt(Y));var W=a.getDerivedStateFromProps;Y=typeof W=="function"||typeof f.getSnapshotBeforeUpdate=="function",A=i.pendingProps!==A,Y||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(A||B!==E)&&dy(i,f,l,E),ys=!1;var q=i.memoizedState;f.state=q,nl(i,l,f,h),tl(),B=i.memoizedState,A||q!==B||ys?(typeof W=="function"&&(Xd(i,a,W,l),B=i.memoizedState),(x=ys||hy(i,a,x,l,q,B,E))?(Y||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=B),f.props=l,f.state=B,f.context=E,l=x):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{f=i.stateNode,Nd(t,i),E=i.memoizedProps,Y=Lr(a,E),f.props=Y,W=i.pendingProps,q=f.context,B=a.contextType,x=wa,typeof B=="object"&&B!==null&&(x=Xt(B)),A=a.getDerivedStateFromProps,(B=typeof A=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E!==W||q!==x)&&dy(i,f,l,x),ys=!1,q=i.memoizedState,f.state=q,nl(i,l,f,h),tl();var H=i.memoizedState;E!==W||q!==H||ys||t!==null&&t.dependencies!==null&&Yu(t.dependencies)?(typeof A=="function"&&(Xd(i,a,A,l),H=i.memoizedState),(Y=ys||hy(i,a,Y,l,q,H,x)||t!==null&&t.dependencies!==null&&Yu(t.dependencies))?(B||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,H,x),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,H,x)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||E===t.memoizedProps&&q===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&q===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=H),f.props=l,f.state=H,f.context=x,l=Y):(typeof f.componentDidUpdate!="function"||E===t.memoizedProps&&q===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&q===t.memoizedState||(i.flags|=1024),l=!1)}return f=l,fc(t,i),l=(i.flags&128)!==0,f||l?(f=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,t!==null&&l?(i.child=ka(i,t.child,null,h),i.child=ka(i,null,a,h)):qt(t,i,a,h),i.memoizedState=f.state,t=i.child):t=Ki(t,i,h),t}function Iy(t,i,a,l){return Ko(),i.flags|=256,qt(t,i,a,l),i.child}var Jd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ef(t){return{baseLanes:t,cachePool:mg()}}function tf(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=jn),t}function Ny(t,i,a){var l=i.pendingProps,h=!1,f=(i.flags&128)!==0,E;if((E=f)||(E=t!==null&&t.memoizedState===null?!1:(Dt.current&2)!==0),E&&(h=!0,i.flags&=-129),E=(i.flags&32)!==0,i.flags&=-33,t===null){if(Fe){if(h?Ts(i):As(),Fe){var A=ht,x;if(x=A){e:{for(x=A,A=hi;x.nodeType!==8;){if(!A){A=null;break e}if(x=Kn(x.nextSibling),x===null){A=null;break e}}A=x}A!==null?(i.memoizedState={dehydrated:A,treeContext:xr!==null?{id:Bi,overflow:qi}:null,retryLane:536870912,hydrationErrors:null},x=_n(18,null,null,0),x.stateNode=A,x.return=i,i.child=x,on=i,ht=null,x=!0):x=!1}x||Mr(i)}if(A=i.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return Uf(A)?i.lanes=32:i.lanes=536870912,null;Qi(i)}return A=l.children,l=l.fallback,h?(As(),h=i.mode,A=mc({mode:"hidden",children:A},h),l=Cr(l,h,a,null),A.return=i,l.return=i,A.sibling=l,i.child=A,h=i.child,h.memoizedState=ef(a),h.childLanes=tf(t,E,a),i.memoizedState=Jd,l):(Ts(i),nf(i,A))}if(x=t.memoizedState,x!==null&&(A=x.dehydrated,A!==null)){if(f)i.flags&256?(Ts(i),i.flags&=-257,i=sf(t,i,a)):i.memoizedState!==null?(As(),i.child=t.child,i.flags|=128,i=null):(As(),h=l.fallback,A=i.mode,l=mc({mode:"visible",children:l.children},A),h=Cr(h,A,a,null),h.flags|=2,l.return=i,h.return=i,l.sibling=h,i.child=l,ka(i,t.child,null,a),l=i.child,l.memoizedState=ef(a),l.childLanes=tf(t,E,a),i.memoizedState=Jd,i=h);else if(Ts(i),Uf(A)){if(E=A.nextSibling&&A.nextSibling.dataset,E)var B=E.dgst;E=B,l=Error(r(419)),l.stack="",l.digest=E,Yo({value:l,source:null,stack:null}),i=sf(t,i,a)}else if(jt||Xo(t,i,a,!1),E=(a&t.childLanes)!==0,jt||E){if(E=it,E!==null&&(l=a&-a,l=(l&42)!==0?1:us(l),l=(l&(E.suspendedLanes|a))!==0?0:l,l!==0&&l!==x.retryLane))throw x.retryLane=l,Sa(t,l),bn(E,t,l),vy;A.data==="$?"||Af(),i=sf(t,i,a)}else A.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=x.treeContext,ht=Kn(A.nextSibling),on=i,Fe=!0,Or=null,hi=!1,t!==null&&(Mn[Vn++]=Bi,Mn[Vn++]=qi,Mn[Vn++]=xr,Bi=t.id,qi=t.overflow,xr=i),i=nf(i,l.children),i.flags|=4096);return i}return h?(As(),h=l.fallback,A=i.mode,x=t.child,B=x.sibling,l=zi(x,{mode:"hidden",children:l.children}),l.subtreeFlags=x.subtreeFlags&65011712,B!==null?h=zi(B,h):(h=Cr(h,A,a,null),h.flags|=2),h.return=i,l.return=i,l.sibling=h,i.child=l,l=h,h=i.child,A=t.child.memoizedState,A===null?A=ef(a):(x=A.cachePool,x!==null?(B=xt._currentValue,x=x.parent!==B?{parent:B,pool:B}:x):x=mg(),A={baseLanes:A.baseLanes|a,cachePool:x}),h.memoizedState=A,h.childLanes=tf(t,E,a),i.memoizedState=Jd,l):(Ts(i),a=t.child,t=a.sibling,a=zi(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(E=i.deletions,E===null?(i.deletions=[t],i.flags|=16):E.push(t)),i.child=a,i.memoizedState=null,a)}function nf(t,i){return i=mc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function mc(t,i){return t=_n(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function sf(t,i,a){return ka(i,t.child,null,a),t=nf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Cy(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Td(t.return,i,a)}function rf(t,i,a,l,h){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(f.isBackwards=i,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=h)}function xy(t,i,a){var l=i.pendingProps,h=l.revealOrder,f=l.tail;if(qt(t,i,l.children,a),l=Dt.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Cy(t,a,i);else if(t.tag===19)Cy(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(z(Dt,l),h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&cc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),rf(i,!1,h,a,f);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&cc(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}rf(i,!0,a,null,f);break;case"together":rf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Ki(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Is|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Xo(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,a=zi(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=zi(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function af(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Yu(t)))}function qA(t,i,a){switch(i.tag){case 3:nt(i,i.stateNode.containerInfo),gs(i,xt,t.memoizedState.cache),Ko();break;case 27:case 5:ls(i);break;case 4:nt(i,i.stateNode.containerInfo);break;case 10:gs(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Ts(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Ny(t,i,a):(Ts(i),t=Ki(t,i,a),t!==null?t.sibling:null);Ts(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Xo(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return xy(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),z(Dt,Dt.current),l)break;return null;case 22:case 23:return i.lanes=0,by(t,i,a);case 24:gs(i,xt,t.memoizedState.cache)}return Ki(t,i,a)}function Dy(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)jt=!0;else{if(!af(t,a)&&(i.flags&128)===0)return jt=!1,qA(t,i,a);jt=(t.flags&131072)!==0}else jt=!1,Fe&&(i.flags&1048576)!==0&&og(i,Ku,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var l=i.elementType,h=l._init;if(l=h(l._payload),i.type=l,typeof l=="function")md(l)?(t=Lr(l,t),i.tag=1,i=Ry(null,i,l,t,a)):(i.tag=0,i=Zd(null,i,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===ge){i.tag=11,i=Ey(null,i,l,t,a);break e}else if(h===C){i.tag=14,i=Ty(null,i,l,t,a);break e}}throw i=ie(l)||l,Error(r(306,i,""))}}return i;case 0:return Zd(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=Lr(l,i.pendingProps),Ry(t,i,l,h,a);case 3:e:{if(nt(i,i.stateNode.containerInfo),t===null)throw Error(r(387));l=i.pendingProps;var f=i.memoizedState;h=f.element,Nd(t,i),nl(i,l,null,a);var E=i.memoizedState;if(l=E.cache,gs(i,xt,l),l!==f.cache&&Ad(i,[xt],a,!0),tl(),l=E.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:E.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=Iy(t,i,l,a);break e}else if(l!==h){h=Dn(Error(r(424)),i),Yo(h),i=Iy(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ht=Kn(t.firstChild),on=i,Fe=!0,Or=null,hi=!0,a=uy(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ko(),l===h){i=Ki(t,i,a);break e}qt(t,i,l,a)}i=i.child}return i;case 26:return fc(t,i),t===null?(a=k_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Fe||(a=i.type,t=i.pendingProps,l=Nc(we.current).createElement(a),l[It]=i,l[Et]=t,Ft(l,a,t),ft(l),i.stateNode=l):i.memoizedState=k_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return ls(i),t===null&&Fe&&(l=i.stateNode=O_(i.type,i.pendingProps,we.current),on=i,hi=!0,h=ht,Ds(i.type)?(zf=h,ht=Kn(l.firstChild)):ht=h),qt(t,i,i.pendingProps.children,a),fc(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Fe&&((h=l=ht)&&(l=gb(l,i.type,i.pendingProps,hi),l!==null?(i.stateNode=l,on=i,ht=Kn(l.firstChild),hi=!1,h=!0):h=!1),h||Mr(i)),ls(i),h=i.type,f=i.pendingProps,E=t!==null?t.memoizedProps:null,l=f.children,jf(h,f)?l=null:E!==null&&jf(h,E)&&(i.flags|=32),i.memoizedState!==null&&(h=Vd(t,i,VA,null,null,a),Sl._currentValue=h),fc(t,i),qt(t,i,l,a),i.child;case 6:return t===null&&Fe&&((t=a=ht)&&(a=yb(a,i.pendingProps,hi),a!==null?(i.stateNode=a,on=i,ht=null,t=!0):t=!1),t||Mr(i)),null;case 13:return Ny(t,i,a);case 4:return nt(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=ka(i,null,l,a):qt(t,i,l,a),i.child;case 11:return Ey(t,i,i.type,i.pendingProps,a);case 7:return qt(t,i,i.pendingProps,a),i.child;case 8:return qt(t,i,i.pendingProps.children,a),i.child;case 12:return qt(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,gs(i,i.type,l.value),qt(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,kr(i),h=Xt(h),l=l(h),i.flags|=1,qt(t,i,l,a),i.child;case 14:return Ty(t,i,i.type,i.pendingProps,a);case 15:return Ay(t,i,i.type,i.pendingProps,a);case 19:return xy(t,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},t===null?(a=mc(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=zi(t.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return by(t,i,a);case 24:return kr(i),l=Xt(xt),t===null?(h=wd(),h===null&&(h=it,f=bd(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),i.memoizedState={parent:l,cache:h},Id(i),gs(i,xt,h)):((t.lanes&a)!==0&&(Nd(t,i),nl(i,null,null,a),tl()),h=t.memoizedState,f=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),gs(i,xt,l)):(l=f.cache,gs(i,xt,l),l!==h.cache&&Ad(i,[xt],a,!0))),qt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Yi(t){t.flags|=4}function Oy(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!z_(i)){if(i=kn.current,i!==null&&((Be&4194048)===Be?di!==null:(Be&62914560)!==Be&&(Be&536870912)===0||i!==di))throw Jo=Rd,pg;t.flags|=8192}}function pc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Ro():536870912,t.lanes|=i,Ua|=i)}function ul(t,i){if(!Fe)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function lt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function HA(t,i,a){var l=i.pendingProps;switch(_d(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(i),null;case 1:return lt(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Fi(xt),Jn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Qo(i)?Yi(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,cg())),lt(i),null;case 26:return a=i.memoizedState,t===null?(Yi(i),a!==null?(lt(i),Oy(i,a)):(lt(i),i.flags&=-16777217)):a?a!==t.memoizedState?(Yi(i),lt(i),Oy(i,a)):(lt(i),i.flags&=-16777217):(t.memoizedProps!==l&&Yi(i),lt(i),i.flags&=-16777217),null;case 27:Ii(i),a=we.current;var h=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Yi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return lt(i),null}t=ce.current,Qo(i)?lg(i):(t=O_(h,l,a),i.stateNode=t,Yi(i))}return lt(i),null;case 5:if(Ii(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Yi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return lt(i),null}if(t=ce.current,Qo(i))lg(i);else{switch(h=Nc(we.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[It]=i,t[Et]=l;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=t;e:switch(Ft(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Yi(i)}}return lt(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&Yi(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(t=we.current,Qo(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=on,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[It]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||w_(t.nodeValue,a)),t||Mr(i)}else t=Nc(t).createTextNode(l),t[It]=i,i.stateNode=t}return lt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Qo(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[It]=i}else Ko(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;lt(i),h=!1}else h=cg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Qi(i),i):(Qi(i),null)}if(Qi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==h&&(l.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),pc(i,i.updateQueue),lt(i),null;case 4:return Jn(),t===null&&Df(i.stateNode.containerInfo),lt(i),null;case 10:return Fi(i.type),lt(i),null;case 19:if(oe(Dt),h=i.memoizedState,h===null)return lt(i),null;if(l=(i.flags&128)!==0,f=h.rendering,f===null)if(l)ul(h,!1);else{if(dt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(f=cc(t),f!==null){for(i.flags|=128,ul(h,!1),t=f.updateQueue,i.updateQueue=t,pc(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)ag(a,t),a=a.sibling;return z(Dt,Dt.current&1|2),i.child}t=t.sibling}h.tail!==null&&wn()>_c&&(i.flags|=128,l=!0,ul(h,!1),i.lanes=4194304)}else{if(!l)if(t=cc(f),t!==null){if(i.flags|=128,l=!0,t=t.updateQueue,i.updateQueue=t,pc(i,t),ul(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!Fe)return lt(i),null}else 2*wn()-h.renderingStartTime>_c&&a!==536870912&&(i.flags|=128,l=!0,ul(h,!1),i.lanes=4194304);h.isBackwards?(f.sibling=i.child,i.child=f):(t=h.last,t!==null?t.sibling=f:i.child=f,h.last=f)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=wn(),i.sibling=null,t=Dt.current,z(Dt,l?t&1|2:t&1),i):(lt(i),null);case 22:case 23:return Qi(i),Od(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(lt(i),i.subtreeFlags&6&&(i.flags|=8192)):lt(i),a=i.updateQueue,a!==null&&pc(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&oe(jr),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Fi(xt),lt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function FA(t,i){switch(_d(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Fi(xt),Jn(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Ii(i),null;case 13:if(Qi(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Ko()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return oe(Dt),null;case 4:return Jn(),null;case 10:return Fi(i.type),null;case 22:case 23:return Qi(i),Od(),t!==null&&oe(jr),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Fi(xt),null;case 25:return null;default:return null}}function My(t,i){switch(_d(i),i.tag){case 3:Fi(xt),Jn();break;case 26:case 27:case 5:Ii(i);break;case 4:Jn();break;case 13:Qi(i);break;case 19:oe(Dt);break;case 10:Fi(i.type);break;case 22:case 23:Qi(i),Od(),t!==null&&oe(jr);break;case 24:Fi(xt)}}function cl(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var f=a.create,E=a.inst;l=f(),E.destroy=l}a=a.next}while(a!==h)}}catch(A){tt(i,i.return,A)}}function bs(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var f=h.next;l=f;do{if((l.tag&t)===t){var E=l.inst,A=E.destroy;if(A!==void 0){E.destroy=void 0,h=i;var x=a,B=A;try{B()}catch(Y){tt(h,x,Y)}}}l=l.next}while(l!==f)}}catch(Y){tt(i,i.return,Y)}}function Vy(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{Tg(i,a)}catch(l){tt(t,t.return,l)}}}function ky(t,i,a){a.props=Lr(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){tt(t,i,l)}}function hl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){tt(t,i,h)}}function fi(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){tt(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){tt(t,i,h)}else a.current=null}function jy(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){tt(t,t.return,h)}}function of(t,i,a){try{var l=t.stateNode;hb(l,t.type,a,i),l[Et]=i}catch(h){tt(t,t.return,h)}}function Py(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ds(t.type)||t.tag===4}function lf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Py(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ds(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function uf(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Ic));else if(l!==4&&(l===27&&Ds(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(uf(t,i,a),t=t.sibling;t!==null;)uf(t,i,a),t=t.sibling}function gc(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&Ds(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(gc(t,i,a),t=t.sibling;t!==null;)gc(t,i,a),t=t.sibling}function Ly(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Ft(i,l,a),i[It]=t,i[Et]=a}catch(f){tt(t,t.return,f)}}var Xi=!1,pt=!1,cf=!1,Uy=typeof WeakSet=="function"?WeakSet:Set,Pt=null;function GA(t,i){if(t=t.containerInfo,Vf=Vc,t=$p(t),od(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var E=0,A=-1,x=-1,B=0,Y=0,W=t,q=null;t:for(;;){for(var H;W!==a||h!==0&&W.nodeType!==3||(A=E+h),W!==f||l!==0&&W.nodeType!==3||(x=E+l),W.nodeType===3&&(E+=W.nodeValue.length),(H=W.firstChild)!==null;)q=W,W=H;for(;;){if(W===t)break t;if(q===a&&++B===h&&(A=E),q===f&&++Y===l&&(x=E),(H=W.nextSibling)!==null)break;W=q,q=W.parentNode}W=H}a=A===-1||x===-1?null:{start:A,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for(kf={focusedElem:t,selectionRange:a},Vc=!1,Pt=i;Pt!==null;)if(i=Pt,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,Pt=t;else for(;Pt!==null;){switch(i=Pt,f=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=i,h=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var Se=Lr(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Se,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(ve){tt(a,a.return,ve)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Lf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Lf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=i.sibling,t!==null){t.return=i.return,Pt=t;break}Pt=i.return}}function zy(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Ss(t,a),l&4&&cl(5,a);break;case 1:if(Ss(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(E){tt(a,a.return,E)}else{var h=Lr(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(E){tt(a,a.return,E)}}l&64&&Vy(a),l&512&&hl(a,a.return);break;case 3:if(Ss(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Tg(t,i)}catch(E){tt(a,a.return,E)}}break;case 27:i===null&&l&4&&Ly(a);case 26:case 5:Ss(t,a),i===null&&l&4&&jy(a),l&512&&hl(a,a.return);break;case 12:Ss(t,a);break;case 13:Ss(t,a),l&4&&Hy(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=eb.bind(null,a),_b(t,a))));break;case 22:if(l=a.memoizedState!==null||Xi,!l){i=i!==null&&i.memoizedState!==null||pt,h=Xi;var f=pt;Xi=l,(pt=i)&&!f?ws(t,a,(a.subtreeFlags&8772)!==0):Ss(t,a),Xi=h,pt=f}break;case 30:break;default:Ss(t,a)}}function By(t){var i=t.alternate;i!==null&&(t.alternate=null,By(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&ds(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ot=null,cn=!1;function $i(t,i,a){for(a=a.child;a!==null;)qy(t,i,a),a=a.sibling}function qy(t,i,a){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(ct,a)}catch{}switch(a.tag){case 26:pt||fi(a,i),$i(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:pt||fi(a,i);var l=ot,h=cn;Ds(a.type)&&(ot=a.stateNode,cn=!1),$i(t,i,a),El(a.stateNode),ot=l,cn=h;break;case 5:pt||fi(a,i);case 6:if(l=ot,h=cn,ot=null,$i(t,i,a),ot=l,cn=h,ot!==null)if(cn)try{(ot.nodeType===9?ot.body:ot.nodeName==="HTML"?ot.ownerDocument.body:ot).removeChild(a.stateNode)}catch(f){tt(a,i,f)}else try{ot.removeChild(a.stateNode)}catch(f){tt(a,i,f)}break;case 18:ot!==null&&(cn?(t=ot,x_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Nl(t)):x_(ot,a.stateNode));break;case 4:l=ot,h=cn,ot=a.stateNode.containerInfo,cn=!0,$i(t,i,a),ot=l,cn=h;break;case 0:case 11:case 14:case 15:pt||bs(2,a,i),pt||bs(4,a,i),$i(t,i,a);break;case 1:pt||(fi(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&ky(a,i,l)),$i(t,i,a);break;case 21:$i(t,i,a);break;case 22:pt=(l=pt)||a.memoizedState!==null,$i(t,i,a),pt=l;break;default:$i(t,i,a)}}function Hy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Nl(t)}catch(a){tt(i,i.return,a)}}function QA(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new Uy),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new Uy),i;default:throw Error(r(435,t.tag))}}function hf(t,i){var a=QA(t);i.forEach(function(l){var h=tb.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function vn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],f=t,E=i,A=E;e:for(;A!==null;){switch(A.tag){case 27:if(Ds(A.type)){ot=A.stateNode,cn=!1;break e}break;case 5:ot=A.stateNode,cn=!1;break e;case 3:case 4:ot=A.stateNode.containerInfo,cn=!0;break e}A=A.return}if(ot===null)throw Error(r(160));qy(f,E,h),ot=null,cn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Fy(i,t),i=i.sibling}var Qn=null;function Fy(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:vn(i,t),En(t),l&4&&(bs(3,t,t.return),cl(3,t),bs(5,t,t.return));break;case 1:vn(i,t),En(t),l&512&&(pt||a===null||fi(a,a.return)),l&64&&Xi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Qn;if(vn(i,t),En(t),l&512&&(pt||a===null||fi(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":f=h.getElementsByTagName("title")[0],(!f||f[fr]||f[It]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(l),h.head.insertBefore(f,h.querySelector("head > title"))),Ft(f,l,a),f[It]=t,ft(f),l=f;break e;case"link":var E=L_("link","href",h).get(l+(a.href||""));if(E){for(var A=0;A<E.length;A++)if(f=E[A],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(A,1);break t}}f=h.createElement(l),Ft(f,l,a),h.head.appendChild(f);break;case"meta":if(E=L_("meta","content",h).get(l+(a.content||""))){for(A=0;A<E.length;A++)if(f=E[A],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(A,1);break t}}f=h.createElement(l),Ft(f,l,a),h.head.appendChild(f);break;default:throw Error(r(468,l))}f[It]=t,ft(f),l=f}t.stateNode=l}else U_(h,t.type,t.stateNode);else t.stateNode=P_(h,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?U_(h,t.type,t.stateNode):P_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&of(t,t.memoizedProps,a.memoizedProps)}break;case 27:vn(i,t),En(t),l&512&&(pt||a===null||fi(a,a.return)),a!==null&&l&4&&of(t,t.memoizedProps,a.memoizedProps);break;case 5:if(vn(i,t),En(t),l&512&&(pt||a===null||fi(a,a.return)),t.flags&32){h=t.stateNode;try{In(h,"")}catch(H){tt(t,t.return,H)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,of(t,h,a!==null?a.memoizedProps:h)),l&1024&&(cf=!0);break;case 6:if(vn(i,t),En(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(H){tt(t,t.return,H)}}break;case 3:if(Dc=null,h=Qn,Qn=Cc(i.containerInfo),vn(i,t),Qn=h,En(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Nl(i.containerInfo)}catch(H){tt(t,t.return,H)}cf&&(cf=!1,Gy(t));break;case 4:l=Qn,Qn=Cc(t.stateNode.containerInfo),vn(i,t),En(t),Qn=l;break;case 12:vn(i,t),En(t);break;case 13:vn(i,t),En(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(yf=wn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,hf(t,l)));break;case 22:h=t.memoizedState!==null;var x=a!==null&&a.memoizedState!==null,B=Xi,Y=pt;if(Xi=B||h,pt=Y||x,vn(i,t),pt=Y,Xi=B,En(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||x||Xi||pt||Ur(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){x=a=i;try{if(f=x.stateNode,h)E=f.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{A=x.stateNode;var W=x.memoizedProps.style,q=W!=null&&W.hasOwnProperty("display")?W.display:null;A.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(H){tt(x,x.return,H)}}}else if(i.tag===6){if(a===null){x=i;try{x.stateNode.nodeValue=h?"":x.memoizedProps}catch(H){tt(x,x.return,H)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,hf(t,a))));break;case 19:vn(i,t),En(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,hf(t,l)));break;case 30:break;case 21:break;default:vn(i,t),En(t)}}function En(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(Py(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,f=lf(t);gc(t,f,h);break;case 5:var E=a.stateNode;a.flags&32&&(In(E,""),a.flags&=-33);var A=lf(t);gc(t,A,E);break;case 3:case 4:var x=a.stateNode.containerInfo,B=lf(t);uf(t,B,x);break;default:throw Error(r(161))}}catch(Y){tt(t,t.return,Y)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Gy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Gy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Ss(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)zy(t,i.alternate,i),i=i.sibling}function Ur(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:bs(4,i,i.return),Ur(i);break;case 1:fi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&ky(i,i.return,a),Ur(i);break;case 27:El(i.stateNode);case 26:case 5:fi(i,i.return),Ur(i);break;case 22:i.memoizedState===null&&Ur(i);break;case 30:Ur(i);break;default:Ur(i)}t=t.sibling}}function ws(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,f=i,E=f.flags;switch(f.tag){case 0:case 11:case 15:ws(h,f,a),cl(4,f);break;case 1:if(ws(h,f,a),l=f,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(B){tt(l,l.return,B)}if(l=f,h=l.updateQueue,h!==null){var A=l.stateNode;try{var x=h.shared.hiddenCallbacks;if(x!==null)for(h.shared.hiddenCallbacks=null,h=0;h<x.length;h++)Eg(x[h],A)}catch(B){tt(l,l.return,B)}}a&&E&64&&Vy(f),hl(f,f.return);break;case 27:Ly(f);case 26:case 5:ws(h,f,a),a&&l===null&&E&4&&jy(f),hl(f,f.return);break;case 12:ws(h,f,a);break;case 13:ws(h,f,a),a&&E&4&&Hy(h,f);break;case 22:f.memoizedState===null&&ws(h,f,a),hl(f,f.return);break;case 30:break;default:ws(h,f,a)}i=i.sibling}}function df(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&$o(a))}function ff(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&$o(t))}function mi(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Qy(t,i,a,l),i=i.sibling}function Qy(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:mi(t,i,a,l),h&2048&&cl(9,i);break;case 1:mi(t,i,a,l);break;case 3:mi(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&$o(t)));break;case 12:if(h&2048){mi(t,i,a,l),t=i.stateNode;try{var f=i.memoizedProps,E=f.id,A=f.onPostCommit;typeof A=="function"&&A(E,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(x){tt(i,i.return,x)}}else mi(t,i,a,l);break;case 13:mi(t,i,a,l);break;case 23:break;case 22:f=i.stateNode,E=i.alternate,i.memoizedState!==null?f._visibility&2?mi(t,i,a,l):dl(t,i):f._visibility&2?mi(t,i,a,l):(f._visibility|=2,ja(t,i,a,l,(i.subtreeFlags&10256)!==0)),h&2048&&df(E,i);break;case 24:mi(t,i,a,l),h&2048&&ff(i.alternate,i);break;default:mi(t,i,a,l)}}function ja(t,i,a,l,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var f=t,E=i,A=a,x=l,B=E.flags;switch(E.tag){case 0:case 11:case 15:ja(f,E,A,x,h),cl(8,E);break;case 23:break;case 22:var Y=E.stateNode;E.memoizedState!==null?Y._visibility&2?ja(f,E,A,x,h):dl(f,E):(Y._visibility|=2,ja(f,E,A,x,h)),h&&B&2048&&df(E.alternate,E);break;case 24:ja(f,E,A,x,h),h&&B&2048&&ff(E.alternate,E);break;default:ja(f,E,A,x,h)}i=i.sibling}}function dl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:dl(a,l),h&2048&&df(l.alternate,l);break;case 24:dl(a,l),h&2048&&ff(l.alternate,l);break;default:dl(a,l)}i=i.sibling}}var fl=8192;function Pa(t){if(t.subtreeFlags&fl)for(t=t.child;t!==null;)Ky(t),t=t.sibling}function Ky(t){switch(t.tag){case 26:Pa(t),t.flags&fl&&t.memoizedState!==null&&Db(Qn,t.memoizedState,t.memoizedProps);break;case 5:Pa(t);break;case 3:case 4:var i=Qn;Qn=Cc(t.stateNode.containerInfo),Pa(t),Qn=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=fl,fl=16777216,Pa(t),fl=i):Pa(t));break;default:Pa(t)}}function Yy(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function ml(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Pt=l,$y(l,t)}Yy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Xy(t),t=t.sibling}function Xy(t){switch(t.tag){case 0:case 11:case 15:ml(t),t.flags&2048&&bs(9,t,t.return);break;case 3:ml(t);break;case 12:ml(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,yc(t)):ml(t);break;default:ml(t)}}function yc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Pt=l,$y(l,t)}Yy(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:bs(8,i,i.return),yc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,yc(i));break;default:yc(i)}t=t.sibling}}function $y(t,i){for(;Pt!==null;){var a=Pt;switch(a.tag){case 0:case 11:case 15:bs(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:$o(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Pt=l;else e:for(a=t;Pt!==null;){l=Pt;var h=l.sibling,f=l.return;if(By(l),l===a){Pt=null;break e}if(h!==null){h.return=f,Pt=h;break e}Pt=f}}}var KA={getCacheForType:function(t){var i=Xt(xt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},YA=typeof WeakMap=="function"?WeakMap:Map,Xe=0,it=null,Me=null,Be=0,$e=0,Tn=null,Rs=!1,La=!1,mf=!1,Wi=0,dt=0,Is=0,zr=0,pf=0,jn=0,Ua=0,pl=null,hn=null,gf=!1,yf=0,_c=1/0,vc=null,Ns=null,Ht=0,Cs=null,za=null,Ba=0,_f=0,vf=null,Wy=null,gl=0,Ef=null;function An(){if((Xe&2)!==0&&Be!==0)return Be&-Be;if(G.T!==null){var t=Na;return t!==0?t:If()}return cs()}function Zy(){jn===0&&(jn=(Be&536870912)===0||Fe?wo():536870912);var t=kn.current;return t!==null&&(t.flags|=32),jn}function bn(t,i,a){(t===it&&($e===2||$e===9)||t.cancelPendingCommit!==null)&&(qa(t,0),xs(t,Be,jn,!1)),Ci(t,a),((Xe&2)===0||t!==it)&&(t===it&&((Xe&2)===0&&(zr|=a),dt===4&&xs(t,Be,jn,!1)),pi(t))}function Jy(t,i,a){if((Xe&6)!==0)throw Error(r(327));var l=!a&&(i&124)===0&&(i&t.expiredLanes)===0||dr(t,i),h=l?WA(t,i):bf(t,i,!0),f=l;do{if(h===0){La&&!l&&xs(t,i,0,!1);break}else{if(a=t.current.alternate,f&&!XA(a)){h=bf(t,i,!1),f=!1;continue}if(h===2){if(f=i,t.errorRecoveryDisabledLanes&f)var E=0;else E=t.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){i=E;e:{var A=t;h=pl;var x=A.current.memoizedState.isDehydrated;if(x&&(qa(A,E).flags|=256),E=bf(A,E,!1),E!==2){if(mf&&!x){A.errorRecoveryDisabledLanes|=f,zr|=f,h=4;break e}f=hn,hn=h,f!==null&&(hn===null?hn=f:hn.push.apply(hn,f))}h=E}if(f=!1,h!==2)continue}}if(h===1){qa(t,0),xs(t,i,0,!0);break}e:{switch(l=t,f=h,f){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:xs(l,i,jn,!Rs);break e;case 2:hn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(h=yf+300-wn(),10<h)){if(xs(l,i,jn,!Rs),ra(l,0,!0)!==0)break e;l.timeoutHandle=N_(e_.bind(null,l,a,hn,vc,gf,i,jn,zr,Ua,Rs,f,2,-0,0),h);break e}e_(l,a,hn,vc,gf,i,jn,zr,Ua,Rs,f,0,-0,0)}}break}while(!0);pi(t)}function e_(t,i,a,l,h,f,E,A,x,B,Y,W,q,H){if(t.timeoutHandle=-1,W=i.subtreeFlags,(W&8192||(W&16785408)===16785408)&&(bl={stylesheets:null,count:0,unsuspend:xb},Ky(i),W=Ob(),W!==null)){t.cancelPendingCommit=W(o_.bind(null,t,i,f,a,l,h,E,A,x,Y,1,q,H)),xs(t,f,E,!B);return}o_(t,i,f,a,l,h,E,A,x)}function XA(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],f=h.getSnapshot;h=h.value;try{if(!yn(f(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function xs(t,i,a,l){i&=~pf,i&=~zr,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var f=31-Yt(h),E=1<<f;l[f]=-1,h&=~E}a!==0&&ei(t,a,i)}function Ec(){return(Xe&6)===0?(yl(0),!1):!0}function Tf(){if(Me!==null){if($e===0)var t=Me.return;else t=Me,Hi=Vr=null,Pd(t),Va=null,ol=0,t=Me;for(;t!==null;)My(t.alternate,t),t=t.return;Me=null}}function qa(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,fb(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Tf(),it=t,Me=a=zi(t.current,null),Be=i,$e=0,Tn=null,Rs=!1,La=dr(t,i),mf=!1,Ua=jn=pf=zr=Is=dt=0,hn=pl=null,gf=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-Yt(l),f=1<<h;i|=t[h],l&=~f}return Wi=i,qu(),a}function t_(t,i){Ce=null,G.H=oc,i===Zo||i===Wu?(i=_g(),$e=3):i===pg?(i=_g(),$e=4):$e=i===vy?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Tn=i,Me===null&&(dt=1,dc(t,Dn(i,t.current)))}function n_(){var t=G.H;return G.H=oc,t===null?oc:t}function i_(){var t=G.A;return G.A=KA,t}function Af(){dt=4,Rs||(Be&4194048)!==Be&&kn.current!==null||(La=!0),(Is&134217727)===0&&(zr&134217727)===0||it===null||xs(it,Be,jn,!1)}function bf(t,i,a){var l=Xe;Xe|=2;var h=n_(),f=i_();(it!==t||Be!==i)&&(vc=null,qa(t,i)),i=!1;var E=dt;e:do try{if($e!==0&&Me!==null){var A=Me,x=Tn;switch($e){case 8:Tf(),E=6;break e;case 3:case 2:case 9:case 6:kn.current===null&&(i=!0);var B=$e;if($e=0,Tn=null,Ha(t,A,x,B),a&&La){E=0;break e}break;default:B=$e,$e=0,Tn=null,Ha(t,A,x,B)}}$A(),E=dt;break}catch(Y){t_(t,Y)}while(!0);return i&&t.shellSuspendCounter++,Hi=Vr=null,Xe=l,G.H=h,G.A=f,Me===null&&(it=null,Be=0,qu()),E}function $A(){for(;Me!==null;)s_(Me)}function WA(t,i){var a=Xe;Xe|=2;var l=n_(),h=i_();it!==t||Be!==i?(vc=null,_c=wn()+500,qa(t,i)):La=dr(t,i);e:do try{if($e!==0&&Me!==null){i=Me;var f=Tn;t:switch($e){case 1:$e=0,Tn=null,Ha(t,i,f,1);break;case 2:case 9:if(gg(f)){$e=0,Tn=null,r_(i);break}i=function(){$e!==2&&$e!==9||it!==t||($e=7),pi(t)},f.then(i,i);break e;case 3:$e=7;break e;case 4:$e=5;break e;case 7:gg(f)?($e=0,Tn=null,r_(i)):($e=0,Tn=null,Ha(t,i,f,7));break;case 5:var E=null;switch(Me.tag){case 26:E=Me.memoizedState;case 5:case 27:var A=Me;if(!E||z_(E)){$e=0,Tn=null;var x=A.sibling;if(x!==null)Me=x;else{var B=A.return;B!==null?(Me=B,Tc(B)):Me=null}break t}}$e=0,Tn=null,Ha(t,i,f,5);break;case 6:$e=0,Tn=null,Ha(t,i,f,6);break;case 8:Tf(),dt=6;break e;default:throw Error(r(462))}}ZA();break}catch(Y){t_(t,Y)}while(!0);return Hi=Vr=null,G.H=l,G.A=h,Xe=a,Me!==null?0:(it=null,Be=0,qu(),dt)}function ZA(){for(;Me!==null&&!To();)s_(Me)}function s_(t){var i=Dy(t.alternate,t,Wi);t.memoizedProps=t.pendingProps,i===null?Tc(t):Me=i}function r_(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=wy(a,i,i.pendingProps,i.type,void 0,Be);break;case 11:i=wy(a,i,i.pendingProps,i.type.render,i.ref,Be);break;case 5:Pd(i);default:My(a,i),i=Me=ag(i,Wi),i=Dy(a,i,Wi)}t.memoizedProps=t.pendingProps,i===null?Tc(t):Me=i}function Ha(t,i,a,l){Hi=Vr=null,Pd(i),Va=null,ol=0;var h=i.return;try{if(BA(t,h,i,a,Be)){dt=1,dc(t,Dn(a,t.current)),Me=null;return}}catch(f){if(h!==null)throw Me=h,f;dt=1,dc(t,Dn(a,t.current)),Me=null;return}i.flags&32768?(Fe||l===1?t=!0:La||(Be&536870912)!==0?t=!1:(Rs=t=!0,(l===2||l===9||l===3||l===6)&&(l=kn.current,l!==null&&l.tag===13&&(l.flags|=16384))),a_(i,t)):Tc(i)}function Tc(t){var i=t;do{if((i.flags&32768)!==0){a_(i,Rs);return}t=i.return;var a=HA(i.alternate,i,Wi);if(a!==null){Me=a;return}if(i=i.sibling,i!==null){Me=i;return}Me=i=t}while(i!==null);dt===0&&(dt=5)}function a_(t,i){do{var a=FA(t.alternate,t);if(a!==null){a.flags&=32767,Me=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Me=t;return}Me=t=a}while(t!==null);dt=6,Me=null}function o_(t,i,a,l,h,f,E,A,x){t.cancelPendingCommit=null;do Ac();while(Ht!==0);if((Xe&6)!==0)throw Error(r(327));if(i!==null){if(i===t.current)throw Error(r(177));if(f=i.lanes|i.childLanes,f|=dd,Io(t,a,f,E,A,x),t===it&&(Me=it=null,Be=0),za=i,Cs=t,Ba=a,_f=f,vf=h,Wy=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,nb(lr,function(){return d_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=G.T,G.T=null,h=ae.p,ae.p=2,E=Xe,Xe|=4;try{GA(t,i,a)}finally{Xe=E,ae.p=h,G.T=l}}Ht=1,l_(),u_(),c_()}}function l_(){if(Ht===1){Ht=0;var t=Cs,i=za,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=G.T,G.T=null;var l=ae.p;ae.p=2;var h=Xe;Xe|=4;try{Fy(i,t);var f=kf,E=$p(t.containerInfo),A=f.focusedElem,x=f.selectionRange;if(E!==A&&A&&A.ownerDocument&&Xp(A.ownerDocument.documentElement,A)){if(x!==null&&od(A)){var B=x.start,Y=x.end;if(Y===void 0&&(Y=B),"selectionStart"in A)A.selectionStart=B,A.selectionEnd=Math.min(Y,A.value.length);else{var W=A.ownerDocument||document,q=W&&W.defaultView||window;if(q.getSelection){var H=q.getSelection(),Se=A.textContent.length,ve=Math.min(x.start,Se),et=x.end===void 0?ve:Math.min(x.end,Se);!H.extend&&ve>et&&(E=et,et=ve,ve=E);var P=Yp(A,ve),k=Yp(A,et);if(P&&k&&(H.rangeCount!==1||H.anchorNode!==P.node||H.anchorOffset!==P.offset||H.focusNode!==k.node||H.focusOffset!==k.offset)){var U=W.createRange();U.setStart(P.node,P.offset),H.removeAllRanges(),ve>et?(H.addRange(U),H.extend(k.node,k.offset)):(U.setEnd(k.node,k.offset),H.addRange(U))}}}}for(W=[],H=A;H=H.parentNode;)H.nodeType===1&&W.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<W.length;A++){var $=W[A];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}Vc=!!Vf,kf=Vf=null}finally{Xe=h,ae.p=l,G.T=a}}t.current=i,Ht=2}}function u_(){if(Ht===2){Ht=0;var t=Cs,i=za,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=G.T,G.T=null;var l=ae.p;ae.p=2;var h=Xe;Xe|=4;try{zy(t,i.alternate,i)}finally{Xe=h,ae.p=l,G.T=a}}Ht=3}}function c_(){if(Ht===4||Ht===3){Ht=0,yu();var t=Cs,i=za,a=Ba,l=Wy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ht=5:(Ht=0,za=Cs=null,h_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Ns=null),aa(a),i=i.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(ct,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=G.T,h=ae.p,ae.p=2,G.T=null;try{for(var f=t.onRecoverableError,E=0;E<l.length;E++){var A=l[E];f(A.value,{componentStack:A.stack})}}finally{G.T=i,ae.p=h}}(Ba&3)!==0&&Ac(),pi(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===Ef?gl++:(gl=0,Ef=t):gl=0,yl(0)}}function h_(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,$o(i)))}function Ac(t){return l_(),u_(),c_(),d_()}function d_(){if(Ht!==5)return!1;var t=Cs,i=_f;_f=0;var a=aa(Ba),l=G.T,h=ae.p;try{ae.p=32>a?32:a,G.T=null,a=vf,vf=null;var f=Cs,E=Ba;if(Ht=0,za=Cs=null,Ba=0,(Xe&6)!==0)throw Error(r(331));var A=Xe;if(Xe|=4,Xy(f.current),Qy(f,f.current,E,a),Xe=A,yl(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(ct,f)}catch{}return!0}finally{ae.p=h,G.T=l,h_(t,i)}}function f_(t,i,a){i=Dn(a,i),i=Wd(t.stateNode,i,2),t=vs(t,i,2),t!==null&&(Ci(t,2),pi(t))}function tt(t,i,a){if(t.tag===3)f_(t,t,a);else for(;i!==null;){if(i.tag===3){f_(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ns===null||!Ns.has(l))){t=Dn(a,t),a=yy(2),l=vs(i,a,2),l!==null&&(_y(a,l,i,t),Ci(l,2),pi(l));break}}i=i.return}}function Sf(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new YA;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(mf=!0,h.add(a),t=JA.bind(null,t,i,a),i.then(t,t))}function JA(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,it===t&&(Be&a)===a&&(dt===4||dt===3&&(Be&62914560)===Be&&300>wn()-yf?(Xe&2)===0&&qa(t,0):pf|=a,Ua===Be&&(Ua=0)),pi(t)}function m_(t,i){i===0&&(i=Ro()),t=Sa(t,i),t!==null&&(Ci(t,i),pi(t))}function eb(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),m_(t,a)}function tb(t,i){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),m_(t,a)}function nb(t,i){return ar(t,i)}var bc=null,Fa=null,wf=!1,Sc=!1,Rf=!1,Br=0;function pi(t){t!==Fa&&t.next===null&&(Fa===null?bc=Fa=t:Fa=Fa.next=t),Sc=!0,wf||(wf=!0,sb())}function yl(t,i){if(!Rf&&Sc){Rf=!0;do for(var a=!1,l=bc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var f=0;else{var E=l.suspendedLanes,A=l.pingedLanes;f=(1<<31-Yt(42|t)+1)-1,f&=h&~(E&~A),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,__(l,f))}else f=Be,f=ra(l,l===it?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||dr(l,f)||(a=!0,__(l,f));l=l.next}while(a);Rf=!1}}function ib(){p_()}function p_(){Sc=wf=!1;var t=0;Br!==0&&(db()&&(t=Br),Br=0);for(var i=wn(),a=null,l=bc;l!==null;){var h=l.next,f=g_(l,i);f===0?(l.next=null,a===null?bc=h:a.next=h,h===null&&(Fa=a)):(a=l,(t!==0||(f&3)!==0)&&(Sc=!0)),l=h}yl(t)}function g_(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var E=31-Yt(f),A=1<<E,x=h[E];x===-1?((A&a)===0||(A&l)!==0)&&(h[E]=So(A,i)):x<=i&&(t.expiredLanes|=A),f&=~A}if(i=it,a=Be,a=ra(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&($e===2||$e===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&or(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||dr(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&or(l),aa(a)){case 2:case 8:a=ia;break;case 32:a=lr;break;case 268435456:a=sa;break;default:a=lr}return l=y_.bind(null,t),a=ar(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&or(l),t.callbackPriority=2,t.callbackNode=null,2}function y_(t,i){if(Ht!==0&&Ht!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Ac()&&t.callbackNode!==a)return null;var l=Be;return l=ra(t,t===it?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Jy(t,l,i),g_(t,wn()),t.callbackNode!=null&&t.callbackNode===a?y_.bind(null,t):null)}function __(t,i){if(Ac())return null;Jy(t,i,!0)}function sb(){mb(function(){(Xe&6)!==0?ar(Ao,ib):p_()})}function If(){return Br===0&&(Br=wo()),Br}function v_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:da(""+t)}function E_(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function rb(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var f=v_((h[Et]||null).action),E=l.submitter;E&&(i=(i=E[Et]||null)?v_(i.formAction):E.getAttribute("formAction"),i!==null&&(f=i,E=null));var A=new fa("action","action",null,l,h);t.push({event:A,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Br!==0){var x=E?E_(h,E):new FormData(h);Qd(a,{pending:!0,data:x,method:h.method,action:f},null,x)}}else typeof f=="function"&&(A.preventDefault(),x=E?E_(h,E):new FormData(h),Qd(a,{pending:!0,data:x,method:h.method,action:f},f,x))},currentTarget:h}]})}}for(var Nf=0;Nf<hd.length;Nf++){var Cf=hd[Nf],ab=Cf.toLowerCase(),ob=Cf[0].toUpperCase()+Cf.slice(1);Gn(ab,"on"+ob)}Gn(Jp,"onAnimationEnd"),Gn(eg,"onAnimationIteration"),Gn(tg,"onAnimationStart"),Gn("dblclick","onDoubleClick"),Gn("focusin","onFocus"),Gn("focusout","onBlur"),Gn(SA,"onTransitionRun"),Gn(wA,"onTransitionStart"),Gn(RA,"onTransitionCancel"),Gn(ng,"onTransitionEnd"),Di("onMouseEnter",["mouseout","mouseover"]),Di("onMouseLeave",["mouseout","mouseover"]),Di("onPointerEnter",["pointerout","pointerover"]),Di("onPointerLeave",["pointerout","pointerover"]),Hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Hn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_l));function T_(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var f=void 0;if(i)for(var E=l.length-1;0<=E;E--){var A=l[E],x=A.instance,B=A.currentTarget;if(A=A.listener,x!==f&&h.isPropagationStopped())break e;f=A,h.currentTarget=B;try{f(h)}catch(Y){hc(Y)}h.currentTarget=null,f=x}else for(E=0;E<l.length;E++){if(A=l[E],x=A.instance,B=A.currentTarget,A=A.listener,x!==f&&h.isPropagationStopped())break e;f=A,h.currentTarget=B;try{f(h)}catch(Y){hc(Y)}h.currentTarget=null,f=x}}}}function Ve(t,i){var a=i[Co];a===void 0&&(a=i[Co]=new Set);var l=t+"__bubble";a.has(l)||(A_(i,t,2,!1),a.add(l))}function xf(t,i,a){var l=0;i&&(l|=4),A_(a,t,l,i)}var wc="_reactListening"+Math.random().toString(36).slice(2);function Df(t){if(!t[wc]){t[wc]=!0,xo.forEach(function(a){a!=="selectionchange"&&(lb.has(a)||xf(a,!1,t),xf(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[wc]||(i[wc]=!0,xf("selectionchange",!1,i))}}function A_(t,i,a,l){switch(Q_(i)){case 2:var h=kb;break;case 8:h=jb;break;default:h=Gf}a=h.bind(null,i,a,t),h=void 0,!Cn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function Of(t,i,a,l,h){var f=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var A=l.stateNode.containerInfo;if(A===h)break;if(E===4)for(E=l.return;E!==null;){var x=E.tag;if((x===3||x===4)&&E.stateNode.containerInfo===h)return;E=E.return}for(;A!==null;){if(E=xi(A),E===null)return;if(x=E.tag,x===5||x===6||x===26||x===27){l=f=E;continue e}A=A.parentNode}}l=l.return}Iu(function(){var B=f,Y=Nn(a),W=[];e:{var q=ig.get(t);if(q!==void 0){var H=fa,Se=t;switch(t){case"keypress":if(ai(a)===0)break e;case"keydown":case"keyup":H=va;break;case"focusin":Se="focus",H=ga;break;case"focusout":Se="blur",H=ga;break;case"beforeblur":case"afterblur":H=ga;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=xn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=id;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=ku;break;case Jp:case eg:case tg:H=ya;break;case ng:H=Pu;break;case"scroll":case"scrollend":H=Nu;break;case"wheel":H=Ea;break;case"copy":case"cut":case"paste":H=_a;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=qo;break;case"toggle":case"beforetoggle":H=Uu}var ve=(i&4)!==0,et=!ve&&(t==="scroll"||t==="scrollend"),P=ve?q!==null?q+"Capture":null:q;ve=[];for(var k=B,U;k!==null;){var $=k;if(U=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||U===null||P===null||($=Er(k,P),$!=null&&ve.push(vl(k,$,U))),et)break;k=k.return}0<ve.length&&(q=new H(q,Se,null,a,Y),W.push({event:q,listeners:ve}))}}if((i&7)===0){e:{if(q=t==="mouseover"||t==="pointerover",H=t==="mouseout"||t==="pointerout",q&&a!==Vi&&(Se=a.relatedTarget||a.fromElement)&&(xi(Se)||Se[Rn]))break e;if((H||q)&&(q=Y.window===Y?Y:(q=Y.ownerDocument)?q.defaultView||q.parentWindow:window,H?(Se=a.relatedTarget||a.toElement,H=B,Se=Se?xi(Se):null,Se!==null&&(et=u(Se),ve=Se.tag,Se!==et||ve!==5&&ve!==27&&ve!==6)&&(Se=null)):(H=null,Se=B),H!==Se)){if(ve=xn,$="onMouseLeave",P="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(ve=qo,$="onPointerLeave",P="onPointerEnter",k="pointer"),et=H==null?q:ni(H),U=Se==null?q:ni(Se),q=new ve($,k+"leave",H,a,Y),q.target=et,q.relatedTarget=U,$=null,xi(Y)===B&&(ve=new ve(P,k+"enter",Se,a,Y),ve.target=U,ve.relatedTarget=et,$=ve),et=$,H&&Se)t:{for(ve=H,P=Se,k=0,U=ve;U;U=Ga(U))k++;for(U=0,$=P;$;$=Ga($))U++;for(;0<k-U;)ve=Ga(ve),k--;for(;0<U-k;)P=Ga(P),U--;for(;k--;){if(ve===P||P!==null&&ve===P.alternate)break t;ve=Ga(ve),P=Ga(P)}ve=null}else ve=null;H!==null&&b_(W,q,H,ve,!1),Se!==null&&et!==null&&b_(W,et,Se,ve,!0)}}e:{if(q=B?ni(B):window,H=q.nodeName&&q.nodeName.toLowerCase(),H==="select"||H==="input"&&q.type==="file")var me=qp;else if(Ct(q))if(Hp)me=TA;else{me=vA;var Oe=_A}else H=q.nodeName,!H||H.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?B&&ko(B.elementType)&&(me=qp):me=EA;if(me&&(me=me(t,B))){Ui(W,me,a,Y);break e}Oe&&Oe(t,q,B),t==="focusout"&&B&&q.type==="number"&&B.memoizedProps.value!=null&&ms(q,"number",q.value)}switch(Oe=B?ni(B):window,t){case"focusin":(Ct(Oe)||Oe.contentEditable==="true")&&(Ta=Oe,ld=B,Go=null);break;case"focusout":Go=ld=Ta=null;break;case"mousedown":ud=!0;break;case"contextmenu":case"mouseup":case"dragend":ud=!1,Wp(W,a,Y);break;case"selectionchange":if(bA)break;case"keydown":case"keyup":Wp(W,a,Y)}var ye;if(ui)e:{switch(t){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else Ue?F(t,a)&&(Ee="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ee="onCompositionStart");Ee&&(v&&a.locale!=="ko"&&(Ue||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&Ue&&(ye=Po()):(ri=Y,ps="value"in ri?ri.value:ri.textContent,Ue=!0)),Oe=Rc(B,Ee),0<Oe.length&&(Ee=new zo(Ee,t,null,a,Y),W.push({event:Ee,listeners:Oe}),ye?Ee.data=ye:(ye=re(a),ye!==null&&(Ee.data=ye)))),(ye=g?Nt(t,a):ze(t,a))&&(Ee=Rc(B,"onBeforeInput"),0<Ee.length&&(Oe=new zo("onBeforeInput","beforeinput",null,a,Y),W.push({event:Oe,listeners:Ee}),Oe.data=ye)),rb(W,t,B,a,Y)}T_(W,i)})}function vl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Rc(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=Er(t,a),h!=null&&l.unshift(vl(t,h,f)),h=Er(t,i),h!=null&&l.push(vl(t,h,f))),t.tag===3)return l;t=t.return}return[]}function Ga(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function b_(t,i,a,l,h){for(var f=i._reactName,E=[];a!==null&&a!==l;){var A=a,x=A.alternate,B=A.stateNode;if(A=A.tag,x!==null&&x===l)break;A!==5&&A!==26&&A!==27||B===null||(x=B,h?(B=Er(a,f),B!=null&&E.unshift(vl(a,B,x))):h||(B=Er(a,f),B!=null&&E.push(vl(a,B,x)))),a=a.return}E.length!==0&&t.push({event:i,listeners:E})}var ub=/\r\n?/g,cb=/\u0000|\uFFFD/g;function S_(t){return(typeof t=="string"?t:""+t).replace(ub,`
`).replace(cb,"")}function w_(t,i){return i=S_(i),S_(t)===i}function Ic(){}function Je(t,i,a,l,h,f){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||In(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&In(t,""+l);break;case"className":ii(t,"class",l);break;case"tabIndex":ii(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ii(t,a,l);break;case"style":Vo(t,l,f);break;case"data":if(i!=="object"){ii(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=da(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&Je(t,i,"name",h.name,h,null),Je(t,i,"formEncType",h.formEncType,h,null),Je(t,i,"formMethod",h.formMethod,h,null),Je(t,i,"formTarget",h.formTarget,h,null)):(Je(t,i,"encType",h.encType,h,null),Je(t,i,"method",h.method,h,null),Je(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=da(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Ic);break;case"onScroll":l!=null&&Ve("scroll",t);break;case"onScrollEnd":l!=null&&Ve("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=da(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Ve("beforetoggle",t),Ve("toggle",t),fs(t,"popover",l);break;case"xlinkActuate":zt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":zt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":zt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":zt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":zt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":zt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":zt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":zt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":zt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":fs(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=td.get(a)||a,fs(t,a,l))}}function Mf(t,i,a,l,h,f){switch(a){case"style":Vo(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?In(t,l):(typeof l=="number"||typeof l=="bigint")&&In(t,""+l);break;case"onScroll":l!=null&&Ve("scroll",t);break;case"onScrollEnd":l!=null&&Ve("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Ic);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!oa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),f=t[Et]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(i,f,h),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):fs(t,a,l)}}}function Ft(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",t),Ve("load",t);var l=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var E=a[f];if(E!=null)switch(f){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Je(t,i,f,E,a,null)}}h&&Je(t,i,"srcSet",a.srcSet,a,null),l&&Je(t,i,"src",a.src,a,null);return;case"input":Ve("invalid",t);var A=f=E=h=null,x=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var Y=a[l];if(Y!=null)switch(l){case"name":h=Y;break;case"type":E=Y;break;case"checked":x=Y;break;case"defaultChecked":B=Y;break;case"value":f=Y;break;case"defaultValue":A=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,i));break;default:Je(t,i,l,Y,a,null)}}yr(t,f,A,x,B,E,h,!1),ha(t);return;case"select":Ve("invalid",t),l=E=f=null;for(h in a)if(a.hasOwnProperty(h)&&(A=a[h],A!=null))switch(h){case"value":f=A;break;case"defaultValue":E=A;break;case"multiple":l=A;default:Je(t,i,h,A,a,null)}i=f,a=E,t.multiple=!!l,i!=null?Mi(t,!!l,i,!1):a!=null&&Mi(t,!!l,a,!0);return;case"textarea":Ve("invalid",t),f=h=l=null;for(E in a)if(a.hasOwnProperty(E)&&(A=a[E],A!=null))switch(E){case"value":l=A;break;case"defaultValue":h=A;break;case"children":f=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:Je(t,i,E,A,a,null)}_r(t,l,h,f),ha(t);return;case"option":for(x in a)if(a.hasOwnProperty(x)&&(l=a[x],l!=null))switch(x){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Je(t,i,x,l,a,null)}return;case"dialog":Ve("beforetoggle",t),Ve("toggle",t),Ve("cancel",t),Ve("close",t);break;case"iframe":case"object":Ve("load",t);break;case"video":case"audio":for(l=0;l<_l.length;l++)Ve(_l[l],t);break;case"image":Ve("error",t),Ve("load",t);break;case"details":Ve("toggle",t);break;case"embed":case"source":case"link":Ve("error",t),Ve("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Je(t,i,B,l,a,null)}return;default:if(ko(i)){for(Y in a)a.hasOwnProperty(Y)&&(l=a[Y],l!==void 0&&Mf(t,i,Y,l,a,void 0));return}}for(A in a)a.hasOwnProperty(A)&&(l=a[A],l!=null&&Je(t,i,A,l,a,null))}function hb(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,E=null,A=null,x=null,B=null,Y=null;for(H in a){var W=a[H];if(a.hasOwnProperty(H)&&W!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":x=W;default:l.hasOwnProperty(H)||Je(t,i,H,null,l,W)}}for(var q in l){var H=l[q];if(W=a[q],l.hasOwnProperty(q)&&(H!=null||W!=null))switch(q){case"type":f=H;break;case"name":h=H;break;case"checked":B=H;break;case"defaultChecked":Y=H;break;case"value":E=H;break;case"defaultValue":A=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,i));break;default:H!==W&&Je(t,i,q,H,l,W)}}gn(t,E,A,x,B,Y,f,h);return;case"select":H=E=A=q=null;for(f in a)if(x=a[f],a.hasOwnProperty(f)&&x!=null)switch(f){case"value":break;case"multiple":H=x;default:l.hasOwnProperty(f)||Je(t,i,f,null,l,x)}for(h in l)if(f=l[h],x=a[h],l.hasOwnProperty(h)&&(f!=null||x!=null))switch(h){case"value":q=f;break;case"defaultValue":A=f;break;case"multiple":E=f;default:f!==x&&Je(t,i,h,f,l,x)}i=A,a=E,l=H,q!=null?Mi(t,!!a,q,!1):!!l!=!!a&&(i!=null?Mi(t,!!a,i,!0):Mi(t,!!a,a?[]:"",!1));return;case"textarea":H=q=null;for(A in a)if(h=a[A],a.hasOwnProperty(A)&&h!=null&&!l.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Je(t,i,A,null,l,h)}for(E in l)if(h=l[E],f=a[E],l.hasOwnProperty(E)&&(h!=null||f!=null))switch(E){case"value":q=h;break;case"defaultValue":H=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==f&&Je(t,i,E,h,l,f)}We(t,q,H);return;case"option":for(var Se in a)if(q=a[Se],a.hasOwnProperty(Se)&&q!=null&&!l.hasOwnProperty(Se))switch(Se){case"selected":t.selected=!1;break;default:Je(t,i,Se,null,l,q)}for(x in l)if(q=l[x],H=a[x],l.hasOwnProperty(x)&&q!==H&&(q!=null||H!=null))switch(x){case"selected":t.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:Je(t,i,x,q,l,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in a)q=a[ve],a.hasOwnProperty(ve)&&q!=null&&!l.hasOwnProperty(ve)&&Je(t,i,ve,null,l,q);for(B in l)if(q=l[B],H=a[B],l.hasOwnProperty(B)&&q!==H&&(q!=null||H!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,i));break;default:Je(t,i,B,q,l,H)}return;default:if(ko(i)){for(var et in a)q=a[et],a.hasOwnProperty(et)&&q!==void 0&&!l.hasOwnProperty(et)&&Mf(t,i,et,void 0,l,q);for(Y in l)q=l[Y],H=a[Y],!l.hasOwnProperty(Y)||q===H||q===void 0&&H===void 0||Mf(t,i,Y,q,l,H);return}}for(var P in a)q=a[P],a.hasOwnProperty(P)&&q!=null&&!l.hasOwnProperty(P)&&Je(t,i,P,null,l,q);for(W in l)q=l[W],H=a[W],!l.hasOwnProperty(W)||q===H||q==null&&H==null||Je(t,i,W,q,l,H)}var Vf=null,kf=null;function Nc(t){return t.nodeType===9?t:t.ownerDocument}function R_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function I_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function jf(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Pf=null;function db(){var t=window.event;return t&&t.type==="popstate"?t===Pf?!1:(Pf=t,!0):(Pf=null,!1)}var N_=typeof setTimeout=="function"?setTimeout:void 0,fb=typeof clearTimeout=="function"?clearTimeout:void 0,C_=typeof Promise=="function"?Promise:void 0,mb=typeof queueMicrotask=="function"?queueMicrotask:typeof C_<"u"?function(t){return C_.resolve(null).then(t).catch(pb)}:N_;function pb(t){setTimeout(function(){throw t})}function Ds(t){return t==="head"}function x_(t,i){var a=i,l=0,h=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<l&&8>l){a=l;var E=t.ownerDocument;if(a&1&&El(E.documentElement),a&2&&El(E.body),a&4)for(a=E.head,El(a),E=a.firstChild;E;){var A=E.nextSibling,x=E.nodeName;E[fr]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=A}}if(h===0){t.removeChild(f),Nl(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=f}while(a);Nl(i)}function Lf(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Lf(a),ds(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function gb(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[fr])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=Kn(t.nextSibling),t===null)break}return null}function yb(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Kn(t.nextSibling),t===null))return null;return t}function Uf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function _b(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Kn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var zf=null;function D_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function O_(t,i,a){switch(i=Nc(a),t){case"html":if(t=i.documentElement,!t)throw Error(r(452));return t;case"head":if(t=i.head,!t)throw Error(r(453));return t;case"body":if(t=i.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function El(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);ds(t)}var Pn=new Map,M_=new Set;function Cc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Zi=ae.d;ae.d={f:vb,r:Eb,D:Tb,C:Ab,L:bb,m:Sb,X:Rb,S:wb,M:Ib};function vb(){var t=Zi.f(),i=Ec();return t||i}function Eb(t){var i=ti(t);i!==null&&i.tag===5&&i.type==="form"?Jg(i):Zi.r(t)}var Qa=typeof document>"u"?null:document;function V_(t,i,a){var l=Qa;if(l&&typeof i=="string"&&i){var h=Tt(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),M_.has(h)||(M_.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),Ft(i,"link",t),ft(i),l.head.appendChild(i)))}}function Tb(t){Zi.D(t),V_("dns-prefetch",t,null)}function Ab(t,i){Zi.C(t,i),V_("preconnect",t,i)}function bb(t,i,a){Zi.L(t,i,a);var l=Qa;if(l&&t&&i){var h='link[rel="preload"][as="'+Tt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Tt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Tt(a.imageSizes)+'"]')):h+='[href="'+Tt(t)+'"]';var f=h;switch(i){case"style":f=Ka(t);break;case"script":f=Ya(t)}Pn.has(f)||(t=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Pn.set(f,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(Tl(f))||i==="script"&&l.querySelector(Al(f))||(i=l.createElement("link"),Ft(i,"link",t),ft(i),l.head.appendChild(i)))}}function Sb(t,i){Zi.m(t,i);var a=Qa;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+Tt(l)+'"][href="'+Tt(t)+'"]',f=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Ya(t)}if(!Pn.has(f)&&(t=T({rel:"modulepreload",href:t},i),Pn.set(f,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Al(f)))return}l=a.createElement("link"),Ft(l,"link",t),ft(l),a.head.appendChild(l)}}}function wb(t,i,a){Zi.S(t,i,a);var l=Qa;if(l&&t){var h=sn(l).hoistableStyles,f=Ka(t);i=i||"default";var E=h.get(f);if(!E){var A={loading:0,preload:null};if(E=l.querySelector(Tl(f)))A.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Pn.get(f))&&Bf(t,a);var x=E=l.createElement("link");ft(x),Ft(x,"link",t),x._p=new Promise(function(B,Y){x.onload=B,x.onerror=Y}),x.addEventListener("load",function(){A.loading|=1}),x.addEventListener("error",function(){A.loading|=2}),A.loading|=4,xc(E,i,l)}E={type:"stylesheet",instance:E,count:1,state:A},h.set(f,E)}}}function Rb(t,i){Zi.X(t,i);var a=Qa;if(a&&t){var l=sn(a).hoistableScripts,h=Ya(t),f=l.get(h);f||(f=a.querySelector(Al(h)),f||(t=T({src:t,async:!0},i),(i=Pn.get(h))&&qf(t,i),f=a.createElement("script"),ft(f),Ft(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function Ib(t,i){Zi.M(t,i);var a=Qa;if(a&&t){var l=sn(a).hoistableScripts,h=Ya(t),f=l.get(h);f||(f=a.querySelector(Al(h)),f||(t=T({src:t,async:!0,type:"module"},i),(i=Pn.get(h))&&qf(t,i),f=a.createElement("script"),ft(f),Ft(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function k_(t,i,a,l){var h=(h=we.current)?Cc(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Ka(a.href),a=sn(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Ka(a.href);var f=sn(h).hoistableStyles,E=f.get(t);if(E||(h=h.ownerDocument||h,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,E),(f=h.querySelector(Tl(t)))&&!f._p&&(E.instance=f,E.state.loading=5),Pn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Pn.set(t,a),f||Nb(h,t,a,E.state))),i&&l===null)throw Error(r(528,""));return E}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ya(a),a=sn(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function Ka(t){return'href="'+Tt(t)+'"'}function Tl(t){return'link[rel="stylesheet"]['+t+"]"}function j_(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function Nb(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Ft(i,"link",a),ft(i),t.head.appendChild(i))}function Ya(t){return'[src="'+Tt(t)+'"]'}function Al(t){return"script[async]"+t}function P_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+Tt(a.href)+'"]');if(l)return i.instance=l,ft(l),l;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),ft(l),Ft(l,"style",h),xc(l,a.precedence,t),i.instance=l;case"stylesheet":h=Ka(a.href);var f=t.querySelector(Tl(h));if(f)return i.state.loading|=4,i.instance=f,ft(f),f;l=j_(a),(h=Pn.get(h))&&Bf(l,h),f=(t.ownerDocument||t).createElement("link"),ft(f);var E=f;return E._p=new Promise(function(A,x){E.onload=A,E.onerror=x}),Ft(f,"link",l),i.state.loading|=4,xc(f,a.precedence,t),i.instance=f;case"script":return f=Ya(a.src),(h=t.querySelector(Al(f)))?(i.instance=h,ft(h),h):(l=a,(h=Pn.get(f))&&(l=T({},a),qf(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),ft(h),Ft(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,xc(l,a.precedence,t));return i.instance}function xc(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,f=h,E=0;E<l.length;E++){var A=l[E];if(A.dataset.precedence===i)f=A;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Bf(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function qf(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Dc=null;function L_(t,i,a){if(Dc===null){var l=new Map,h=Dc=new Map;h.set(a,l)}else h=Dc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[fr]||f[It]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var E=f.getAttribute(i)||"";E=t+E;var A=l.get(E);A?A.push(f):l.set(E,[f])}}return l}function U_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function Cb(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function z_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var bl=null;function xb(){}function Db(t,i,a){if(bl===null)throw Error(r(475));var l=bl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Ka(a.href),f=t.querySelector(Tl(h));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Oc.bind(l),t.then(l,l)),i.state.loading|=4,i.instance=f,ft(f);return}f=t.ownerDocument||t,a=j_(a),(h=Pn.get(h))&&Bf(a,h),f=f.createElement("link"),ft(f);var E=f;E._p=new Promise(function(A,x){E.onload=A,E.onerror=x}),Ft(f,"link",a),i.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=Oc.bind(l),t.addEventListener("load",i),t.addEventListener("error",i))}}function Ob(){if(bl===null)throw Error(r(475));var t=bl;return t.stylesheets&&t.count===0&&Hf(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&Hf(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Oc(){if(this.count--,this.count===0){if(this.stylesheets)Hf(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Mc=null;function Hf(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Mc=new Map,i.forEach(Mb,t),Mc=null,Oc.call(t))}function Mb(t,i){if(!(i.state.loading&4)){var a=Mc.get(t);if(a)var l=a.get(null);else{a=new Map,Mc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var E=h[f];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),l=E)}l&&a.set(null,l)}h=i.instance,E=h.getAttribute("data-precedence"),f=a.get(E)||l,f===l&&a.set(null,h),a.set(E,h),this.count++,l=Oc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var Sl={$$typeof:ne,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function Vb(t,i,a,l,h,f,E,A){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ni(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ni(0),this.hiddenUpdates=Ni(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function B_(t,i,a,l,h,f,E,A,x,B,Y,W){return t=new Vb(t,i,a,E,A,x,B,W),i=1,f===!0&&(i|=24),f=_n(3,null,null,i),t.current=f,f.stateNode=t,i=bd(),i.refCount++,t.pooledCache=i,i.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:i},Id(f),t}function q_(t){return t?(t=wa,t):wa}function H_(t,i,a,l,h,f){h=q_(h),l.context===null?l.context=h:l.pendingContext=h,l=_s(i),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=vs(t,l,i),a!==null&&(bn(a,t,i),el(a,t,i))}function F_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Ff(t,i){F_(t,i),(t=t.alternate)&&F_(t,i)}function G_(t){if(t.tag===13){var i=Sa(t,67108864);i!==null&&bn(i,t,67108864),Ff(t,67108864)}}var Vc=!0;function kb(t,i,a,l){var h=G.T;G.T=null;var f=ae.p;try{ae.p=2,Gf(t,i,a,l)}finally{ae.p=f,G.T=h}}function jb(t,i,a,l){var h=G.T;G.T=null;var f=ae.p;try{ae.p=8,Gf(t,i,a,l)}finally{ae.p=f,G.T=h}}function Gf(t,i,a,l){if(Vc){var h=Qf(l);if(h===null)Of(t,i,l,kc,a),K_(t,l);else if(Lb(h,t,i,a,l))l.stopPropagation();else if(K_(t,l),i&4&&-1<Pb.indexOf(t)){for(;h!==null;){var f=ti(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var E=qn(f.pendingLanes);if(E!==0){var A=f;for(A.pendingLanes|=2,A.entangledLanes|=2;E;){var x=1<<31-Yt(E);A.entanglements[1]|=x,E&=~x}pi(f),(Xe&6)===0&&(_c=wn()+500,yl(0))}}break;case 13:A=Sa(f,2),A!==null&&bn(A,f,2),Ec(),Ff(f,2)}if(f=Qf(l),f===null&&Of(t,i,l,kc,a),f===h)break;h=f}h!==null&&l.stopPropagation()}else Of(t,i,l,null,a)}}function Qf(t){return t=Nn(t),Kf(t)}var kc=null;function Kf(t){if(kc=null,t=xi(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=d(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return kc=t,null}function Q_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Xh()){case Ao:return 2;case ia:return 8;case lr:case $h:return 32;case sa:return 268435456;default:return 32}default:return 32}}var Yf=!1,Os=null,Ms=null,Vs=null,wl=new Map,Rl=new Map,ks=[],Pb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function K_(t,i){switch(t){case"focusin":case"focusout":Os=null;break;case"dragenter":case"dragleave":Ms=null;break;case"mouseover":case"mouseout":Vs=null;break;case"pointerover":case"pointerout":wl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rl.delete(i.pointerId)}}function Il(t,i,a,l,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[h]},i!==null&&(i=ti(i),i!==null&&G_(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function Lb(t,i,a,l,h){switch(i){case"focusin":return Os=Il(Os,t,i,a,l,h),!0;case"dragenter":return Ms=Il(Ms,t,i,a,l,h),!0;case"mouseover":return Vs=Il(Vs,t,i,a,l,h),!0;case"pointerover":var f=h.pointerId;return wl.set(f,Il(wl.get(f)||null,t,i,a,l,h)),!0;case"gotpointercapture":return f=h.pointerId,Rl.set(f,Il(Rl.get(f)||null,t,i,a,l,h)),!0}return!1}function Y_(t){var i=xi(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){t.blockedOn=i,Eu(t.priority,function(){if(a.tag===13){var l=An();l=us(l);var h=Sa(a,l);h!==null&&bn(h,a,l),Ff(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function jc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Qf(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Vi=l,a.target.dispatchEvent(l),Vi=null}else return i=ti(a),i!==null&&G_(i),t.blockedOn=a,!1;i.shift()}return!0}function X_(t,i,a){jc(t)&&a.delete(i)}function Ub(){Yf=!1,Os!==null&&jc(Os)&&(Os=null),Ms!==null&&jc(Ms)&&(Ms=null),Vs!==null&&jc(Vs)&&(Vs=null),wl.forEach(X_),Rl.forEach(X_)}function Pc(t,i){t.blockedOn===i&&(t.blockedOn=null,Yf||(Yf=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Ub)))}var Lc=null;function $_(t){Lc!==t&&(Lc=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Lc===t&&(Lc=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(Kf(l||a)===null)continue;break}var f=ti(a);f!==null&&(t.splice(i,3),i-=3,Qd(f,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Nl(t){function i(x){return Pc(x,t)}Os!==null&&Pc(Os,t),Ms!==null&&Pc(Ms,t),Vs!==null&&Pc(Vs,t),wl.forEach(i),Rl.forEach(i);for(var a=0;a<ks.length;a++){var l=ks[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ks.length&&(a=ks[0],a.blockedOn===null);)Y_(a),a.blockedOn===null&&ks.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],f=a[l+1],E=h[Et]||null;if(typeof f=="function")E||$_(a);else if(E){var A=null;if(f&&f.hasAttribute("formAction")){if(h=f,E=f[Et]||null)A=E.formAction;else if(Kf(h)!==null)continue}else A=E.action;typeof A=="function"?a[l+1]=A:(a.splice(l,3),l-=3),$_(a)}}}function Xf(t){this._internalRoot=t}Uc.prototype.render=Xf.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=An();H_(a,l,t,i,null,null)},Uc.prototype.unmount=Xf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;H_(t.current,2,null,t,null,null),Ec(),i[Rn]=null}};function Uc(t){this._internalRoot=t}Uc.prototype.unstable_scheduleHydration=function(t){if(t){var i=cs();t={blockedOn:null,target:t,priority:i};for(var a=0;a<ks.length&&i!==0&&i<ks[a].priority;a++);ks.splice(a,0,t),a===0&&Y_(t)}};var W_=e.version;if(W_!=="19.1.1")throw Error(r(527,W_,"19.1.1"));ae.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=y(i),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var zb={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zc.isDisabled&&zc.supportsFiber)try{ct=zc.inject(zb),Ye=zc}catch{}}return xl.createRoot=function(t,i){if(!o(t))throw Error(r(299));var a=!1,l="",h=fy,f=my,E=py,A=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(A=i.unstable_transitionCallbacks)),i=B_(t,1,!1,null,null,a,l,h,f,E,A,null),t[Rn]=i.current,Df(t),new Xf(i)},xl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(r(299));var l=!1,h="",f=fy,E=my,A=py,x=null,B=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(x=a.unstable_transitionCallbacks),a.formState!==void 0&&(B=a.formState)),i=B_(t,1,!0,i,a??null,l,h,f,E,A,x,B),i.context=q_(null),a=i.current,l=An(),l=us(l),h=_s(l),h.callback=null,vs(a,h,l),a=l,i.current.lanes=a,Ci(i,a),pi(i),t[Rn]=i.current,Df(t),new Uc(i)},xl.version="19.1.1",xl}var ov;function $b(){if(ov)return Zf.exports;ov=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Zf.exports=Xb(),Zf.exports}var Wb=$b();const Zb=()=>{};var lv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE=function(s){const e=[];let n=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},Jb=function(s){const e=[];let n=0,r=0;for(;n<s.length;){const o=s[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[n++];e[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[n++],d=s[n++],p=s[n++],y=((o&7)<<18|(u&63)<<12|(d&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(y>>10)),e[r++]=String.fromCharCode(56320+(y&1023))}else{const u=s[n++],d=s[n++];e[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},HE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],d=o+1<s.length,p=d?s[o+1]:0,y=o+2<s.length,_=y?s[o+2]:0,T=u>>2,I=(u&3)<<4|p>>4;let N=(p&15)<<2|_>>6,O=_&63;y||(O=64,d||(N=64)),r.push(n[T],n[I],n[N],n[O])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(qE(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):Jb(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=n[s.charAt(o++)],p=o<s.length?n[s.charAt(o)]:0;++o;const _=o<s.length?n[s.charAt(o)]:64;++o;const I=o<s.length?n[s.charAt(o)]:64;if(++o,u==null||p==null||_==null||I==null)throw new eS;const N=u<<2|p>>4;if(r.push(N),_!==64){const O=p<<4&240|_>>2;if(r.push(O),I!==64){const Q=_<<6&192|I;r.push(Q)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class eS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tS=function(s){const e=qE(s);return HE.encodeByteArray(e,!0)},rh=function(s){return tS(s).replace(/\./g,"")},FE=function(s){try{return HE.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS=()=>nS().__FIREBASE_DEFAULTS__,sS=()=>{if(typeof process>"u"||typeof lv>"u")return;const s=lv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},rS=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&FE(s[1]);return e&&JSON.parse(e)},wh=()=>{try{return Zb()||iS()||sS()||rS()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},GE=s=>wh()?.emulatorHosts?.[s],QE=s=>{const e=GE(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},KE=()=>wh()?.config,YE=s=>wh()?.[`_${s}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Gm(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[rh(JSON.stringify(n)),rh(JSON.stringify(d)),""].join(".")}const Ul={};function oS(){const s={prod:[],emulator:[]};for(const e of Object.keys(Ul))Ul[e]?s.emulator.push(e):s.prod.push(e);return s}function lS(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let uv=!1;function Qm(s,e){if(typeof window>"u"||typeof document>"u"||!Zr(window.location.host)||Ul[s]===e||Ul[s]||uv)return;Ul[s]=e;function n(N){return`__firebase__banner__${N}`}const r="__firebase__banner",u=oS().prod.length>0;function d(){const N=document.getElementById(r);N&&N.remove()}function p(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function y(N,O){N.setAttribute("width","24"),N.setAttribute("id",O),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function _(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{uv=!0,d()},N}function T(N,O){N.setAttribute("id",O),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function I(){const N=lS(r),O=n("text"),Q=document.getElementById(O)||document.createElement("span"),te=n("learnmore"),K=document.getElementById(te)||document.createElement("a"),se=n("preprendIcon"),he=document.getElementById(se)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const ne=N.element;p(ne),T(K,te);const ge=_();y(he,se),ne.append(he,Q,K,ge),document.body.appendChild(ne)}u?(Q.innerText="Preview backend disconnected.",he.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(he.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Q.innerText="Preview backend running in this workspace."),Q.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nn())}function cS(){const s=wh()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dS(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function fS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mS(){const s=nn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function pS(){return!cS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gS(){try{return typeof indexedDB=="object"}catch{return!1}}function yS(){return new Promise((s,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S="FirebaseError";class wi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=_S,Object.setPrototypeOf(this,wi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nu.prototype.create)}}class nu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?vS(u,r):"Error",p=`${this.serviceName}: ${d} (${o}).`;return new wi(o,p,r)}}function vS(s,e){return s.replace(ES,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const ES=/\{\$([^}]+)}/g;function TS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Qr(s,e){if(s===e)return!0;const n=Object.keys(s),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const u=s[o],d=e[o];if(cv(u)&&cv(d)){if(!Qr(u,d))return!1}else if(u!==d)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function cv(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(s){const e=[];for(const[n,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ml(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,u]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Vl(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function AS(s,e){const n=new bS(s,e);return n.subscribe.bind(n)}class bS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");SS(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=nm),o.error===void 0&&(o.error=nm),o.complete===void 0&&(o.complete=nm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function SS(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function nm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(s){return s&&s._delegate?s._delegate:s}class Qs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new aS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IS(e))try{this.getOrInitializeService({instanceIdentifier:qr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(e=qr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qr){return this.instances.has(e)}getOptions(e=qr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[u,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);r===p&&d.resolve(o)}return o}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&e(u,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:RS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qr){return this.component?this.component.multipleInstances?e:qr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RS(s){return s===qr?void 0:s}function IS(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new wS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(ke||(ke={}));const CS={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},xS=ke.INFO,DS={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},OS=(s,e,...n)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=DS[e];if(o)console[o](`[${r}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Km{constructor(e){this.name=e,this._logLevel=xS,this._logHandler=OS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const MS=(s,e)=>e.some(n=>s instanceof n);let hv,dv;function VS(){return hv||(hv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kS(){return dv||(dv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $E=new WeakMap,ym=new WeakMap,WE=new WeakMap,im=new WeakMap,Ym=new WeakMap;function jS(s){const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",d)},u=()=>{n(qs(s.result)),o()},d=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&$E.set(n,s)}).catch(()=>{}),Ym.set(e,s),e}function PS(s){if(ym.has(s))return;const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",d),s.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",d),s.addEventListener("abort",d)});ym.set(s,e)}let _m={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return ym.get(s);if(e==="objectStoreNames")return s.objectStoreNames||WE.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qs(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function LS(s){_m=s(_m)}function US(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=s.call(sm(this),e,...n);return WE.set(r,e.sort?e.sort():[e]),qs(r)}:kS().includes(s)?function(...e){return s.apply(sm(this),e),qs($E.get(this))}:function(...e){return qs(s.apply(sm(this),e))}}function zS(s){return typeof s=="function"?US(s):(s instanceof IDBTransaction&&PS(s),MS(s,VS())?new Proxy(s,_m):s)}function qs(s){if(s instanceof IDBRequest)return jS(s);if(im.has(s))return im.get(s);const e=zS(s);return e!==s&&(im.set(s,e),Ym.set(e,s)),e}const sm=s=>Ym.get(s);function BS(s,e,{blocked:n,upgrade:r,blocking:o,terminated:u}={}){const d=indexedDB.open(s,e),p=qs(d);return r&&d.addEventListener("upgradeneeded",y=>{r(qs(d.result),y.oldVersion,y.newVersion,qs(d.transaction),y)}),n&&d.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),p.then(y=>{u&&y.addEventListener("close",()=>u()),o&&y.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),p}const qS=["get","getKey","getAll","getAllKeys","count"],HS=["put","add","delete","clear"],rm=new Map;function fv(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(rm.get(e))return rm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=HS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||qS.includes(n)))return;const u=async function(d,...p){const y=this.transaction(d,o?"readwrite":"readonly");let _=y.store;return r&&(_=_.index(p.shift())),(await Promise.all([_[n](...p),o&&y.done]))[0]};return rm.set(e,u),u}LS(s=>({...s,get:(e,n,r)=>fv(e,n)||s.get(e,n,r),has:(e,n)=>!!fv(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(GS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function GS(s){return s.getComponent()?.type==="VERSION"}const vm="@firebase/app",mv="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss=new Km("@firebase/app"),QS="@firebase/app-compat",KS="@firebase/analytics-compat",YS="@firebase/analytics",XS="@firebase/app-check-compat",$S="@firebase/app-check",WS="@firebase/auth",ZS="@firebase/auth-compat",JS="@firebase/database",ew="@firebase/data-connect",tw="@firebase/database-compat",nw="@firebase/functions",iw="@firebase/functions-compat",sw="@firebase/installations",rw="@firebase/installations-compat",aw="@firebase/messaging",ow="@firebase/messaging-compat",lw="@firebase/performance",uw="@firebase/performance-compat",cw="@firebase/remote-config",hw="@firebase/remote-config-compat",dw="@firebase/storage",fw="@firebase/storage-compat",mw="@firebase/firestore",pw="@firebase/ai",gw="@firebase/firestore-compat",yw="firebase",_w="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em="[DEFAULT]",vw={[vm]:"fire-core",[QS]:"fire-core-compat",[YS]:"fire-analytics",[KS]:"fire-analytics-compat",[$S]:"fire-app-check",[XS]:"fire-app-check-compat",[WS]:"fire-auth",[ZS]:"fire-auth-compat",[JS]:"fire-rtdb",[ew]:"fire-data-connect",[tw]:"fire-rtdb-compat",[nw]:"fire-fn",[iw]:"fire-fn-compat",[sw]:"fire-iid",[rw]:"fire-iid-compat",[aw]:"fire-fcm",[ow]:"fire-fcm-compat",[lw]:"fire-perf",[uw]:"fire-perf-compat",[cw]:"fire-rc",[hw]:"fire-rc-compat",[dw]:"fire-gcs",[fw]:"fire-gcs-compat",[mw]:"fire-fst",[gw]:"fire-fst-compat",[pw]:"fire-vertex","fire-js":"fire-js",[yw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah=new Map,Ew=new Map,Tm=new Map;function pv(s,e){try{s.container.addComponent(e)}catch(n){ss.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function Kr(s){const e=s.name;if(Tm.has(e))return ss.debug(`There were multiple attempts to register component ${e}.`),!1;Tm.set(e,s);for(const n of ah.values())pv(n,s);for(const n of Ew.values())pv(n,s);return!0}function Rh(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function fn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hs=new nu("app","Firebase",Tw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr=_w;function ZE(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const r={name:Em,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw Hs.create("bad-app-name",{appName:String(o)});if(n||(n=KE()),!n)throw Hs.create("no-options");const u=ah.get(o);if(u){if(Qr(n,u.options)&&Qr(r,u.config))return u;throw Hs.create("duplicate-app",{appName:o})}const d=new NS(o);for(const y of Tm.values())d.addComponent(y);const p=new Aw(n,r,d);return ah.set(o,p),p}function Xm(s=Em){const e=ah.get(s);if(!e&&s===Em&&KE())return ZE();if(!e)throw Hs.create("no-app",{appName:s});return e}function yi(s,e,n){let r=vw[s]??s;n&&(r+=`-${n}`);const o=r.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const d=[`Unable to register library "${r}" with version "${e}":`];o&&d.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ss.warn(d.join(" "));return}Kr(new Qs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw="firebase-heartbeat-database",Sw=1,Gl="firebase-heartbeat-store";let am=null;function JE(){return am||(am=BS(bw,Sw,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Gl)}catch(n){console.warn(n)}}}}).catch(s=>{throw Hs.create("idb-open",{originalErrorMessage:s.message})})),am}async function ww(s){try{const n=(await JE()).transaction(Gl),r=await n.objectStore(Gl).get(eT(s));return await n.done,r}catch(e){if(e instanceof wi)ss.warn(e.message);else{const n=Hs.create("idb-get",{originalErrorMessage:e?.message});ss.warn(n.message)}}}async function gv(s,e){try{const r=(await JE()).transaction(Gl,"readwrite");await r.objectStore(Gl).put(e,eT(s)),await r.done}catch(n){if(n instanceof wi)ss.warn(n.message);else{const r=Hs.create("idb-set",{originalErrorMessage:n?.message});ss.warn(r.message)}}}function eT(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw=1024,Iw=30;class Nw{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new xw(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=yv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>Iw){const o=Dw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ss.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=yv(),{heartbeatsToSend:n,unsentEntries:r}=Cw(this._heartbeatsCache.heartbeats),o=rh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return ss.warn(e),""}}}function yv(){return new Date().toISOString().substring(0,10)}function Cw(s,e=Rw){const n=[];let r=s.slice();for(const o of s){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),_v(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),_v(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class xw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gS()?yS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ww(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return gv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return gv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function _v(s){return rh(JSON.stringify({version:2,heartbeats:s})).length}function Dw(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let r=1;r<s.length;r++)s[r].date<n&&(n=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(s){Kr(new Qs("platform-logger",e=>new FS(e),"PRIVATE")),Kr(new Qs("heartbeat",e=>new Nw(e),"PRIVATE")),yi(vm,mv,s),yi(vm,mv,"esm2020"),yi("fire-js","")}Ow("");function tT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Mw=tT,nT=new nu("auth","Firebase",tT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh=new Km("@firebase/auth");function Vw(s,...e){oh.logLevel<=ke.WARN&&oh.warn(`Auth (${Jr}): ${s}`,...e)}function Xc(s,...e){oh.logLevel<=ke.ERROR&&oh.error(`Auth (${Jr}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(s,...e){throw Wm(s,...e)}function Wn(s,...e){return Wm(s,...e)}function $m(s,e,n){const r={...Mw(),[e]:n};return new nu("auth","Firebase",r).create(e,{appName:s.name})}function ns(s){return $m(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function kw(s,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&zn(s,"argument-error"),$m(s,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Wm(s,...e){if(typeof s!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(n,...r)}return nT.create(s,...e)}function Te(s,e,...n){if(!s)throw Wm(e,...n)}function es(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Xc(e),new Error(e)}function rs(s,e){s||es(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(){return typeof self<"u"&&self.location?.href||""}function jw(){return vv()==="http:"||vv()==="https:"}function vv(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jw()||dS()||"connection"in navigator)?navigator.onLine:!0}function Lw(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n){this.shortDelay=e,this.longDelay=n,rs(n>e,"Short delay should be less than long delay!"),this.isMobile=uS()||fS()}get(){return Pw()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(s,e){rs(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;es("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;es("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;es("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Bw=new su(3e4,6e4);function Js(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function er(s,e,n,r,o={}){return sT(s,o,async()=>{let u={},d={};r&&(e==="GET"?d=r:u={body:JSON.stringify(r)});const p=iu({key:s.config.apiKey,...d}).slice(1),y=await s._getAdditionalHeaders();y["Content-Type"]="application/json",s.languageCode&&(y["X-Firebase-Locale"]=s.languageCode);const _={method:e,headers:y,...u};return hS()||(_.referrerPolicy="no-referrer"),s.emulatorConfig&&Zr(s.emulatorConfig.host)&&(_.credentials="include"),iT.fetch()(await rT(s,s.config.apiHost,n,p),_)})}async function sT(s,e,n){s._canInitEmulator=!1;const r={...Uw,...e};try{const o=new Hw(s),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw Bc(s,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const p=u.ok?d.errorMessage:d.error.message,[y,_]=p.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bc(s,"credential-already-in-use",d);if(y==="EMAIL_EXISTS")throw Bc(s,"email-already-in-use",d);if(y==="USER_DISABLED")throw Bc(s,"user-disabled",d);const T=r[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw $m(s,T,_);zn(s,T)}}catch(o){if(o instanceof wi)throw o;zn(s,"network-request-failed",{message:String(o)})}}async function ru(s,e,n,r,o={}){const u=await er(s,e,n,r,o);return"mfaPendingCredential"in u&&zn(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function rT(s,e,n,r){const o=`${e}${n}?${r}`,u=s,d=u.config.emulator?Zm(s.config,o):`${s.config.apiScheme}://${o}`;return zw.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function qw(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Hw{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Wn(this.auth,"network-request-failed")),Bw.get())})}}function Bc(s,e,n){const r={appName:s.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=Wn(s,e,r);return o.customData._tokenResponse=n,o}function Ev(s){return s!==void 0&&s.enterprise!==void 0}class Fw{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return qw(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Gw(s,e){return er(s,"GET","/v2/recaptchaConfig",Js(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qw(s,e){return er(s,"POST","/v1/accounts:delete",e)}async function lh(s,e){return er(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Kw(s,e=!1){const n=vt(s),r=await n.getIdToken(e),o=Jm(r);Te(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u?.sign_in_provider;return{claims:o,token:r,authTime:zl(om(o.auth_time)),issuedAtTime:zl(om(o.iat)),expirationTime:zl(om(o.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function om(s){return Number(s)*1e3}function Jm(s){const[e,n,r]=s.split(".");if(e===void 0||n===void 0||r===void 0)return Xc("JWT malformed, contained fewer than 3 sections"),null;try{const o=FE(n);return o?JSON.parse(o):(Xc("Failed to decode base64 JWT payload"),null)}catch(o){return Xc("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Tv(s){const e=Jm(s);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ql(s,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof wi&&Yw(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function Yw({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zl(this.lastLoginAt),this.creationTime=zl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uh(s){const e=s.auth,n=await s.getIdToken(),r=await Ql(s,lh(e,{idToken:n}));Te(r?.users.length,e,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const u=o.providerUserInfo?.length?aT(o.providerUserInfo):[],d=Ww(s.providerData,u),p=s.isAnonymous,y=!(s.email&&o.passwordHash)&&!d?.length,_=p?y:!1,T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new bm(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(s,T)}async function $w(s){const e=vt(s);await uh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Ww(s,e){return[...s.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function aT(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zw(s,e){const n=await sT(s,{},async()=>{const r=iu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,d=await rT(s,o,"/v1/token",`key=${u}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:p,body:r};return s.emulatorConfig&&Zr(s.emulatorConfig.host)&&(y.credentials="include"),iT.fetch()(d,y)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Jw(s,e){return er(s,"POST","/v2/accounts:revokeToken",Js(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Tv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const n=Tv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:u}=await Zw(e,n);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:u}=n,d=new io;return r&&(Te(typeof r=="string","internal-error",{appName:e}),d.refreshToken=r),o&&(Te(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(Te(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new io,this.toJSON())}_performRefresh(){return es("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(s,e){Te(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Xn{constructor({uid:e,auth:n,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new Xw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new bm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Ql(this,this.stsTokenManager.getToken(this.auth,e));return Te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Kw(this,e)}reload(){return $w(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await uh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fn(this.auth.app))return Promise.reject(ns(this.auth));const e=await this.getIdToken();return await Ql(this,Qw(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,d=n.photoURL??void 0,p=n.tenantId??void 0,y=n._redirectEventId??void 0,_=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:I,emailVerified:N,isAnonymous:O,providerData:Q,stsTokenManager:te}=n;Te(I&&te,e,"internal-error");const K=io.fromJSON(this.name,te);Te(typeof I=="string",e,"internal-error"),Ps(r,e.name),Ps(o,e.name),Te(typeof N=="boolean",e,"internal-error"),Te(typeof O=="boolean",e,"internal-error"),Ps(u,e.name),Ps(d,e.name),Ps(p,e.name),Ps(y,e.name),Ps(_,e.name),Ps(T,e.name);const se=new Xn({uid:I,auth:e,email:o,emailVerified:N,displayName:r,isAnonymous:O,photoURL:d,phoneNumber:u,tenantId:p,stsTokenManager:K,createdAt:_,lastLoginAt:T});return Q&&Array.isArray(Q)&&(se.providerData=Q.map(he=>({...he}))),y&&(se._redirectEventId=y),se}static async _fromIdTokenResponse(e,n,r=!1){const o=new io;o.updateFromServerResponse(n);const u=new Xn({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await uh(u),u}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];Te(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?aT(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!u?.length,p=new io;p.updateFromIdToken(r);const y=new Xn({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:d}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new bm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(y,_),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av=new Map;function ts(s){rs(s instanceof Function,"Expected a class definition");let e=Av.get(s);return e?(rs(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,Av.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}oT.type="NONE";const bv=oT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(s,e,n){return`firebase:${s}:${e}:${n}`}class so{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=$c(this.userKey,o.apiKey,u),this.fullPersistenceKey=$c("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await lh(this.auth,{idToken:e}).catch(()=>{});return n?Xn._fromGetAccountInfoResponse(this.auth,n,e):null}return Xn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new so(ts(bv),e,r);const o=(await Promise.all(n.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let u=o[0]||ts(bv);const d=$c(r,e.config.apiKey,e.name);let p=null;for(const _ of n)try{const T=await _._get(d);if(T){let I;if(typeof T=="string"){const N=await lh(e,{idToken:T}).catch(()=>{});if(!N)break;I=await Xn._fromGetAccountInfoResponse(e,N,T)}else I=Xn._fromJSON(e,T);_!==u&&(p=I),u=_;break}}catch{}const y=o.filter(_=>_._shouldAllowMigration);return!u._shouldAllowMigration||!y.length?new so(u,e,r):(u=y[0],p&&await u._set(d,p.toJSON()),await Promise.all(n.map(async _=>{if(_!==u)try{await _._remove(d)}catch{}})),new so(u,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sv(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fT(e))return"Blackberry";if(mT(e))return"Webos";if(uT(e))return"Safari";if((e.includes("chrome/")||cT(e))&&!e.includes("edge/"))return"Chrome";if(dT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(n);if(r?.length===2)return r[1]}return"Other"}function lT(s=nn()){return/firefox\//i.test(s)}function uT(s=nn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cT(s=nn()){return/crios\//i.test(s)}function hT(s=nn()){return/iemobile/i.test(s)}function dT(s=nn()){return/android/i.test(s)}function fT(s=nn()){return/blackberry/i.test(s)}function mT(s=nn()){return/webos/i.test(s)}function ep(s=nn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function e1(s=nn()){return ep(s)&&!!window.navigator?.standalone}function t1(){return mS()&&document.documentMode===10}function pT(s=nn()){return ep(s)||dT(s)||mT(s)||fT(s)||/windows phone/i.test(s)||hT(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(s,e=[]){let n;switch(s){case"Browser":n=Sv(nn());break;case"Worker":n=`${Sv(nn())}-${s}`;break;default:n=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Jr}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=u=>new Promise((d,p)=>{try{const y=e(u);d(y)}catch(y){p(y)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i1(s,e={}){return er(s,"GET","/v2/passwordPolicy",Js(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1=6;class r1{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??s1,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wv(this),this.idTokenSubscription=new wv(this),this.beforeStateQueue=new n1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ts(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await so.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await lh(this,{idToken:e}),r=await Xn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(fn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=r?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&p?.user&&(r=p.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await uh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Lw()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fn(this.app))return Promise.reject(ns(this));const n=e?vt(e):null;return n&&Te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fn(this.app)?Promise.reject(ns(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fn(this.app)?Promise.reject(ns(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ts(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await i1(this),n=new r1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new nu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Jw(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ts(e)||this._popupRedirectResolver;Te(n,this,"argument-error"),this.redirectPersistenceManager=await so.create(this,[ts(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(p,this,"internal-error"),p.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const y=e.addObserver(n,r,o);return()=>{d=!0,y()}}else{const y=e.addObserver(n);return()=>{d=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(fn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Vw(`Error while retrieving App Check token: ${e.error}`),e?.token}}function tr(s){return vt(s)}class wv{constructor(e){this.auth=e,this.observer=null,this.addObserver=AS(n=>this.observer=n)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ih={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function o1(s){Ih=s}function yT(s){return Ih.loadJS(s)}function l1(){return Ih.recaptchaEnterpriseScript}function u1(){return Ih.gapiScript}function c1(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class h1{constructor(){this.enterprise=new d1}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class d1{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const f1="recaptcha-enterprise",_T="NO_RECAPTCHA";class m1{constructor(e){this.type=f1,this.auth=tr(e)}async verify(e="verify",n=!1){async function r(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,p)=>{Gw(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const _=new Fw(y);return u.tenantId==null?u._agentRecaptchaConfig=_:u._tenantRecaptchaConfigs[u.tenantId]=_,d(_.siteKey)}}).catch(y=>{p(y)})})}function o(u,d,p){const y=window.grecaptcha;Ev(y)?y.enterprise.ready(()=>{y.enterprise.execute(u,{action:e}).then(_=>{d(_)}).catch(()=>{d(_T)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new h1().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{r(this.auth).then(p=>{if(!n&&Ev(window.grecaptcha))o(p,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let y=l1();y.length!==0&&(y+=p),yT(y).then(()=>{o(p,u,d)}).catch(_=>{d(_)})}}).catch(p=>{d(p)})})}}async function Rv(s,e,n,r=!1,o=!1){const u=new m1(s);let d;if(o)d=_T;else try{d=await u.verify(n)}catch{d=await u.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const y=p.phoneEnrollmentInfo.phoneNumber,_=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:_,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const y=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Sm(s,e,n,r,o){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Rv(s,e,n,n==="getOobCode");return r(s,u)}else return r(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await Rv(s,e,n,n==="getOobCode");return r(s,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(s,e){const n=Rh(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Qr(u,e??{}))return o;zn(o,"already-initialized")}return n.initialize({options:e})}function g1(s,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ts);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function y1(s,e,n){const r=tr(s);Te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,u=vT(e),{host:d,port:p}=_1(e),y=p===null?"":`:${p}`,_={url:`${u}//${d}${y}/`},T=Object.freeze({host:d,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Te(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Te(Qr(_,r.config.emulator)&&Qr(T,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=_,r.emulatorConfig=T,r.settings.appVerificationDisabledForTesting=!0,Zr(d)?(Gm(`${u}//${d}${y}`),Qm("Auth",!0)):v1()}function vT(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function _1(s){const e=vT(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:Iv(r.substr(u.length+1))}}else{const[u,d]=r.split(":");return{host:u,port:Iv(d)}}}function Iv(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function v1(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return es("not implemented")}_getIdTokenResponse(e){return es("not implemented")}_linkToIdToken(e,n){return es("not implemented")}_getReauthenticationResolver(e){return es("not implemented")}}async function E1(s,e){return er(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T1(s,e){return ru(s,"POST","/v1/accounts:signInWithPassword",Js(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A1(s,e){return ru(s,"POST","/v1/accounts:signInWithEmailLink",Js(s,e))}async function b1(s,e){return ru(s,"POST","/v1/accounts:signInWithEmailLink",Js(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl extends tp{constructor(e,n,r,o=null){super("password",r),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Kl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Kl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sm(e,n,"signInWithPassword",T1);case"emailLink":return A1(e,{email:this._email,oobCode:this._password});default:zn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sm(e,r,"signUpPassword",E1);case"emailLink":return b1(e,{idToken:n,email:this._email,oobCode:this._password});default:zn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ro(s,e){return ru(s,"POST","/v1/accounts:signInWithIdp",Js(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1="http://localhost";class Yr extends tp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Yr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):zn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...u}=n;if(!r||!o)return null;const d=new Yr(r,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return ro(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ro(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ro(e,n)}buildRequest(){const e={requestUri:S1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=iu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function R1(s){const e=Ml(Vl(s)).link,n=e?Ml(Vl(e)).deep_link_id:null,r=Ml(Vl(s)).deep_link_id;return(r?Ml(Vl(r)).link:null)||r||n||e||s}class np{constructor(e){const n=Ml(Vl(e)),r=n.apiKey??null,o=n.oobCode??null,u=w1(n.mode??null);Te(r&&o&&u,"argument-error"),this.apiKey=r,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=R1(e);try{return new np(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(){this.providerId=po.PROVIDER_ID}static credential(e,n){return Kl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=np.parseLink(n);return Te(r,"argument-error"),Kl._fromEmailAndCode(e,r.code,r.tenantId)}}po.PROVIDER_ID="password";po.EMAIL_PASSWORD_SIGN_IN_METHOD="password";po.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au extends ip{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls extends au{constructor(){super("facebook.com")}static credential(e){return Yr._fromParams({providerId:Ls.PROVIDER_ID,signInMethod:Ls.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ls.credentialFromTaggedObject(e)}static credentialFromError(e){return Ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ls.credential(e.oauthAccessToken)}catch{return null}}}Ls.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ls.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends au{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Yr._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ji.credential(n,r)}catch{return null}}}Ji.GOOGLE_SIGN_IN_METHOD="google.com";Ji.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends au{constructor(){super("github.com")}static credential(e){return Yr._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Us.credential(e.oauthAccessToken)}catch{return null}}}Us.GITHUB_SIGN_IN_METHOD="github.com";Us.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs extends au{constructor(){super("twitter.com")}static credential(e,n){return Yr._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return zs.credential(n,r)}catch{return null}}}zs.TWITTER_SIGN_IN_METHOD="twitter.com";zs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I1(s,e){return ru(s,"POST","/v1/accounts:signUp",Js(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const u=await Xn._fromIdTokenResponse(e,r,o),d=Nv(r);return new Xr({user:u,providerId:d,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=Nv(r);return new Xr({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function Nv(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch extends wi{constructor(e,n,r,o){super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,ch.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new ch(e,n,r,o)}}function ET(s,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?ch._fromErrorAndOperation(s,u,e,r):u})}async function N1(s,e,n=!1){const r=await Ql(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return Xr._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C1(s,e,n=!1){const{auth:r}=s;if(fn(r.app))return Promise.reject(ns(r));const o="reauthenticate";try{const u=await Ql(s,ET(r,o,e,s),n);Te(u.idToken,r,"internal-error");const d=Jm(u.idToken);Te(d,r,"internal-error");const{sub:p}=d;return Te(s.uid===p,r,"user-mismatch"),Xr._forOperation(s,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&zn(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TT(s,e,n=!1){if(fn(s.app))return Promise.reject(ns(s));const r="signIn",o=await ET(s,r,e),u=await Xr._fromIdTokenResponse(s,r,o);return n||await s._updateCurrentUser(u.user),u}async function x1(s,e){return TT(tr(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AT(s){const e=tr(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function D1(s,e,n){if(fn(s.app))return Promise.reject(ns(s));const r=tr(s),d=await Sm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",I1).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&AT(s),y}),p=await Xr._fromIdTokenResponse(r,"signIn",d);return await r._updateCurrentUser(p.user),p}function O1(s,e,n){return fn(s.app)?Promise.reject(ns(s)):x1(vt(s),po.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&AT(s),r})}function M1(s,e,n,r){return vt(s).onIdTokenChanged(e,n,r)}function V1(s,e,n){return vt(s).beforeAuthStateChanged(e,n)}function k1(s,e,n,r){return vt(s).onAuthStateChanged(e,n,r)}function j1(s){return vt(s).signOut()}const hh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(hh,"1"),this.storage.removeItem(hh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1=1e3,L1=10;class ST extends bT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,p,y)=>{this.notifyListeners(d,y)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(r);!n&&this.localCache[r]===d||this.notifyListeners(r,d)},u=this.storage.getItem(r);t1()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,L1):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},P1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ST.type="LOCAL";const U1=ST;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT extends bT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}wT.type="SESSION";const RT=wT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new Nh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:u}=n.data,d=this.handlersMap[o];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const p=Array.from(d).map(async _=>_(n.origin,u)),y=await z1(p);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:y})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Nh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(s="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((p,y)=>{const _=sp("",20);o.port1.start();const T=setTimeout(()=>{y(new Error("unsupported_event"))},r);d={messageChannel:o,onMessage(I){const N=I;if(N.data.eventId===_)switch(N.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(N.data.response);break;default:clearTimeout(T),clearTimeout(u),y(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:_,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(){return window}function q1(s){_i().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(){return typeof _i().WorkerGlobalScope<"u"&&typeof _i().importScripts=="function"}async function H1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function F1(){return navigator?.serviceWorker?.controller||null}function G1(){return IT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="firebaseLocalStorageDb",Q1=1,dh="firebaseLocalStorage",CT="fbase_key";class ou{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ch(s,e){return s.transaction([dh],e?"readwrite":"readonly").objectStore(dh)}function K1(){const s=indexedDB.deleteDatabase(NT);return new ou(s).toPromise()}function wm(){const s=indexedDB.open(NT,Q1);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(dh,{keyPath:CT})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(dh)?e(r):(r.close(),await K1(),e(await wm()))})})}async function Cv(s,e,n){const r=Ch(s,!0).put({[CT]:e,value:n});return new ou(r).toPromise()}async function Y1(s,e){const n=Ch(s,!1).get(e),r=await new ou(n).toPromise();return r===void 0?null:r.value}function xv(s,e){const n=Ch(s,!0).delete(e);return new ou(n).toPromise()}const X1=800,$1=3;class xT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>$1)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return IT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nh._getInstance(G1()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await H1(),!this.activeServiceWorker)return;this.sender=new B1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||F1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await wm();return await Cv(e,hh,"1"),await xv(e,hh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Cv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Y1(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>xv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Ch(o,!1).getAll();return new ou(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),X1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xT.type="LOCAL";const W1=xT;new su(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(s,e){return e?ts(e):(Te(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp extends tp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ro(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ro(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ro(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Z1(s){return TT(s.auth,new rp(s),s.bypassAuthState)}function J1(s){const{auth:e,user:n}=s;return Te(n,e,"internal-error"),C1(n,new rp(s),s.bypassAuthState)}async function eR(s){const{auth:e,user:n}=s;return Te(n,e,"internal-error"),N1(n,new rp(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e,n,r,o,u=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:u,error:d,type:p}=e;if(d){this.reject(d);return}const y={auth:this.auth,requestUri:n,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(y))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Z1;case"linkViaPopup":case"linkViaRedirect":return eR;case"reauthViaPopup":case"reauthViaRedirect":return J1;default:zn(this.auth,"internal-error")}}resolve(e){rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR=new su(2e3,1e4);async function nR(s,e,n){if(fn(s.app))return Promise.reject(Wn(s,"operation-not-supported-in-this-environment"));const r=tr(s);kw(s,e,ip);const o=DT(r,n);return new Hr(r,"signInViaPopup",e,o).executeNotNull()}class Hr extends OT{constructor(e,n,r,o,u){super(e,n,o,u),this.provider=r,this.authWindow=null,this.pollId=null,Hr.currentPopupAction&&Hr.currentPopupAction.cancel(),Hr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){rs(this.filter.length===1,"Popup operations only handle one event");const e=sp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Wn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Wn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hr.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Wn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tR.get())};e()}}Hr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR="pendingRedirect",Wc=new Map;class sR extends OT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Wc.get(this.auth._key());if(!e){try{const r=await rR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Wc.set(this.auth._key(),e)}return this.bypassAuthState||Wc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rR(s,e){const n=lR(e),r=oR(s);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function aR(s,e){Wc.set(s._key(),e)}function oR(s){return ts(s._redirectPersistence)}function lR(s){return $c(iR,s.config.apiKey,s.name)}async function uR(s,e,n=!1){if(fn(s.app))return Promise.reject(ns(s));const r=tr(s),o=DT(r,e),d=await new sR(r,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await r._persistUserIfCurrent(d.user),await r._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=600*1e3;class hR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!MT(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Wn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dv(e))}saveEventToCache(e){this.cachedEventUids.add(Dv(e)),this.lastProcessedEventTime=Date.now()}}function Dv(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function MT({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function dR(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return MT(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fR(s,e={}){return er(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pR=/^https?/;async function gR(s){if(s.config.emulator)return;const{authorizedDomains:e}=await fR(s);for(const n of e)try{if(yR(n))return}catch{}zn(s,"unauthorized-domain")}function yR(s){const e=Am(),{protocol:n,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&r===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===r}if(!pR.test(n))return!1;if(mR.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R=new su(3e4,6e4);function Ov(){const s=_i().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function vR(s){return new Promise((e,n)=>{function r(){Ov(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ov(),n(Wn(s,"network-request-failed"))},timeout:_R.get()})}if(_i().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(_i().gapi?.load)r();else{const o=c1("iframefcb");return _i()[o]=()=>{gapi.load?r():n(Wn(s,"network-request-failed"))},yT(`${u1()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw Zc=null,e})}let Zc=null;function ER(s){return Zc=Zc||vR(s),Zc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=new su(5e3,15e3),AR="__/auth/iframe",bR="emulator/auth/iframe",SR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RR(s){const e=s.config;Te(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?Zm(e,bR):`https://${s.config.authDomain}/${AR}`,r={apiKey:e.apiKey,appName:s.name,v:Jr},o=wR.get(s.config.apiHost);o&&(r.eid=o);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${n}?${iu(r).slice(1)}`}async function IR(s){const e=await ER(s),n=_i().gapi;return Te(n,s,"internal-error"),e.open({where:document.body,url:RR(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:SR,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const d=Wn(s,"network-request-failed"),p=_i().setTimeout(()=>{u(d)},TR.get());function y(){_i().clearTimeout(p),o(r)}r.ping(y).then(y,()=>{u(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CR=500,xR=600,DR="_blank",OR="http://localhost";class Mv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function MR(s,e,n,r=CR,o=xR){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const y={...NR,width:r.toString(),height:o.toString(),top:u,left:d},_=nn().toLowerCase();n&&(p=cT(_)?DR:n),lT(_)&&(e=e||OR,y.scrollbars="yes");const T=Object.entries(y).reduce((N,[O,Q])=>`${N}${O}=${Q},`,"");if(e1(_)&&p!=="_self")return VR(e||"",p),new Mv(null);const I=window.open(e||"",p,T);Te(I,s,"popup-blocked");try{I.focus()}catch{}return new Mv(I)}function VR(s,e){const n=document.createElement("a");n.href=s,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR="__/auth/handler",jR="emulator/auth/handler",PR=encodeURIComponent("fac");async function Vv(s,e,n,r,o,u){Te(s.config.authDomain,s,"auth-domain-config-required"),Te(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:r,v:Jr,eventId:o};if(e instanceof ip){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",TS(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,I]of Object.entries({}))d[T]=I}if(e instanceof au){const T=e.getScopes().filter(I=>I!=="");T.length>0&&(d.scopes=T.join(","))}s.tenantId&&(d.tid=s.tenantId);const p=d;for(const T of Object.keys(p))p[T]===void 0&&delete p[T];const y=await s._getAppCheckToken(),_=y?`#${PR}=${encodeURIComponent(y)}`:"";return`${LR(s)}?${iu(p).slice(1)}${_}`}function LR({config:s}){return s.emulator?Zm(s,jR):`https://${s.authDomain}/${kR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm="webStorageSupport";class UR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RT,this._completeRedirectFn=uR,this._overrideRedirectResult=aR}async _openPopup(e,n,r,o){rs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await Vv(e,n,r,Am(),o);return MR(e,u,sp())}async _openRedirect(e,n,r,o){await this._originValidation(e);const u=await Vv(e,n,r,Am(),o);return q1(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(rs(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await IR(e),r=new hR(e);return n.register("authEvent",o=>(Te(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(lm,{type:lm},o=>{const u=o?.[0]?.[lm];u!==void 0&&n(!!u),zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=gR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return pT()||uT()||ep()}}const zR=UR;var kv="@firebase/auth",jv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function HR(s){Kr(new Qs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=r.options;Te(d&&!d.includes(":"),"invalid-api-key",{appName:r.name});const y={apiKey:d,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gT(s)},_=new a1(r,o,u,y);return g1(_,n),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Kr(new Qs("auth-internal",e=>{const n=tr(e.getProvider("auth").getImmediate());return(r=>new BR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),yi(kv,jv,qR(s)),yi(kv,jv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=300,GR=YE("authIdTokenMaxAge")||FR;let Pv=null;const QR=s=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>GR)return;const o=n?.token;Pv!==o&&(Pv=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function KR(s=Xm()){const e=Rh(s,"auth");if(e.isInitialized())return e.getImmediate();const n=p1(s,{popupRedirectResolver:zR,persistence:[W1,U1,RT]}),r=YE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const d=QR(u.toString());V1(n,d,()=>d(n.currentUser)),M1(n,p=>d(p))}}const o=GE("auth");return o&&y1(n,`http://${o}`),n}function YR(){return document.getElementsByTagName("head")?.[0]??document}o1({loadJS(s){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=o=>{const u=Wn("internal-error");u.customData=o,n(u)},r.type="text/javascript",r.charset="UTF-8",YR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});HR("Browser");var XR="firebase",$R="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yi(XR,$R,"app");var Lv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fs,VT;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,S){function R(){}R.prototype=S.prototype,C.D=S.prototype,C.prototype=new R,C.prototype.constructor=C,C.C=function(M,V,j){for(var w=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)w[ie-2]=arguments[ie];return S.prototype[V].apply(M,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,S,R){R||(R=0);var M=Array(16);if(typeof S=="string")for(var V=0;16>V;++V)M[V]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(V=0;16>V;++V)M[V]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=C.g[0],R=C.g[1],V=C.g[2];var j=C.g[3],w=S+(j^R&(V^j))+M[0]+3614090360&4294967295;S=R+(w<<7&4294967295|w>>>25),w=j+(V^S&(R^V))+M[1]+3905402710&4294967295,j=S+(w<<12&4294967295|w>>>20),w=V+(R^j&(S^R))+M[2]+606105819&4294967295,V=j+(w<<17&4294967295|w>>>15),w=R+(S^V&(j^S))+M[3]+3250441966&4294967295,R=V+(w<<22&4294967295|w>>>10),w=S+(j^R&(V^j))+M[4]+4118548399&4294967295,S=R+(w<<7&4294967295|w>>>25),w=j+(V^S&(R^V))+M[5]+1200080426&4294967295,j=S+(w<<12&4294967295|w>>>20),w=V+(R^j&(S^R))+M[6]+2821735955&4294967295,V=j+(w<<17&4294967295|w>>>15),w=R+(S^V&(j^S))+M[7]+4249261313&4294967295,R=V+(w<<22&4294967295|w>>>10),w=S+(j^R&(V^j))+M[8]+1770035416&4294967295,S=R+(w<<7&4294967295|w>>>25),w=j+(V^S&(R^V))+M[9]+2336552879&4294967295,j=S+(w<<12&4294967295|w>>>20),w=V+(R^j&(S^R))+M[10]+4294925233&4294967295,V=j+(w<<17&4294967295|w>>>15),w=R+(S^V&(j^S))+M[11]+2304563134&4294967295,R=V+(w<<22&4294967295|w>>>10),w=S+(j^R&(V^j))+M[12]+1804603682&4294967295,S=R+(w<<7&4294967295|w>>>25),w=j+(V^S&(R^V))+M[13]+4254626195&4294967295,j=S+(w<<12&4294967295|w>>>20),w=V+(R^j&(S^R))+M[14]+2792965006&4294967295,V=j+(w<<17&4294967295|w>>>15),w=R+(S^V&(j^S))+M[15]+1236535329&4294967295,R=V+(w<<22&4294967295|w>>>10),w=S+(V^j&(R^V))+M[1]+4129170786&4294967295,S=R+(w<<5&4294967295|w>>>27),w=j+(R^V&(S^R))+M[6]+3225465664&4294967295,j=S+(w<<9&4294967295|w>>>23),w=V+(S^R&(j^S))+M[11]+643717713&4294967295,V=j+(w<<14&4294967295|w>>>18),w=R+(j^S&(V^j))+M[0]+3921069994&4294967295,R=V+(w<<20&4294967295|w>>>12),w=S+(V^j&(R^V))+M[5]+3593408605&4294967295,S=R+(w<<5&4294967295|w>>>27),w=j+(R^V&(S^R))+M[10]+38016083&4294967295,j=S+(w<<9&4294967295|w>>>23),w=V+(S^R&(j^S))+M[15]+3634488961&4294967295,V=j+(w<<14&4294967295|w>>>18),w=R+(j^S&(V^j))+M[4]+3889429448&4294967295,R=V+(w<<20&4294967295|w>>>12),w=S+(V^j&(R^V))+M[9]+568446438&4294967295,S=R+(w<<5&4294967295|w>>>27),w=j+(R^V&(S^R))+M[14]+3275163606&4294967295,j=S+(w<<9&4294967295|w>>>23),w=V+(S^R&(j^S))+M[3]+4107603335&4294967295,V=j+(w<<14&4294967295|w>>>18),w=R+(j^S&(V^j))+M[8]+1163531501&4294967295,R=V+(w<<20&4294967295|w>>>12),w=S+(V^j&(R^V))+M[13]+2850285829&4294967295,S=R+(w<<5&4294967295|w>>>27),w=j+(R^V&(S^R))+M[2]+4243563512&4294967295,j=S+(w<<9&4294967295|w>>>23),w=V+(S^R&(j^S))+M[7]+1735328473&4294967295,V=j+(w<<14&4294967295|w>>>18),w=R+(j^S&(V^j))+M[12]+2368359562&4294967295,R=V+(w<<20&4294967295|w>>>12),w=S+(R^V^j)+M[5]+4294588738&4294967295,S=R+(w<<4&4294967295|w>>>28),w=j+(S^R^V)+M[8]+2272392833&4294967295,j=S+(w<<11&4294967295|w>>>21),w=V+(j^S^R)+M[11]+1839030562&4294967295,V=j+(w<<16&4294967295|w>>>16),w=R+(V^j^S)+M[14]+4259657740&4294967295,R=V+(w<<23&4294967295|w>>>9),w=S+(R^V^j)+M[1]+2763975236&4294967295,S=R+(w<<4&4294967295|w>>>28),w=j+(S^R^V)+M[4]+1272893353&4294967295,j=S+(w<<11&4294967295|w>>>21),w=V+(j^S^R)+M[7]+4139469664&4294967295,V=j+(w<<16&4294967295|w>>>16),w=R+(V^j^S)+M[10]+3200236656&4294967295,R=V+(w<<23&4294967295|w>>>9),w=S+(R^V^j)+M[13]+681279174&4294967295,S=R+(w<<4&4294967295|w>>>28),w=j+(S^R^V)+M[0]+3936430074&4294967295,j=S+(w<<11&4294967295|w>>>21),w=V+(j^S^R)+M[3]+3572445317&4294967295,V=j+(w<<16&4294967295|w>>>16),w=R+(V^j^S)+M[6]+76029189&4294967295,R=V+(w<<23&4294967295|w>>>9),w=S+(R^V^j)+M[9]+3654602809&4294967295,S=R+(w<<4&4294967295|w>>>28),w=j+(S^R^V)+M[12]+3873151461&4294967295,j=S+(w<<11&4294967295|w>>>21),w=V+(j^S^R)+M[15]+530742520&4294967295,V=j+(w<<16&4294967295|w>>>16),w=R+(V^j^S)+M[2]+3299628645&4294967295,R=V+(w<<23&4294967295|w>>>9),w=S+(V^(R|~j))+M[0]+4096336452&4294967295,S=R+(w<<6&4294967295|w>>>26),w=j+(R^(S|~V))+M[7]+1126891415&4294967295,j=S+(w<<10&4294967295|w>>>22),w=V+(S^(j|~R))+M[14]+2878612391&4294967295,V=j+(w<<15&4294967295|w>>>17),w=R+(j^(V|~S))+M[5]+4237533241&4294967295,R=V+(w<<21&4294967295|w>>>11),w=S+(V^(R|~j))+M[12]+1700485571&4294967295,S=R+(w<<6&4294967295|w>>>26),w=j+(R^(S|~V))+M[3]+2399980690&4294967295,j=S+(w<<10&4294967295|w>>>22),w=V+(S^(j|~R))+M[10]+4293915773&4294967295,V=j+(w<<15&4294967295|w>>>17),w=R+(j^(V|~S))+M[1]+2240044497&4294967295,R=V+(w<<21&4294967295|w>>>11),w=S+(V^(R|~j))+M[8]+1873313359&4294967295,S=R+(w<<6&4294967295|w>>>26),w=j+(R^(S|~V))+M[15]+4264355552&4294967295,j=S+(w<<10&4294967295|w>>>22),w=V+(S^(j|~R))+M[6]+2734768916&4294967295,V=j+(w<<15&4294967295|w>>>17),w=R+(j^(V|~S))+M[13]+1309151649&4294967295,R=V+(w<<21&4294967295|w>>>11),w=S+(V^(R|~j))+M[4]+4149444226&4294967295,S=R+(w<<6&4294967295|w>>>26),w=j+(R^(S|~V))+M[11]+3174756917&4294967295,j=S+(w<<10&4294967295|w>>>22),w=V+(S^(j|~R))+M[2]+718787259&4294967295,V=j+(w<<15&4294967295|w>>>17),w=R+(j^(V|~S))+M[9]+3951481745&4294967295,C.g[0]=C.g[0]+S&4294967295,C.g[1]=C.g[1]+(V+(w<<21&4294967295|w>>>11))&4294967295,C.g[2]=C.g[2]+V&4294967295,C.g[3]=C.g[3]+j&4294967295}r.prototype.u=function(C,S){S===void 0&&(S=C.length);for(var R=S-this.blockSize,M=this.B,V=this.h,j=0;j<S;){if(V==0)for(;j<=R;)o(this,C,j),j+=this.blockSize;if(typeof C=="string"){for(;j<S;)if(M[V++]=C.charCodeAt(j++),V==this.blockSize){o(this,M),V=0;break}}else for(;j<S;)if(M[V++]=C[j++],V==this.blockSize){o(this,M),V=0;break}}this.h=V,this.o+=S},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var S=1;S<C.length-8;++S)C[S]=0;var R=8*this.o;for(S=C.length-8;S<C.length;++S)C[S]=R&255,R/=256;for(this.u(C),C=Array(16),S=R=0;4>S;++S)for(var M=0;32>M;M+=8)C[R++]=this.g[S]>>>M&255;return C};function u(C,S){var R=p;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=S(C)}function d(C,S){this.h=S;for(var R=[],M=!0,V=C.length-1;0<=V;V--){var j=C[V]|0;M&&j==S||(R[V]=j,M=!1)}this.g=R}var p={};function y(C){return-128<=C&&128>C?u(C,function(S){return new d([S|0],0>S?-1:0)}):new d([C|0],0>C?-1:0)}function _(C){if(isNaN(C)||!isFinite(C))return I;if(0>C)return K(_(-C));for(var S=[],R=1,M=0;C>=R;M++)S[M]=C/R|0,R*=4294967296;return new d(S,0)}function T(C,S){if(C.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(C.charAt(0)=="-")return K(T(C.substring(1),S));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=_(Math.pow(S,8)),M=I,V=0;V<C.length;V+=8){var j=Math.min(8,C.length-V),w=parseInt(C.substring(V,V+j),S);8>j?(j=_(Math.pow(S,j)),M=M.j(j).add(_(w))):(M=M.j(R),M=M.add(_(w)))}return M}var I=y(0),N=y(1),O=y(16777216);s=d.prototype,s.m=function(){if(te(this))return-K(this).m();for(var C=0,S=1,R=0;R<this.g.length;R++){var M=this.i(R);C+=(0<=M?M:4294967296+M)*S,S*=4294967296}return C},s.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(Q(this))return"0";if(te(this))return"-"+K(this).toString(C);for(var S=_(Math.pow(C,6)),R=this,M="";;){var V=ge(R,S).g;R=se(R,V.j(S));var j=((0<R.g.length?R.g[0]:R.h)>>>0).toString(C);if(R=V,Q(R))return j+M;for(;6>j.length;)j="0"+j;M=j+M}},s.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function Q(C){if(C.h!=0)return!1;for(var S=0;S<C.g.length;S++)if(C.g[S]!=0)return!1;return!0}function te(C){return C.h==-1}s.l=function(C){return C=se(this,C),te(C)?-1:Q(C)?0:1};function K(C){for(var S=C.g.length,R=[],M=0;M<S;M++)R[M]=~C.g[M];return new d(R,~C.h).add(N)}s.abs=function(){return te(this)?K(this):this},s.add=function(C){for(var S=Math.max(this.g.length,C.g.length),R=[],M=0,V=0;V<=S;V++){var j=M+(this.i(V)&65535)+(C.i(V)&65535),w=(j>>>16)+(this.i(V)>>>16)+(C.i(V)>>>16);M=w>>>16,j&=65535,w&=65535,R[V]=w<<16|j}return new d(R,R[R.length-1]&-2147483648?-1:0)};function se(C,S){return C.add(K(S))}s.j=function(C){if(Q(this)||Q(C))return I;if(te(this))return te(C)?K(this).j(K(C)):K(K(this).j(C));if(te(C))return K(this.j(K(C)));if(0>this.l(O)&&0>C.l(O))return _(this.m()*C.m());for(var S=this.g.length+C.g.length,R=[],M=0;M<2*S;M++)R[M]=0;for(M=0;M<this.g.length;M++)for(var V=0;V<C.g.length;V++){var j=this.i(M)>>>16,w=this.i(M)&65535,ie=C.i(V)>>>16,be=C.i(V)&65535;R[2*M+2*V]+=w*be,he(R,2*M+2*V),R[2*M+2*V+1]+=j*be,he(R,2*M+2*V+1),R[2*M+2*V+1]+=w*ie,he(R,2*M+2*V+1),R[2*M+2*V+2]+=j*ie,he(R,2*M+2*V+2)}for(M=0;M<S;M++)R[M]=R[2*M+1]<<16|R[2*M];for(M=S;M<2*S;M++)R[M]=0;return new d(R,0)};function he(C,S){for(;(C[S]&65535)!=C[S];)C[S+1]+=C[S]>>>16,C[S]&=65535,S++}function ne(C,S){this.g=C,this.h=S}function ge(C,S){if(Q(S))throw Error("division by zero");if(Q(C))return new ne(I,I);if(te(C))return S=ge(K(C),S),new ne(K(S.g),K(S.h));if(te(S))return S=ge(C,K(S)),new ne(K(S.g),S.h);if(30<C.g.length){if(te(C)||te(S))throw Error("slowDivide_ only works with positive integers.");for(var R=N,M=S;0>=M.l(C);)R=ue(R),M=ue(M);var V=Z(R,1),j=Z(M,1);for(M=Z(M,2),R=Z(R,2);!Q(M);){var w=j.add(M);0>=w.l(C)&&(V=V.add(R),j=w),M=Z(M,1),R=Z(R,1)}return S=se(C,V.j(S)),new ne(V,S)}for(V=I;0<=C.l(S);){for(R=Math.max(1,Math.floor(C.m()/S.m())),M=Math.ceil(Math.log(R)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),j=_(R),w=j.j(S);te(w)||0<w.l(C);)R-=M,j=_(R),w=j.j(S);Q(j)&&(j=N),V=V.add(j),C=se(C,w)}return new ne(V,C)}s.A=function(C){return ge(this,C).h},s.and=function(C){for(var S=Math.max(this.g.length,C.g.length),R=[],M=0;M<S;M++)R[M]=this.i(M)&C.i(M);return new d(R,this.h&C.h)},s.or=function(C){for(var S=Math.max(this.g.length,C.g.length),R=[],M=0;M<S;M++)R[M]=this.i(M)|C.i(M);return new d(R,this.h|C.h)},s.xor=function(C){for(var S=Math.max(this.g.length,C.g.length),R=[],M=0;M<S;M++)R[M]=this.i(M)^C.i(M);return new d(R,this.h^C.h)};function ue(C){for(var S=C.g.length+1,R=[],M=0;M<S;M++)R[M]=C.i(M)<<1|C.i(M-1)>>>31;return new d(R,C.h)}function Z(C,S){var R=S>>5;S%=32;for(var M=C.g.length-R,V=[],j=0;j<M;j++)V[j]=0<S?C.i(j+R)>>>S|C.i(j+R+1)<<32-S:C.i(j+R);return new d(V,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,VT=r,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=_,d.fromString=T,Fs=d}).apply(typeof Lv<"u"?Lv:typeof self<"u"?self:typeof window<"u"?window:{});var qc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kT,kl,jT,Jc,Rm,PT,LT,UT;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,v){return c==Array.prototype||c==Object.prototype||(c[g]=v.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof qc=="object"&&qc];for(var g=0;g<c.length;++g){var v=c[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function o(c,g){if(g)e:{var v=r;c=c.split(".");for(var b=0;b<c.length-1;b++){var L=c[b];if(!(L in v))break e;v=v[L]}c=c[c.length-1],b=v[c],g=g(b),g!=b&&g!=null&&e(v,c,{configurable:!0,writable:!0,value:g})}}function u(c,g){c instanceof String&&(c+="");var v=0,b=!1,L={next:function(){if(!b&&v<c.length){var F=v++;return{value:g(F,c[F]),done:!1}}return b=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}o("Array.prototype.values",function(c){return c||function(){return u(this,function(g,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},p=this||self;function y(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function _(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function T(c,g,v){return c.call.apply(c.bind,arguments)}function I(c,g,v){if(!c)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,b),c.apply(g,L)}}return function(){return c.apply(g,arguments)}}function N(c,g,v){return N=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:I,N.apply(null,arguments)}function O(c,g){var v=Array.prototype.slice.call(arguments,1);return function(){var b=v.slice();return b.push.apply(b,arguments),c.apply(this,b)}}function Q(c,g){function v(){}v.prototype=g.prototype,c.aa=g.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(b,L,F){for(var re=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)re[Ue-2]=arguments[Ue];return g.prototype[L].apply(b,re)}}function te(c){const g=c.length;if(0<g){const v=Array(g);for(let b=0;b<g;b++)v[b]=c[b];return v}return[]}function K(c,g){for(let v=1;v<arguments.length;v++){const b=arguments[v];if(y(b)){const L=c.length||0,F=b.length||0;c.length=L+F;for(let re=0;re<F;re++)c[L+re]=b[re]}else c.push(b)}}class se{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function he(c){return/^[\s\xa0]*$/.test(c)}function ne(){var c=p.navigator;return c&&(c=c.userAgent)?c:""}function ge(c){return ge[" "](c),c}ge[" "]=function(){};var ue=ne().indexOf("Gecko")!=-1&&!(ne().toLowerCase().indexOf("webkit")!=-1&&ne().indexOf("Edge")==-1)&&!(ne().indexOf("Trident")!=-1||ne().indexOf("MSIE")!=-1)&&ne().indexOf("Edge")==-1;function Z(c,g,v){for(const b in c)g.call(v,c[b],b,c)}function C(c,g){for(const v in c)g.call(void 0,c[v],v,c)}function S(c){const g={};for(const v in c)g[v]=c[v];return g}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(c,g){let v,b;for(let L=1;L<arguments.length;L++){b=arguments[L];for(v in b)c[v]=b[v];for(let F=0;F<R.length;F++)v=R[F],Object.prototype.hasOwnProperty.call(b,v)&&(c[v]=b[v])}}function V(c){var g=1;c=c.split(":");const v=[];for(;0<g&&c.length;)v.push(c.shift()),g--;return c.length&&v.push(c.join(":")),v}function j(c){p.setTimeout(()=>{throw c},0)}function w(){var c=Le;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class ie{constructor(){this.h=this.g=null}add(g,v){const b=be.get();b.set(g,v),this.h?this.h.next=b:this.g=b,this.h=b}}var be=new se(()=>new G,c=>c.reset());class G{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,pe=!1,Le=new ie,D=()=>{const c=p.Promise.resolve(void 0);ae=()=>{c.then(ee)}};var ee=()=>{for(var c;c=w();){try{c.h.call(c.g)}catch(v){j(v)}var g=be;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}pe=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var ce=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};p.addEventListener("test",v,g),p.removeEventListener("test",v,g)}catch{}return c})();function De(c,g){if(z.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,b=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(ue){e:{try{ge(g.nodeName);var L=!0;break e}catch{}L=!1}L||(g=null)}}else v=="mouseover"?g=c.fromElement:v=="mouseout"&&(g=c.toElement);this.relatedTarget=g,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:we[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&De.aa.h.call(this)}}Q(De,z);var we={2:"touch",3:"pen",4:"mouse"};De.prototype.h=function(){De.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Mt="closure_listenable_"+(1e6*Math.random()|0),nt=0;function Jn(c,g,v,b,L){this.listener=c,this.proxy=null,this.src=g,this.type=v,this.capture=!!b,this.ha=L,this.key=++nt,this.da=this.fa=!1}function ls(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ii(c){this.src=c,this.g={},this.h=0}Ii.prototype.add=function(c,g,v,b,L){var F=c.toString();c=this.g[F],c||(c=this.g[F]=[],this.h++);var re=ar(c,g,b,L);return-1<re?(g=c[re],v||(g.fa=!1)):(g=new Jn(g,this.src,F,!!b,L),g.fa=v,c.push(g)),g};function rr(c,g){var v=g.type;if(v in c.g){var b=c.g[v],L=Array.prototype.indexOf.call(b,g,void 0),F;(F=0<=L)&&Array.prototype.splice.call(b,L,1),F&&(ls(g),c.g[v].length==0&&(delete c.g[v],c.h--))}}function ar(c,g,v,b){for(var L=0;L<c.length;++L){var F=c[L];if(!F.da&&F.listener==g&&F.capture==!!v&&F.ha==b)return L}return-1}var or="closure_lm_"+(1e6*Math.random()|0),To={};function yu(c,g,v,b,L){if(Array.isArray(g)){for(var F=0;F<g.length;F++)yu(c,g[F],v,b,L);return null}return v=_u(v),c&&c[Mt]?c.K(g,v,_(b)?!!b.capture:!1,L):wn(c,g,v,!1,b,L)}function wn(c,g,v,b,L,F){if(!g)throw Error("Invalid event type");var re=_(L)?!!L.capture:!!L,Ue=sa(c);if(Ue||(c[or]=Ue=new Ii(c)),v=Ue.add(g,v,b,re,F),v.proxy)return v;if(b=Xh(),v.proxy=b,b.src=c,b.listener=v,c.addEventListener)ce||(L=re),L===void 0&&(L=!1),c.addEventListener(g.toString(),b,L);else if(c.attachEvent)c.attachEvent(lr(g.toString()),b);else if(c.addListener&&c.removeListener)c.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Xh(){function c(v){return g.call(c.src,c.listener,v)}const g=$h;return c}function Ao(c,g,v,b,L){if(Array.isArray(g))for(var F=0;F<g.length;F++)Ao(c,g[F],v,b,L);else b=_(b)?!!b.capture:!!b,v=_u(v),c&&c[Mt]?(c=c.i,g=String(g).toString(),g in c.g&&(F=c.g[g],v=ar(F,v,b,L),-1<v&&(ls(F[v]),Array.prototype.splice.call(F,v,1),F.length==0&&(delete c.g[g],c.h--)))):c&&(c=sa(c))&&(g=c.g[g.toString()],c=-1,g&&(c=ar(g,v,b,L)),(v=-1<c?g[c]:null)&&ia(v))}function ia(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[Mt])rr(g.i,c);else{var v=c.type,b=c.proxy;g.removeEventListener?g.removeEventListener(v,b,c.capture):g.detachEvent?g.detachEvent(lr(v),b):g.addListener&&g.removeListener&&g.removeListener(b),(v=sa(g))?(rr(v,c),v.h==0&&(v.src=null,g[or]=null)):ls(c)}}}function lr(c){return c in To?To[c]:To[c]="on"+c}function $h(c,g){if(c.da)c=!0;else{g=new De(g,this);var v=c.listener,b=c.ha||c.src;c.fa&&ia(c),c=v.call(b,g)}return c}function sa(c){return c=c[or],c instanceof Ii?c:null}var bo="__closure_events_fn_"+(1e9*Math.random()>>>0);function _u(c){return typeof c=="function"?c:(c[bo]||(c[bo]=function(g){return c.handleEvent(g)}),c[bo])}function ct(){oe.call(this),this.i=new Ii(this),this.M=this,this.F=null}Q(ct,oe),ct.prototype[Mt]=!0,ct.prototype.removeEventListener=function(c,g,v,b){Ao(this,c,g,v,b)};function Ye(c,g){var v,b=c.F;if(b)for(v=[];b;b=b.F)v.push(b);if(c=c.M,b=g.type||g,typeof g=="string")g=new z(g,c);else if(g instanceof z)g.target=g.target||c;else{var L=g;g=new z(b,c),M(g,L)}if(L=!0,v)for(var F=v.length-1;0<=F;F--){var re=g.g=v[F];L=pn(re,b,!0,g)&&L}if(re=g.g=c,L=pn(re,b,!0,g)&&L,L=pn(re,b,!1,g)&&L,v)for(F=0;F<v.length;F++)re=g.g=v[F],L=pn(re,b,!1,g)&&L}ct.prototype.N=function(){if(ct.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var v=c.g[g],b=0;b<v.length;b++)ls(v[b]);delete c.g[g],c.h--}}this.F=null},ct.prototype.K=function(c,g,v,b){return this.i.add(String(c),g,!1,v,b)},ct.prototype.L=function(c,g,v,b){return this.i.add(String(c),g,!0,v,b)};function pn(c,g,v,b){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var L=!0,F=0;F<g.length;++F){var re=g[F];if(re&&!re.da&&re.capture==v){var Ue=re.listener,Nt=re.ha||re.src;re.fa&&rr(c.i,re),L=Ue.call(Nt,b)!==!1&&L}}return L&&!b.defaultPrevented}function Yt(c,g,v){if(typeof c=="function")v&&(c=N(c,v));else if(c&&typeof c.handleEvent=="function")c=N(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:p.setTimeout(c,g||0)}function vu(c){c.g=Yt(()=>{c.g=null,c.i&&(c.i=!1,vu(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class Wh extends oe{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:vu(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ur(c){oe.call(this),this.h=c,this.g={}}Q(ur,oe);var cr=[];function hr(c){Z(c.g,function(g,v){this.g.hasOwnProperty(v)&&ia(g)},c),c.g={}}ur.prototype.N=function(){ur.aa.N.call(this),hr(this)},ur.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qn=p.JSON.stringify,ra=p.JSON.parse,dr=class{stringify(c){return p.JSON.stringify(c,void 0)}parse(c){return p.JSON.parse(c,void 0)}};function So(){}So.prototype.h=null;function wo(c){return c.h||(c.h=c.i())}function Ro(){}var Ni={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ci(){z.call(this,"d")}Q(Ci,z);function Io(){z.call(this,"c")}Q(Io,z);var ei={},No=null;function us(){return No=No||new ct}ei.La="serverreachability";function aa(c){z.call(this,ei.La,c)}Q(aa,z);function cs(c){const g=us();Ye(g,new aa(g))}ei.STAT_EVENT="statevent";function Eu(c,g){z.call(this,ei.STAT_EVENT,c),this.stat=g}Q(Eu,z);function at(c){const g=us();Ye(g,new Eu(g,c))}ei.Ma="timingevent";function It(c,g){z.call(this,ei.Ma,c),this.size=g}Q(It,z);function Et(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){c()},g)}function Rn(){this.g=!0}Rn.prototype.xa=function(){this.g=!1};function Co(c,g,v,b,L,F){c.info(function(){if(c.g)if(F)for(var re="",Ue=F.split("&"),Nt=0;Nt<Ue.length;Nt++){var ze=Ue[Nt].split("=");if(1<ze.length){var kt=ze[0];ze=ze[1];var Ct=kt.split("_");re=2<=Ct.length&&Ct[1]=="type"?re+(kt+"="+ze+"&"):re+(kt+"=redacted&")}}else re=null;else re=F;return"XMLHTTP REQ ("+b+") [attempt "+L+"]: "+g+`
`+v+`
`+re})}function Zh(c,g,v,b,L,F,re){c.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+L+"]: "+g+`
`+v+`
`+F+" "+re})}function hs(c,g,v,b){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+fr(c,v)+(b?" "+b:"")})}function Tu(c,g){c.info(function(){return"TIMEOUT: "+g})}Rn.prototype.info=function(){};function fr(c,g){if(!c.g)return g;if(!g)return null;try{var v=JSON.parse(g);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var b=v[c];if(!(2>b.length)){var L=b[1];if(Array.isArray(L)&&!(1>L.length)){var F=L[0];if(F!="noop"&&F!="stop"&&F!="close")for(var re=1;re<L.length;re++)L[re]=""}}}}return qn(v)}catch{return g}}var ds={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ti;function ni(){}Q(ni,So),ni.prototype.g=function(){return new XMLHttpRequest},ni.prototype.i=function(){return{}},ti=new ni;function sn(c,g,v,b){this.j=c,this.i=g,this.l=v,this.R=b||1,this.U=new ur(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ft}function ft(){this.i=null,this.g="",this.h=!1}var xo={},oa={};function Hn(c,g,v){c.L=1,c.v=_r(gn(g)),c.m=v,c.P=!0,Di(c,null)}function Di(c,g){c.F=Date.now(),mr(c),c.A=gn(c.v);var v=c.A,b=c.R;Array.isArray(b)||(b=[String(b)]),jo(v.i,"t",b),c.C=0,v=c.j.J,c.h=new ft,c.g=Pu(c.j,v?g:null,!c.m),0<c.O&&(c.M=new Wh(N(c.Y,c,c.g),c.O)),g=c.U,v=c.g,b=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(cr[0]=L.toString()),L=cr);for(var F=0;F<L.length;F++){var re=yu(v,L[F],b||g.handleEvent,!1,g.h||g);if(!re)break;g.g[re.key]=re}g=c.H?S(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),cs(),Co(c.i,c.u,c.A,c.l,c.R,c.m)}sn.prototype.ca=function(c){c=c.target;const g=this.M;g&&xn(c)==3?g.j():this.Y(c)},sn.prototype.Y=function(c){try{if(c==this.g)e:{const Ct=xn(this.g);var g=this.g.Ba();const Ui=this.g.Z();if(!(3>Ct)&&(Ct!=3||this.g&&(this.h.h||this.g.oa()||Cu(this.g)))){this.J||Ct!=4||g==7||(g==8||0>=Ui?cs(3):cs(2)),fs(this);var v=this.g.Z();this.X=v;t:if(Au(this)){var b=Cu(this.g);c="";var L=b.length,F=xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zt(this),ii(this);var re="";break t}this.h.i=new p.TextDecoder}for(g=0;g<L;g++)this.h.h=!0,c+=this.h.i.decode(b[g],{stream:!(F&&g==L-1)});b.length=0,this.h.g+=c,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=v==200,Zh(this.i,this.u,this.A,this.l,this.R,Ct,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Ue,Nt=this.g;if((Ue=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!he(Ue)){var ze=Ue;break t}}ze=null}if(v=ze)hs(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pr(this,v);else{this.o=!1,this.s=3,at(12),zt(this),ii(this);break e}}if(this.P){v=!0;let Bt;for(;!this.J&&this.C<re.length;)if(Bt=bu(this,re),Bt==oa){Ct==4&&(this.s=4,at(14),v=!1),hs(this.i,this.l,null,"[Incomplete Response]");break}else if(Bt==xo){this.s=4,at(15),hs(this.i,this.l,re,"[Invalid Chunk]"),v=!1;break}else hs(this.i,this.l,Bt,null),pr(this,Bt);if(Au(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ct!=4||re.length!=0||this.h.h||(this.s=1,at(16),v=!1),this.o=this.o&&v,!v)hs(this.i,this.l,re,"[Invalid Chunked Response]"),zt(this),ii(this);else if(0<re.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),Rr(kt),kt.M=!0,at(11))}}else hs(this.i,this.l,re,null),pr(this,re);Ct==4&&zt(this),this.o&&!this.J&&(Ct==4?Vu(this.j,this):(this.o=!1,mr(this)))}else id(this.g),v==400&&0<re.indexOf("Unknown SID")?(this.s=3,at(12)):(this.s=0,at(13)),zt(this),ii(this)}}}catch{}finally{}};function Au(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function bu(c,g){var v=c.C,b=g.indexOf(`
`,v);return b==-1?oa:(v=Number(g.substring(v,b)),isNaN(v)?xo:(b+=1,b+v>g.length?oa:(g=g.slice(b,b+v),c.C=b+v,g)))}sn.prototype.cancel=function(){this.J=!0,zt(this)};function mr(c){c.S=Date.now()+c.I,Su(c,c.I)}function Su(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Et(N(c.ba,c),g)}function fs(c){c.B&&(p.clearTimeout(c.B),c.B=null)}sn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Tu(this.i,this.A),this.L!=2&&(cs(),at(17)),zt(this),this.s=2,ii(this)):Su(this,this.S-c)};function ii(c){c.j.G==0||c.J||Vu(c.j,c)}function zt(c){fs(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,hr(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function pr(c,g){try{var v=c.j;if(v.G!=0&&(v.g==c||Do(v.h,c))){if(!c.K&&Do(v.h,c)&&v.G==3){try{var b=v.Da.g.parse(g)}catch{b=null}if(Array.isArray(b)&&b.length==3){var L=b;if(L[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)va(v),ya(v);else break e;Bo(v),at(18)}}else v.za=L[1],0<v.za-v.T&&37500>L[2]&&v.F&&v.v==0&&!v.C&&(v.C=Et(N(v.Za,v),6e3));if(1>=ua(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Li(v,11)}else if((c.K||v.g==c)&&va(v),!he(g))for(L=v.Da.g.parse(g),g=0;g<L.length;g++){let ze=L[g];if(v.T=ze[0],ze=ze[1],v.G==2)if(ze[0]=="c"){v.K=ze[1],v.ia=ze[2];const kt=ze[3];kt!=null&&(v.la=kt,v.j.info("VER="+v.la));const Ct=ze[4];Ct!=null&&(v.Aa=Ct,v.j.info("SVER="+v.Aa));const Ui=ze[5];Ui!=null&&typeof Ui=="number"&&0<Ui&&(b=1.5*Ui,v.L=b,v.j.info("backChannelRequestTimeoutMs_="+b)),b=v;const Bt=c.g;if(Bt){const ci=Bt.g?Bt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ci){var F=b.h;F.g||ci.indexOf("spdy")==-1&&ci.indexOf("quic")==-1&&ci.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(ca(F,F.h),F.h=null))}if(b.D){const Ho=Bt.g?Bt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ho&&(b.ya=Ho,We(b.I,b.D,Ho))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),b=v;var re=c;if(b.qa=ju(b,b.J?b.ia:null,b.W),re.K){rn(b.h,re);var Ue=re,Nt=b.L;Nt&&(Ue.I=Nt),Ue.B&&(fs(Ue),mr(Ue)),b.g=re}else Ou(b);0<v.i.length&&_a(v)}else ze[0]!="stop"&&ze[0]!="close"||Li(v,7);else v.G==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?Li(v,7):Uo(v):ze[0]!="noop"&&v.l&&v.l.ta(ze),v.v=0)}}cs(4)}catch{}}var wu=class{constructor(c,g){this.g=c,this.map=g}};function Oi(c){this.l=c||10,p.PerformanceNavigationTiming?(c=p.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function la(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ua(c){return c.h?1:c.g?c.g.size:0}function Do(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function ca(c,g){c.g?c.g.add(g):c.h=g}function rn(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Oi.prototype.cancel=function(){if(this.i=Oo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Oo(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const v of c.g.values())g=g.concat(v.D);return g}return te(c.i)}function Jh(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(y(c)){for(var g=[],v=c.length,b=0;b<v;b++)g.push(c[b]);return g}g=[],v=0;for(b in c)g[v++]=c[b];return g}function ha(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(y(c)||typeof c=="string"){var g=[];c=c.length;for(var v=0;v<c;v++)g.push(v);return g}g=[],v=0;for(const b in c)g[v++]=b;return g}}}function Mo(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(y(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var v=ha(c),b=Jh(c),L=b.length,F=0;F<L;F++)g.call(void 0,b[F],v&&v[F],c)}var gr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ed(c,g){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var b=c[v].indexOf("="),L=null;if(0<=b){var F=c[v].substring(0,b);L=c[v].substring(b+1)}else F=c[v];g(F,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Tt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Tt){this.h=c.h,yr(this,c.j),this.o=c.o,this.g=c.g,ms(this,c.s),this.l=c.l;var g=c.i,v=new Vi;v.i=g.i,g.g&&(v.g=new Map(g.g),v.h=g.h),Mi(this,v),this.m=c.m}else c&&(g=String(c).match(gr))?(this.h=!1,yr(this,g[1]||"",!0),this.o=In(g[2]||""),this.g=In(g[3]||"",!0),ms(this,g[4]),this.l=In(g[5]||"",!0),Mi(this,g[6]||"",!0),this.m=In(g[7]||"")):(this.h=!1,this.i=new Vi(null,this.h))}Tt.prototype.toString=function(){var c=[],g=this.j;g&&c.push(vr(g,Vo,!0),":");var v=this.g;return(v||g=="file")&&(c.push("//"),(g=this.o)&&c.push(vr(g,Vo,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(vr(v,v.charAt(0)=="/"?td:ko,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",vr(v,da)),c.join("")};function gn(c){return new Tt(c)}function yr(c,g,v){c.j=v?In(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function ms(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function Mi(c,g,v){g instanceof Vi?(c.i=g,Iu(c.i,c.h)):(v||(g=vr(g,nd)),c.i=new Vi(g,c.h))}function We(c,g,v){c.i.set(g,v)}function _r(c){return We(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function In(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function vr(c,g,v){return typeof c=="string"?(c=encodeURI(c).replace(g,Ru),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Ru(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Vo=/[#\/\?@]/g,ko=/[#\?:]/g,td=/[#\?]/g,nd=/[#\?@]/g,da=/#/g;function Vi(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function Nn(c){c.g||(c.g=new Map,c.h=0,c.i&&ed(c.i,function(g,v){c.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}s=Vi.prototype,s.add=function(c,g){Nn(this),this.i=null,c=si(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(g),this.h+=1,this};function ki(c,g){Nn(c),g=si(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function ji(c,g){return Nn(c),g=si(c,g),c.g.has(g)}s.forEach=function(c,g){Nn(this),this.g.forEach(function(v,b){v.forEach(function(L){c.call(g,L,b,this)},this)},this)},s.na=function(){Nn(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),v=[];for(let b=0;b<g.length;b++){const L=c[b];for(let F=0;F<L.length;F++)v.push(g[b])}return v},s.V=function(c){Nn(this);let g=[];if(typeof c=="string")ji(this,c)&&(g=g.concat(this.g.get(si(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)g=g.concat(c[v])}return g},s.set=function(c,g){return Nn(this),this.i=null,c=si(this,c),ji(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},s.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function jo(c,g,v){ki(c,g),0<v.length&&(c.i=null,c.g.set(si(c,g),te(v)),c.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var v=0;v<g.length;v++){var b=g[v];const F=encodeURIComponent(String(b)),re=this.V(b);for(b=0;b<re.length;b++){var L=F;re[b]!==""&&(L+="="+encodeURIComponent(String(re[b]))),c.push(L)}}return this.i=c.join("&")};function si(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function Iu(c,g){g&&!c.j&&(Nn(c),c.i=null,c.g.forEach(function(v,b){var L=b.toLowerCase();b!=L&&(ki(this,b),jo(this,L,v))},c)),c.j=g}function Er(c,g){const v=new Rn;if(p.Image){const b=new Image;b.onload=O(Cn,v,"TestLoadImage: loaded",!0,g,b),b.onerror=O(Cn,v,"TestLoadImage: error",!1,g,b),b.onabort=O(Cn,v,"TestLoadImage: abort",!1,g,b),b.ontimeout=O(Cn,v,"TestLoadImage: timeout",!1,g,b),p.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=c}else g(!1)}function Fn(c,g){const v=new Rn,b=new AbortController,L=setTimeout(()=>{b.abort(),Cn(v,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:b.signal}).then(F=>{clearTimeout(L),F.ok?Cn(v,"TestPingServer: ok",!0,g):Cn(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),Cn(v,"TestPingServer: error",!1,g)})}function Cn(c,g,v,b,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),b(v)}catch{}}function Tr(){this.g=new dr}function ri(c,g,v){const b=v||"";try{Mo(c,function(L,F){let re=L;_(L)&&(re=qn(L)),g.push(b+F+"="+encodeURIComponent(re))})}catch(L){throw g.push(b+"type="+encodeURIComponent("_badmap")),L}}function ps(c){this.l=c.Ub||null,this.j=c.eb||!1}Q(ps,So),ps.prototype.g=function(){return new Pi(this.l,this.j)},ps.prototype.i=(function(c){return function(){return c}})({});function Pi(c,g){ct.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Q(Pi,ct),s=Pi.prototype,s.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,oi(this)},s.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||p).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ai(this)),this.readyState=0},s.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,oi(this)),this.g&&(this.readyState=3,oi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Po(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Po(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}s.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?ai(this):oi(this),this.readyState==3&&Po(this)}},s.Ra=function(c){this.g&&(this.response=this.responseText=c,ai(this))},s.Qa=function(c){this.g&&(this.response=c,ai(this))},s.ga=function(){this.g&&ai(this)};function ai(c){c.readyState=4,c.l=null,c.j=null,c.v=null,oi(c)}s.setRequestHeader=function(c,g){this.u.append(c,g)},s.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=g.next();return c.join(`\r
`)};function oi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Pi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Lo(c){let g="";return Z(c,function(v,b){g+=b,g+=":",g+=v,g+=`\r
`}),g}function Vt(c,g,v){e:{for(b in v){var b=!1;break e}b=!0}b||(v=Lo(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):We(c,g,v))}function Qe(c){ct.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Q(Qe,ct);var fa=/^https?$/i,Ar=["POST","PUT"];s=Qe.prototype,s.Ha=function(c){this.J=c},s.ea=function(c,g,v,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ti.g(),this.v=this.o?wo(this.o):wo(ti),this.g.onreadystatechange=N(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(F){Nu(this,F);return}if(c=v||"",v=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var L in b)v.set(L,b[L]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const F of b.keys())v.set(F,b.get(F));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(v.keys()).find(F=>F.toLowerCase()=="content-type"),L=p.FormData&&c instanceof p.FormData,!(0<=Array.prototype.indexOf.call(Ar,g,void 0))||b||L||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,re]of v)this.g.setRequestHeader(F,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{br(this),this.u=!0,this.g.send(c),this.u=!1}catch(F){Nu(this,F)}};function Nu(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,ma(c),li(c)}function ma(c){c.A||(c.A=!0,Ye(c,"complete"),Ye(c,"error"))}s.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ye(this,"complete"),Ye(this,"abort"),li(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),li(this,!0)),Qe.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?pa(this):this.bb())},s.bb=function(){pa(this)};function pa(c){if(c.h&&typeof d<"u"&&(!c.v[1]||xn(c)!=4||c.Z()!=2)){if(c.u&&xn(c)==4)Yt(c.Ea,0,c);else if(Ye(c,"readystatechange"),xn(c)==4){c.h=!1;try{const re=c.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var b;if(b=re===0){var L=String(c.D).match(gr)[1]||null;!L&&p.self&&p.self.location&&(L=p.self.location.protocol.slice(0,-1)),b=!fa.test(L?L.toLowerCase():"")}v=b}if(v)Ye(c,"complete"),Ye(c,"success");else{c.m=6;try{var F=2<xn(c)?c.g.statusText:""}catch{F=""}c.l=F+" ["+c.Z()+"]",ma(c)}}finally{li(c)}}}}function li(c,g){if(c.g){br(c);const v=c.g,b=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||Ye(c,"ready");try{v.onreadystatechange=b}catch{}}}function br(c){c.I&&(p.clearTimeout(c.I),c.I=null)}s.isActive=function(){return!!this.g};function xn(c){return c.g?c.g.readyState:0}s.Z=function(){try{return 2<xn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),ra(g)}};function Cu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function id(c){const g={};c=(c.g&&2<=xn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<c.length;b++){if(he(c[b]))continue;var v=V(c[b]);const L=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const F=g[L]||[];g[L]=F,F.push(v)}C(g,function(b){return b.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sr(c,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||g}function ga(c){this.Aa=0,this.i=[],this.j=new Rn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Sr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Sr("baseRetryDelayMs",5e3,c),this.cb=Sr("retryDelaySeedMs",1e4,c),this.Wa=Sr("forwardChannelMaxRetries",2,c),this.wa=Sr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Oi(c&&c.concurrentRequestLimit),this.Da=new Tr,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=ga.prototype,s.la=8,s.G=1,s.connect=function(c,g,v,b){at(0),this.W=c,this.H=g||{},v&&b!==void 0&&(this.H.OSID=v,this.H.OAID=b),this.F=this.X,this.I=ju(this,null,this.W),_a(this)};function Uo(c){if(xu(c),c.G==3){var g=c.U++,v=gn(c.I);if(We(v,"SID",c.K),We(v,"RID",g),We(v,"TYPE","terminate"),wr(c,v),g=new sn(c,c.j,g),g.L=2,g.v=_r(gn(v)),v=!1,p.navigator&&p.navigator.sendBeacon)try{v=p.navigator.sendBeacon(g.v.toString(),"")}catch{}!v&&p.Image&&(new Image().src=g.v,v=!0),v||(g.g=Pu(g.j,null),g.g.ea(g.v)),g.F=Date.now(),mr(g)}ku(c)}function ya(c){c.g&&(Rr(c),c.g.cancel(),c.g=null)}function xu(c){ya(c),c.u&&(p.clearTimeout(c.u),c.u=null),va(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&p.clearTimeout(c.s),c.s=null)}function _a(c){if(!la(c.h)&&!c.s){c.s=!0;var g=c.Ga;ae||D(),pe||(ae(),pe=!0),Le.add(g,c),c.B=0}}function sd(c,g){return ua(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Et(N(c.Ga,c,g),qo(c,c.B)),c.B++,!0)}s.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const L=new sn(this,this.j,c);let F=this.o;if(this.S&&(F?(F=S(F),M(F,this.S)):F=this.S),this.m!==null||this.O||(L.H=F,F=null),this.P)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var b=this.i[v];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(g+=b,4096<g){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=Du(this,L,g),v=gn(this.I),We(v,"RID",c),We(v,"CVER",22),this.D&&We(v,"X-HTTP-Session-Id",this.D),wr(this,v),F&&(this.O?g="headers="+encodeURIComponent(String(Lo(F)))+"&"+g:this.m&&Vt(v,this.m,F)),ca(this.h,L),this.Ua&&We(v,"TYPE","init"),this.P?(We(v,"$req",g),We(v,"SID","null"),L.T=!0,Hn(L,v,null)):Hn(L,v,g),this.G=2}}else this.G==3&&(c?zo(this,c):this.i.length==0||la(this.h)||zo(this))};function zo(c,g){var v;g?v=g.l:v=c.U++;const b=gn(c.I);We(b,"SID",c.K),We(b,"RID",v),We(b,"AID",c.T),wr(c,b),c.m&&c.o&&Vt(b,c.m,c.o),v=new sn(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),g&&(c.i=g.D.concat(c.i)),g=Du(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),ca(c.h,v),Hn(v,b,g)}function wr(c,g){c.H&&Z(c.H,function(v,b){We(g,b,v)}),c.l&&Mo({},function(v,b){We(g,b,v)})}function Du(c,g,v){v=Math.min(c.i.length,v);var b=c.l?N(c.l.Na,c.l,c):null;e:{var L=c.i;let F=-1;for(;;){const re=["count="+v];F==-1?0<v?(F=L[0].g,re.push("ofs="+F)):F=0:re.push("ofs="+F);let Ue=!0;for(let Nt=0;Nt<v;Nt++){let ze=L[Nt].g;const kt=L[Nt].map;if(ze-=F,0>ze)F=Math.max(0,L[Nt].g-100),Ue=!1;else try{ri(kt,re,"req"+ze+"_")}catch{b&&b(kt)}}if(Ue){b=re.join("&");break e}}}return c=c.i.splice(0,v),g.D=c,b}function Ou(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;ae||D(),pe||(ae(),pe=!0),Le.add(g,c),c.v=0}}function Bo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Et(N(c.Fa,c),qo(c,c.v)),c.v++,!0)}s.Fa=function(){if(this.u=null,Mu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Et(N(this.ab,this),c)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,at(10),ya(this),Mu(this))};function Rr(c){c.A!=null&&(p.clearTimeout(c.A),c.A=null)}function Mu(c){c.g=new sn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=gn(c.qa);We(g,"RID","rpc"),We(g,"SID",c.K),We(g,"AID",c.T),We(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&We(g,"TO",c.ja),We(g,"TYPE","xmlhttp"),wr(c,g),c.m&&c.o&&Vt(g,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=_r(gn(g)),v.m=null,v.P=!0,Di(v,c)}s.Za=function(){this.C!=null&&(this.C=null,ya(this),Bo(this),at(19))};function va(c){c.C!=null&&(p.clearTimeout(c.C),c.C=null)}function Vu(c,g){var v=null;if(c.g==g){va(c),Rr(c),c.g=null;var b=2}else if(Do(c.h,g))v=g.D,rn(c.h,g),b=1;else return;if(c.G!=0){if(g.o)if(b==1){v=g.m?g.m.length:0,g=Date.now()-g.F;var L=c.B;b=us(),Ye(b,new It(b,v)),_a(c)}else Ou(c);else if(L=g.s,L==3||L==0&&0<g.X||!(b==1&&sd(c,g)||b==2&&Bo(c)))switch(v&&0<v.length&&(g=c.h,g.i=g.i.concat(v)),L){case 1:Li(c,5);break;case 4:Li(c,10);break;case 3:Li(c,6);break;default:Li(c,2)}}}function qo(c,g){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*g}function Li(c,g){if(c.j.info("Error code "+g),g==2){var v=N(c.fb,c),b=c.Xa;const L=!b;b=new Tt(b||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||yr(b,"https"),_r(b),L?Er(b.toString(),v):Fn(b.toString(),v)}else at(2);c.G=0,c.l&&c.l.sa(g),ku(c),xu(c)}s.fb=function(c){c?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function ku(c){if(c.G=0,c.ka=[],c.l){const g=Oo(c.h);(g.length!=0||c.i.length!=0)&&(K(c.ka,g),K(c.ka,c.i),c.h.i.length=0,te(c.i),c.i.length=0),c.l.ra()}}function ju(c,g,v){var b=v instanceof Tt?gn(v):new Tt(v);if(b.g!="")g&&(b.g=g+"."+b.g),ms(b,b.s);else{var L=p.location;b=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;var F=new Tt(null);b&&yr(F,b),g&&(F.g=g),L&&ms(F,L),v&&(F.l=v),b=F}return v=c.D,g=c.ya,v&&g&&We(b,v,g),We(b,"VER",c.la),wr(c,b),b}function Pu(c,g,v){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new Qe(new ps({eb:v})):new Qe(c.pa),g.Ha(c.J),g}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Lu(){}s=Lu.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Ea(){}Ea.prototype.g=function(c,g){return new an(c,g)};function an(c,g){ct.call(this),this.g=new ga(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!he(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!he(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new ui(this)}Q(an,ct),an.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){Uo(this.g)},an.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=qn(c),c=v);g.i.push(new wu(g.Ya++,c)),g.G==3&&_a(g)},an.prototype.N=function(){this.g.l=null,delete this.j,Uo(this.g),delete this.g,an.aa.N.call(this)};function Uu(c){Ci.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const v in g){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}Q(Uu,Ci);function zu(){Io.call(this),this.status=1}Q(zu,Io);function ui(c){this.g=c}Q(ui,Lu),ui.prototype.ua=function(){Ye(this.g,"a")},ui.prototype.ta=function(c){Ye(this.g,new Uu(c))},ui.prototype.sa=function(c){Ye(this.g,new zu)},ui.prototype.ra=function(){Ye(this.g,"b")},Ea.prototype.createWebChannel=Ea.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,UT=function(){return new Ea},LT=function(){return us()},PT=ei,Rm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ds.NO_ERROR=0,ds.TIMEOUT=8,ds.HTTP_ERROR=6,Jc=ds,xi.COMPLETE="complete",jT=xi,Ro.EventType=Ni,Ni.OPEN="a",Ni.CLOSE="b",Ni.ERROR="c",Ni.MESSAGE="d",ct.prototype.listen=ct.prototype.K,kl=Ro,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,kT=Qe}).apply(typeof qc<"u"?qc:typeof self<"u"?self:typeof window<"u"?window:{});const Uv="@firebase/firestore",zv="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let go="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r=new Km("@firebase/firestore");function $a(){return $r.logLevel}function de(s,...e){if($r.logLevel<=ke.DEBUG){const n=e.map(ap);$r.debug(`Firestore (${go}): ${s}`,...n)}}function as(s,...e){if($r.logLevel<=ke.ERROR){const n=e.map(ap);$r.error(`Firestore (${go}): ${s}`,...n)}}function lo(s,...e){if($r.logLevel<=ke.WARN){const n=e.map(ap);$r.warn(`Firestore (${go}): ${s}`,...n)}}function ap(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(s,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,zT(s,r,n)}function zT(s,e,n){let r=`FIRESTORE (${go}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw as(r),new Error(r)}function Ke(s,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,s||zT(e,o,r)}function Ie(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends wi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class WR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(en.UNAUTHENTICATED)))}shutdown(){}}class ZR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class JR{constructor(e){this.t=e,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ke(this.o===void 0,42304);let r=this.i;const o=y=>this.i!==r?(r=this.i,n(y)):Promise.resolve();let u=new is;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new is,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const y=u;e.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},p=y=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((y=>p(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new is)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ke(typeof r.accessToken=="string",31837,{l:r}),new BT(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new en(e)}}class eI{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=en.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class tI{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new eI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(en.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Bv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,fn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ke(this.o===void 0,3512);const r=u=>{u.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,de("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>r(u)))};const o=u=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Bv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ke(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Bv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<s;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=iI(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<n&&(r+=e.charAt(o[u]%62))}return r}}function je(s,e){return s<e?-1:s>e?1:0}function Im(s,e){const n=Math.min(s.length,e.length);for(let r=0;r<n;r++){const o=s.charAt(r),u=e.charAt(r);if(o!==u)return um(o)===um(u)?je(o,u):um(o)?1:-1}return je(s.length,e.length)}const sI=55296,rI=57343;function um(s){const e=s.charCodeAt(0);return e>=sI&&e<=rI}function uo(s,e,n){return s.length===e.length&&s.every(((r,o)=>n(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="__name__";class gi{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ae(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ae(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return gi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof gi?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const u=gi.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return je(e.length,n.length)}static compareSegments(e,n){const r=gi.isNumericId(e),o=gi.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?gi.extractNumericId(e).compare(gi.extractNumericId(n)):Im(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Fs.fromString(e.substring(4,e.length-2))}}class st extends gi{construct(e,n,r){return new st(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new le(X.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((o=>o.length>0)))}return new st(n)}static emptyPath(){return new st([])}}const aI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends gi{construct(e,n,r){return new Qt(e,n,r)}static isValidIdentifier(e){return aI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qv}static keyField(){return new Qt([qv])}static fromServerFormat(e){const n=[];let r="",o=0;const u=()=>{if(r.length===0)throw new le(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let d=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new le(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new le(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,o+=2}else p==="`"?(d=!d,o++):p!=="."||d?(r+=p,o++):(u(),o++)}if(u(),d)throw new le(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(n)}static emptyPath(){return new Qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(st.fromString(e))}static fromName(e){return new _e(st.fromString(e).popFirst(5))}static empty(){return new _e(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return st.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new st(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(s,e,n){if(!n)throw new le(X.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function oI(s,e,n,r){if(e===!0&&r===!0)throw new le(X.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function Hv(s){if(!_e.isDocumentKey(s))throw new le(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Fv(s){if(_e.isDocumentKey(s))throw new le(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function HT(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function xh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ae(12329,{type:typeof s})}function Bn(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new le(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xh(s);throw new le(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(s,e){const n={typeString:s};return e&&(n.value=e),n}function lu(s,e){if(!HT(s))throw new le(X.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const o=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){n=`JSON missing required field: '${r}'`;break}const d=s[r];if(o&&typeof d!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&d!==u.value){n=`Expected '${r}' field to equal '${u.value}'`;break}}if(n)throw new le(X.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=-62135596800,Qv=1e6;class rt{static now(){return rt.fromMillis(Date.now())}static fromDate(e){return rt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Qv);return new rt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new le(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new le(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Gv)throw new le(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Qv}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:rt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(lu(e,rt._jsonSchema))return new rt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Gv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}rt._jsonSchemaVersion="firestore/timestamp/1.0",rt._jsonSchema={type:Rt("string",rt._jsonSchemaVersion),seconds:Rt("number"),nanoseconds:Rt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new rt(0,0))}static max(){return new Re(new rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl=-1;function lI(s,e){const n=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(r===1e9?new rt(n+1,0):new rt(n,r));return new Ks(o,_e.empty(),e)}function uI(s){return new Ks(s.readTime,s.key,Yl)}class Ks{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ks(Re.min(),_e.empty(),Yl)}static max(){return new Ks(Re.max(),_e.empty(),Yl)}}function cI(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=_e.comparator(s.documentKey,e.documentKey),n!==0?n:je(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yo(s){if(s.code!==X.FAILED_PRECONDITION||s.message!==hI)throw s;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new J(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(r,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof J?n:J.resolve(n)}catch(n){return J.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):J.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):J.reject(n)}static resolve(e){return new J(((n,r)=>{n(e)}))}static reject(e){return new J(((n,r)=>{r(e)}))}static waitFor(e){return new J(((n,r)=>{let o=0,u=0,d=!1;e.forEach((p=>{++o,p.next((()=>{++u,d&&u===o&&n()}),(y=>r(y)))})),d=!0,u===o&&n()}))}static or(e){let n=J.resolve(!1);for(const r of e)n=n.next((o=>o?J.resolve(o):r()));return n}static forEach(e,n){const r=[];return e.forEach(((o,u)=>{r.push(n.call(this,o,u))})),this.waitFor(r)}static mapArray(e,n){return new J(((r,o)=>{const u=e.length,d=new Array(u);let p=0;for(let y=0;y<u;y++){const _=y;n(e[_]).next((T=>{d[_]=T,++p,p===u&&r(d)}),(T=>o(T)))}}))}static doWhile(e,n){return new J(((r,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):r()};u()}))}}function fI(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function _o(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Dh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp=-1;function Oh(s){return s==null}function fh(s){return s===0&&1/s==-1/0}function mI(s){return typeof s=="number"&&Number.isInteger(s)&&!fh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT="";function pI(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=Kv(e)),e=gI(s.get(n),e);return Kv(e)}function gI(s,e){let n=e;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":n+="";break;case FT:n+="";break;default:n+=u}}return n}function Kv(s){return s+FT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function nr(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function GT(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n){this.comparator=e,this.root=n||Gt.EMPTY}insert(e,n){return new ut(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Gt.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hc(this.root,e,this.comparator,!0)}}class Hc{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?r(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gt{constructor(e,n,r,o,u){this.key=e,this.value=n,this.color=r??Gt.RED,this.left=o??Gt.EMPTY,this.right=u??Gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,u){return new Gt(e??this.key,n??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,r),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Gt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}Gt.EMPTY=null,Gt.RED=!0,Gt.BLACK=!1;Gt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,n,r,o,u){return this}insert(e,n,r){return new Gt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Xv(this.data.getIterator())}getIteratorFrom(e){return new Xv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ot(this.comparator);return n.data=e,n}}class Xv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new Sn([])}unionWith(e){let n=new Ot(Qt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Sn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return uo(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new QT("Invalid base64 string: "+u):u}})(e);return new Kt(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u})(e);return new Kt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kt.EMPTY_BYTE_STRING=new Kt("");const yI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ys(s){if(Ke(!!s,39018),typeof s=="string"){let e=0;const n=yI.exec(s);if(Ke(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yt(s.seconds),nanos:yt(s.nanos)}}function yt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Xs(s){return typeof s=="string"?Kt.fromBase64String(s):Kt.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT="server_timestamp",YT="__type__",XT="__previous_value__",$T="__local_write_time__";function up(s){return(s?.mapValue?.fields||{})[YT]?.stringValue===KT}function Mh(s){const e=s.mapValue.fields[XT];return up(e)?Mh(e):e}function Xl(s){const e=Ys(s.mapValue.fields[$T].timestampValue);return new rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,n,r,o,u,d,p,y,_,T){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=y,this.useFetchStreams=_,this.isUsingEmulator=T}}const mh="(default)";class $l{constructor(e,n){this.projectId=e,this.database=n||mh}static empty(){return new $l("","")}get isDefaultDatabase(){return this.database===mh}isEqual(e){return e instanceof $l&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="__type__",vI="__max__",Fc={mapValue:{}},ZT="__vector__",ph="value";function $s(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?up(s)?4:TI(s)?9007199254740991:EI(s)?10:11:Ae(28295,{value:s})}function bi(s,e){if(s===e)return!0;const n=$s(s);if(n!==$s(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Xl(s).isEqual(Xl(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=Ys(o.timestampValue),p=Ys(u.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return Xs(o.bytesValue).isEqual(Xs(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return yt(o.geoPointValue.latitude)===yt(u.geoPointValue.latitude)&&yt(o.geoPointValue.longitude)===yt(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return yt(o.integerValue)===yt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=yt(o.doubleValue),p=yt(u.doubleValue);return d===p?fh(d)===fh(p):isNaN(d)&&isNaN(p)}return!1})(s,e);case 9:return uo(s.arrayValue.values||[],e.arrayValue.values||[],bi);case 10:case 11:return(function(o,u){const d=o.mapValue.fields||{},p=u.mapValue.fields||{};if(Yv(d)!==Yv(p))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(p[y]===void 0||!bi(d[y],p[y])))return!1;return!0})(s,e);default:return Ae(52216,{left:s})}}function Wl(s,e){return(s.values||[]).find((n=>bi(n,e)))!==void 0}function co(s,e){if(s===e)return 0;const n=$s(s),r=$s(e);if(n!==r)return je(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return je(s.booleanValue,e.booleanValue);case 2:return(function(u,d){const p=yt(u.integerValue||u.doubleValue),y=yt(d.integerValue||d.doubleValue);return p<y?-1:p>y?1:p===y?0:isNaN(p)?isNaN(y)?0:-1:1})(s,e);case 3:return $v(s.timestampValue,e.timestampValue);case 4:return $v(Xl(s),Xl(e));case 5:return Im(s.stringValue,e.stringValue);case 6:return(function(u,d){const p=Xs(u),y=Xs(d);return p.compareTo(y)})(s.bytesValue,e.bytesValue);case 7:return(function(u,d){const p=u.split("/"),y=d.split("/");for(let _=0;_<p.length&&_<y.length;_++){const T=je(p[_],y[_]);if(T!==0)return T}return je(p.length,y.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,d){const p=je(yt(u.latitude),yt(d.latitude));return p!==0?p:je(yt(u.longitude),yt(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return Wv(s.arrayValue,e.arrayValue);case 10:return(function(u,d){const p=u.fields||{},y=d.fields||{},_=p[ph]?.arrayValue,T=y[ph]?.arrayValue,I=je(_?.values?.length||0,T?.values?.length||0);return I!==0?I:Wv(_,T)})(s.mapValue,e.mapValue);case 11:return(function(u,d){if(u===Fc.mapValue&&d===Fc.mapValue)return 0;if(u===Fc.mapValue)return 1;if(d===Fc.mapValue)return-1;const p=u.fields||{},y=Object.keys(p),_=d.fields||{},T=Object.keys(_);y.sort(),T.sort();for(let I=0;I<y.length&&I<T.length;++I){const N=Im(y[I],T[I]);if(N!==0)return N;const O=co(p[y[I]],_[T[I]]);if(O!==0)return O}return je(y.length,T.length)})(s.mapValue,e.mapValue);default:throw Ae(23264,{he:n})}}function $v(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return je(s,e);const n=Ys(s),r=Ys(e),o=je(n.seconds,r.seconds);return o!==0?o:je(n.nanos,r.nanos)}function Wv(s,e){const n=s.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const u=co(n[o],r[o]);if(u)return u}return je(n.length,r.length)}function ho(s){return Nm(s)}function Nm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const r=Ys(n);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return Xs(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return _e.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let r="[",o=!0;for(const u of n.values||[])o?o=!1:r+=",",r+=Nm(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(n){const r=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of r)u?u=!1:o+=",",o+=`${d}:${Nm(n.fields[d])}`;return o+"}"})(s.mapValue):Ae(61005,{value:s})}function eh(s){switch($s(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mh(s);return e?16+eh(e):16;case 5:return 2*s.stringValue.length;case 6:return Xs(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+eh(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return nr(r.fields,((u,d)=>{o+=u.length+eh(d)})),o})(s.mapValue);default:throw Ae(13486,{value:s})}}function Zv(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Cm(s){return!!s&&"integerValue"in s}function cp(s){return!!s&&"arrayValue"in s}function Jv(s){return!!s&&"nullValue"in s}function eE(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function th(s){return!!s&&"mapValue"in s}function EI(s){return(s?.mapValue?.fields||{})[WT]?.stringValue===ZT}function Bl(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return nr(s.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Bl(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Bl(s.arrayValue.values[n]);return e}return{...s}}function TI(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===vI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.value=e}static empty(){return new mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!th(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bl(n)}setAll(e){let n=Qt.emptyPath(),r={},o=[];e.forEach(((d,p)=>{if(!n.isImmediateParentOf(p)){const y=this.getFieldsMap(n);this.applyChanges(y,r,o),r={},o=[],n=p.popLast()}d?r[p.lastSegment()]=Bl(d):o.push(p.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,r,o)}delete(e){const n=this.field(e.popLast());th(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return bi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];th(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){nr(n,((o,u)=>e[o]=u));for(const o of r)delete e[o]}clone(){return new mn(Bl(this.value))}}function JT(s){const e=[];return nr(s.fields,((n,r)=>{const o=new Qt([n]);if(th(r)){const u=JT(r.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)})),new Sn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,n,r,o,u,d,p){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=u,this.data=d,this.documentState=p}static newInvalidDocument(e){return new tn(e,0,Re.min(),Re.min(),Re.min(),mn.empty(),0)}static newFoundDocument(e,n,r,o){return new tn(e,1,n,Re.min(),r,o,0)}static newNoDocument(e,n){return new tn(e,2,n,Re.min(),Re.min(),mn.empty(),0)}static newUnknownDocument(e,n){return new tn(e,3,n,Re.min(),Re.min(),mn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,n){this.position=e,this.inclusive=n}}function tE(s,e,n){let r=0;for(let o=0;o<s.position.length;o++){const u=e[o],d=s.position[o];if(u.field.isKeyField()?r=_e.comparator(_e.fromName(d.referenceValue),n.key):r=co(d,n.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function nE(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!bi(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n="asc"){this.field=e,this.dir=n}}function AI(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{}class wt extends e0{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new SI(e,n,r):n==="array-contains"?new II(e,r):n==="in"?new NI(e,r):n==="not-in"?new CI(e,r):n==="array-contains-any"?new xI(e,r):new wt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new wI(e,r):new RI(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(co(n,this.value)):n!==null&&$s(this.value)===$s(n)&&this.matchesComparison(co(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zn extends e0{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Zn(e,n)}matches(e){return t0(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function t0(s){return s.op==="and"}function n0(s){return bI(s)&&t0(s)}function bI(s){for(const e of s.filters)if(e instanceof Zn)return!1;return!0}function xm(s){if(s instanceof wt)return s.field.canonicalString()+s.op.toString()+ho(s.value);if(n0(s))return s.filters.map((e=>xm(e))).join(",");{const e=s.filters.map((n=>xm(n))).join(",");return`${s.op}(${e})`}}function i0(s,e){return s instanceof wt?(function(r,o){return o instanceof wt&&r.op===o.op&&r.field.isEqual(o.field)&&bi(r.value,o.value)})(s,e):s instanceof Zn?(function(r,o){return o instanceof Zn&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,d,p)=>u&&i0(d,o.filters[p])),!0):!1})(s,e):void Ae(19439)}function s0(s){return s instanceof wt?(function(n){return`${n.field.canonicalString()} ${n.op} ${ho(n.value)}`})(s):s instanceof Zn?(function(n){return n.op.toString()+" {"+n.getFilters().map(s0).join(" ,")+"}"})(s):"Filter"}class SI extends wt{constructor(e,n,r){super(e,n,r),this.key=_e.fromName(r.referenceValue)}matches(e){const n=_e.comparator(e.key,this.key);return this.matchesComparison(n)}}class wI extends wt{constructor(e,n){super(e,"in",n),this.keys=r0("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class RI extends wt{constructor(e,n){super(e,"not-in",n),this.keys=r0("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function r0(s,e){return(e.arrayValue?.values||[]).map((n=>_e.fromName(n.referenceValue)))}class II extends wt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return cp(n)&&Wl(n.arrayValue,this.value)}}class NI extends wt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Wl(this.value.arrayValue,n)}}class CI extends wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Wl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Wl(this.value.arrayValue,n)}}class xI extends wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!cp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Wl(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,n=null,r=[],o=[],u=null,d=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=p,this.Te=null}}function iE(s,e=null,n=[],r=[],o=null,u=null,d=null){return new DI(s,e,n,r,o,u,d)}function hp(s){const e=Ie(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>xm(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),Oh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>ho(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>ho(r))).join(",")),e.Te=n}return e.Te}function dp(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!AI(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!i0(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!nE(s.startAt,e.startAt)&&nE(s.endAt,e.endAt)}function Dm(s){return _e.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,n=null,r=[],o=[],u=null,d="F",p=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=p,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function OI(s,e,n,r,o,u,d,p){return new vo(s,e,n,r,o,u,d,p)}function fp(s){return new vo(s)}function sE(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function a0(s){return s.collectionGroup!==null}function ql(s){const e=Ie(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new Ot(Qt.comparator);return d.filters.forEach((y=>{y.getFlattenedFilters().forEach((_=>{_.isInequality()&&(p=p.add(_.field))}))})),p})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Zl(u,r))})),n.has(Qt.keyField().canonicalString())||e.Ie.push(new Zl(Qt.keyField(),r))}return e.Ie}function vi(s){const e=Ie(s);return e.Ee||(e.Ee=MI(e,ql(s))),e.Ee}function MI(s,e){if(s.limitType==="F")return iE(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Zl(o.field,u)}));const n=s.endAt?new gh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new gh(s.startAt.position,s.startAt.inclusive):null;return iE(s.path,s.collectionGroup,e,s.filters,s.limit,n,r)}}function Om(s,e){const n=s.filters.concat([e]);return new vo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Mm(s,e,n){return new vo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Vh(s,e){return dp(vi(s),vi(e))&&s.limitType===e.limitType}function o0(s){return`${hp(vi(s))}|lt:${s.limitType}`}function Wa(s){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((o=>s0(o))).join(", ")}]`),Oh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((o=>ho(o))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((o=>ho(o))).join(",")),`Target(${r})`})(vi(s))}; limitType=${s.limitType})`}function kh(s,e){return e.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):_e.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,e)&&(function(r,o){for(const u of ql(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(r,o){return!(r.startAt&&!(function(d,p,y){const _=tE(d,p,y);return d.inclusive?_<=0:_<0})(r.startAt,ql(r),o)||r.endAt&&!(function(d,p,y){const _=tE(d,p,y);return d.inclusive?_>=0:_>0})(r.endAt,ql(r),o))})(s,e)}function VI(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function l0(s){return(e,n)=>{let r=!1;for(const o of ql(s)){const u=kI(o,e,n);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function kI(s,e,n){const r=s.field.isKeyField()?_e.comparator(e.key,n.key):(function(u,d,p){const y=d.data.field(u),_=p.data.field(u);return y!==null&&_!==null?co(y,_):Ae(42886)})(s.field,e,n);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return Ae(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){nr(this.inner,((n,r)=>{for(const[o,u]of r)e(o,u)}))}isEmpty(){return GT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI=new ut(_e.comparator);function os(){return jI}const u0=new ut(_e.comparator);function jl(...s){let e=u0;for(const n of s)e=e.insert(n.key,n);return e}function c0(s){let e=u0;return s.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Fr(){return Hl()}function h0(){return Hl()}function Hl(){return new ea((s=>s.toString()),((s,e)=>s.isEqual(e)))}const PI=new ut(_e.comparator),LI=new Ot(_e.comparator);function Pe(...s){let e=LI;for(const n of s)e=e.add(n);return e}const UI=new Ot(je);function zI(){return UI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fh(e)?"-0":e}}function d0(s){return{integerValue:""+s}}function BI(s,e){return mI(e)?d0(e):mp(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(){this._=void 0}}function qI(s,e,n){return s instanceof Jl?(function(o,u){const d={fields:{[YT]:{stringValue:KT},[$T]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&up(u)&&(u=Mh(u)),u&&(d.fields[XT]=u),{mapValue:d}})(n,e):s instanceof eu?m0(s,e):s instanceof tu?p0(s,e):(function(o,u){const d=f0(o,u),p=rE(d)+rE(o.Ae);return Cm(d)&&Cm(o.Ae)?d0(p):mp(o.serializer,p)})(s,e)}function HI(s,e,n){return s instanceof eu?m0(s,e):s instanceof tu?p0(s,e):n}function f0(s,e){return s instanceof yh?(function(r){return Cm(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(e)?e:{integerValue:0}:null}class Jl extends jh{}class eu extends jh{constructor(e){super(),this.elements=e}}function m0(s,e){const n=g0(e);for(const r of s.elements)n.some((o=>bi(o,r)))||n.push(r);return{arrayValue:{values:n}}}class tu extends jh{constructor(e){super(),this.elements=e}}function p0(s,e){let n=g0(e);for(const r of s.elements)n=n.filter((o=>!bi(o,r)));return{arrayValue:{values:n}}}class yh extends jh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function rE(s){return yt(s.integerValue||s.doubleValue)}function g0(s){return cp(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e,n){this.field=e,this.transform=n}}function GI(s,e){return s.field.isEqual(e.field)&&(function(r,o){return r instanceof eu&&o instanceof eu||r instanceof tu&&o instanceof tu?uo(r.elements,o.elements,bi):r instanceof yh&&o instanceof yh?bi(r.Ae,o.Ae):r instanceof Jl&&o instanceof Jl})(s.transform,e.transform)}class QI{constructor(e,n){this.version=e,this.transformResults=n}}class ln{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ln}static exists(e){return new ln(void 0,e)}static updateTime(e){return new ln(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nh(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Ph{}function y0(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Lh(s.key,ln.none()):new uu(s.key,s.data,ln.none());{const n=s.data,r=mn.empty();let o=new Ot(Qt.comparator);for(let u of e.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?r.delete(u):r.set(u,d),o=o.add(u)}return new ir(s.key,r,new Sn(o.toArray()),ln.none())}}function KI(s,e,n){s instanceof uu?(function(o,u,d){const p=o.value.clone(),y=oE(o.fieldTransforms,u,d.transformResults);p.setAll(y),u.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(s,e,n):s instanceof ir?(function(o,u,d){if(!nh(o.precondition,u))return void u.convertToUnknownDocument(d.version);const p=oE(o.fieldTransforms,u,d.transformResults),y=u.data;y.setAll(_0(o)),y.setAll(p),u.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(s,e,n):(function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function Fl(s,e,n,r){return s instanceof uu?(function(u,d,p,y){if(!nh(u.precondition,d))return p;const _=u.value.clone(),T=lE(u.fieldTransforms,y,d);return _.setAll(T),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),null})(s,e,n,r):s instanceof ir?(function(u,d,p,y){if(!nh(u.precondition,d))return p;const _=lE(u.fieldTransforms,y,d),T=d.data;return T.setAll(_0(u)),T.setAll(_),d.convertToFoundDocument(d.version,T).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((I=>I.field)))})(s,e,n,r):(function(u,d,p){return nh(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(s,e,n)}function YI(s,e){let n=null;for(const r of s.fieldTransforms){const o=e.data.field(r.field),u=f0(r.transform,o||null);u!=null&&(n===null&&(n=mn.empty()),n.set(r.field,u))}return n||null}function aE(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&uo(r,o,((u,d)=>GI(u,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class uu extends Ph{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ir extends Ph{constructor(e,n,r,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function _0(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=s.data.field(n);e.set(n,r)}})),e}function oE(s,e,n){const r=new Map;Ke(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let o=0;o<n.length;o++){const u=s[o],d=u.transform,p=e.data.field(u.field);r.set(u.field,HI(d,p,n[o]))}return r}function lE(s,e,n){const r=new Map;for(const o of s){const u=o.transform,d=n.data.field(o.field);r.set(o.field,qI(u,d,e))}return r}class Lh extends Ph{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XI extends Ph{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&KI(u,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Fl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Fl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=h0();return this.mutations.forEach((o=>{const u=e.get(o.key),d=u.overlayedDocument;let p=this.applyToLocalView(d,u.mutatedFields);p=n.has(o.key)?null:p;const y=y0(d,p);y!==null&&r.set(o.key,y),d.isValidDocument()||d.convertToNoDocument(Re.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Pe())}isEqual(e){return this.batchId===e.batchId&&uo(this.mutations,e.mutations,((n,r)=>aE(n,r)))&&uo(this.baseMutations,e.baseMutations,((n,r)=>aE(n,r)))}}class pp{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){Ke(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return PI})();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new pp(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St,qe;function JI(s){switch(s){case X.OK:return Ae(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return Ae(15467,{code:s})}}function v0(s){if(s===void 0)return as("GRPC error has no .code"),X.UNKNOWN;switch(s){case St.OK:return X.OK;case St.CANCELLED:return X.CANCELLED;case St.UNKNOWN:return X.UNKNOWN;case St.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case St.INTERNAL:return X.INTERNAL;case St.UNAVAILABLE:return X.UNAVAILABLE;case St.UNAUTHENTICATED:return X.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case St.NOT_FOUND:return X.NOT_FOUND;case St.ALREADY_EXISTS:return X.ALREADY_EXISTS;case St.PERMISSION_DENIED:return X.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case St.ABORTED:return X.ABORTED;case St.OUT_OF_RANGE:return X.OUT_OF_RANGE;case St.UNIMPLEMENTED:return X.UNIMPLEMENTED;case St.DATA_LOSS:return X.DATA_LOSS;default:return Ae(39323,{code:s})}}(qe=St||(St={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=new Fs([4294967295,4294967295],0);function uE(s){const e=eN().encode(s),n=new VT;return n.update(e),new Uint8Array(n.digest())}function cE(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Fs([n,r],0),new Fs([o,u],0)]}class gp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Pl(`Invalid padding: ${n}`);if(r<0)throw new Pl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Pl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Pl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Fs.fromNumber(this.ge)}ye(e,n,r){let o=e.add(n.multiply(Fs.fromNumber(r)));return o.compare(tN)===1&&(o=new Fs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=uE(e),[r,o]=cE(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(r,o,u);if(!this.we(d))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new gp(u,o,n);return r.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const n=uE(e),[r,o]=cE(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(r,o,u);this.Se(d)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Pl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,n,r,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,cu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Uh(Re.min(),o,new ut(je),os(),Pe())}}class cu{constructor(e,n,r,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new cu(r,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,n,r,o){this.be=e,this.removedTargetIds=n,this.key=r,this.De=o}}class E0{constructor(e,n){this.targetId=e,this.Ce=n}}class T0{constructor(e,n,r=Kt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class hE{constructor(){this.ve=0,this.Fe=dE(),this.Me=Kt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Pe(),n=Pe(),r=Pe();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:Ae(38017,{changeType:u})}})),new cu(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=dE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class nN{constructor(e){this.Ge=e,this.ze=new Map,this.je=os(),this.Je=Gc(),this.He=Gc(),this.Ye=new ut(je)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,r=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Dm(u))if(r===0){const d=new _e(u.path);this.et(n,d,tn.newNoDocument(d,Re.min()))}else Ke(r===1,20013,{expectedCount:r});else{const d=this._t(n);if(d!==r){const p=this.ut(e),y=p?this.ct(p,e,d):1;if(y!==0){this.it(n);const _=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,_)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=n;let d,p;try{d=Xs(r).toUint8Array()}catch(y){if(y instanceof QT)return lo("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{p=new gp(d,o,u)}catch(y){return lo(y instanceof Pl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return p.ge===0?null:p}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let o=0;return r.forEach((u=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,d)=>{const p=this.ot(d);if(p){if(u.current&&Dm(p.target)){const y=new _e(p.target.path);this.It(y).has(d)||this.Et(d,y)||this.et(d,y,tn.newNoDocument(y,e))}u.Be&&(n.set(d,u.ke()),u.qe())}}));let r=Pe();this.He.forEach(((u,d)=>{let p=!0;d.forEachWhile((y=>{const _=this.ot(y);return!_||_.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const o=new Uh(e,n,this.Ye,this.je,r);return this.je=os(),this.Je=Gc(),this.He=Gc(),this.Ye=new ut(je),o}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new hE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ot(je),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ot(je),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||de("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new hE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Gc(){return new ut(_e.comparator)}function dE(){return new ut(_e.comparator)}const iN={asc:"ASCENDING",desc:"DESCENDING"},sN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rN={and:"AND",or:"OR"};class aN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Vm(s,e){return s.useProto3Json||Oh(e)?e:{value:e}}function _h(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function A0(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function oN(s,e){return _h(s,e.toTimestamp())}function Ei(s){return Ke(!!s,49232),Re.fromTimestamp((function(n){const r=Ys(n);return new rt(r.seconds,r.nanos)})(s))}function yp(s,e){return km(s,e).canonicalString()}function km(s,e){const n=(function(o){return new st(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function b0(s){const e=st.fromString(s);return Ke(N0(e),10190,{key:e.toString()}),e}function jm(s,e){return yp(s.databaseId,e.path)}function cm(s,e){const n=b0(e);if(n.get(1)!==s.databaseId.projectId)throw new le(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new le(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new _e(w0(n))}function S0(s,e){return yp(s.databaseId,e)}function lN(s){const e=b0(s);return e.length===4?st.emptyPath():w0(e)}function Pm(s){return new st(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function w0(s){return Ke(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function fE(s,e,n){return{name:jm(s,e),fields:n.value.mapValue.fields}}function uN(s,e){let n;if("targetChange"in e){e.targetChange;const r=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Ae(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(_,T){return _.useProto3Json?(Ke(T===void 0||typeof T=="string",58123),Kt.fromBase64String(T||"")):(Ke(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Kt.fromUint8Array(T||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(_){const T=_.code===void 0?X.UNKNOWN:v0(_.code);return new le(T,_.message||"")})(d);n=new T0(r,o,u,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=cm(s,r.document.name),u=Ei(r.document.updateTime),d=r.document.createTime?Ei(r.document.createTime):Re.min(),p=new mn({mapValue:{fields:r.document.fields}}),y=tn.newFoundDocument(o,u,d,p),_=r.targetIds||[],T=r.removedTargetIds||[];n=new ih(_,T,y.key,y)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=cm(s,r.document),u=r.readTime?Ei(r.readTime):Re.min(),d=tn.newNoDocument(o,u),p=r.removedTargetIds||[];n=new ih([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=cm(s,r.document),u=r.removedTargetIds||[];n=new ih([],u,o,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,d=new ZI(o,u),p=r.targetId;n=new E0(p,d)}}return n}function cN(s,e){let n;if(e instanceof uu)n={update:fE(s,e.key,e.value)};else if(e instanceof Lh)n={delete:jm(s,e.key)};else if(e instanceof ir)n={update:fE(s,e.key,e.data),updateMask:vN(e.fieldMask)};else{if(!(e instanceof XI))return Ae(16599,{Vt:e.type});n={verify:jm(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(u,d){const p=d.transform;if(p instanceof Jl)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof eu)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof tu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof yh)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw Ae(20930,{transform:d.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:oN(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ae(27497)})(s,e.precondition)),n}function hN(s,e){return s&&s.length>0?(Ke(e!==void 0,14353),s.map((n=>(function(o,u){let d=o.updateTime?Ei(o.updateTime):Ei(u);return d.isEqual(Re.min())&&(d=Ei(u)),new QI(d,o.transformResults||[])})(n,e)))):[]}function dN(s,e){return{documents:[S0(s,e.path)]}}function fN(s,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=S0(s,o);const u=(function(_){if(_.length!==0)return I0(Zn.create(_,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const d=(function(_){if(_.length!==0)return _.map((T=>(function(N){return{field:Za(N.field),direction:gN(N.dir)}})(T)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const p=Vm(s,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:n,parent:o}}function mN(s){let e=lN(s.parent);const n=s.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){Ke(r===1,65062);const T=n.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let u=[];n.where&&(u=(function(I){const N=R0(I);return N instanceof Zn&&n0(N)?N.getFilters():[N]})(n.where));let d=[];n.orderBy&&(d=(function(I){return I.map((N=>(function(Q){return new Zl(Ja(Q.field),(function(K){switch(K){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Q.direction))})(N)))})(n.orderBy));let p=null;n.limit&&(p=(function(I){let N;return N=typeof I=="object"?I.value:I,Oh(N)?null:N})(n.limit));let y=null;n.startAt&&(y=(function(I){const N=!!I.before,O=I.values||[];return new gh(O,N)})(n.startAt));let _=null;return n.endAt&&(_=(function(I){const N=!I.before,O=I.values||[];return new gh(O,N)})(n.endAt)),OI(e,o,d,u,p,"F",y,_)}function pN(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function R0(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ja(n.unaryFilter.field);return wt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Ja(n.unaryFilter.field);return wt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Ja(n.unaryFilter.field);return wt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ja(n.unaryFilter.field);return wt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(s):s.fieldFilter!==void 0?(function(n){return wt.create(Ja(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return Zn.create(n.compositeFilter.filters.map((r=>R0(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(n.compositeFilter.op))})(s):Ae(30097,{filter:s})}function gN(s){return iN[s]}function yN(s){return sN[s]}function _N(s){return rN[s]}function Za(s){return{fieldPath:s.canonicalString()}}function Ja(s){return Qt.fromServerFormat(s.fieldPath)}function I0(s){return s instanceof wt?(function(n){if(n.op==="=="){if(eE(n.value))return{unaryFilter:{field:Za(n.field),op:"IS_NAN"}};if(Jv(n.value))return{unaryFilter:{field:Za(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(eE(n.value))return{unaryFilter:{field:Za(n.field),op:"IS_NOT_NAN"}};if(Jv(n.value))return{unaryFilter:{field:Za(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Za(n.field),op:yN(n.op),value:n.value}}})(s):s instanceof Zn?(function(n){const r=n.getFilters().map((o=>I0(o)));return r.length===1?r[0]:{compositeFilter:{op:_N(n.op),filters:r}}})(s):Ae(54877,{filter:s})}function vN(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function N0(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n,r,o,u=Re.min(),d=Re.min(),p=Kt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=y}withSequenceNumber(e){return new Bs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e){this.yt=e}}function TN(s){const e=mN({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Mm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(){this.Cn=new bN}addToCollectionParentIndex(e,n){return this.Cn.add(n),J.resolve()}getCollectionParents(e,n){return J.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return J.resolve()}deleteFieldIndex(e,n){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,n){return J.resolve()}getDocumentsMatchingTarget(e,n){return J.resolve(null)}getIndexType(e,n){return J.resolve(0)}getFieldIndexes(e,n){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,n){return J.resolve(Ks.min())}getMinOffsetFromCollectionGroup(e,n){return J.resolve(Ks.min())}updateCollectionGroup(e,n,r){return J.resolve()}updateIndexEntries(e,n){return J.resolve()}}class bN{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new Ot(st.comparator),u=!o.has(r);return this.index[n]=o.add(r),u}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Ot(st.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},C0=41943040;class dn{static withCacheSize(e){return new dn(e,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dn.DEFAULT_COLLECTION_PERCENTILE=10,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dn.DEFAULT=new dn(C0,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dn.DISABLED=new dn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new fo(0)}static cr(){return new fo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="LruGarbageCollector",SN=1048576;function gE([s,e],[n,r]){const o=je(s,n);return o===0?je(e,r):o}class wN{constructor(e){this.Ir=e,this.buffer=new Ot(gE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();gE(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class RN{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){de(pE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){_o(n)?de(pE,"Ignoring IndexedDB error during garbage collection: ",n):await yo(n)}await this.Vr(3e5)}))}}class IN{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return J.resolve(Dh.ce);const r=new wN(n);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(mE)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mE):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,o,u,d,p,y,_;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),o=this.params.maximumSequenceNumbersToCollect):o=I,d=Date.now(),this.nthSequenceNumber(e,o)))).next((I=>(r=I,p=Date.now(),this.removeTargets(e,r,n)))).next((I=>(u=I,y=Date.now(),this.removeOrphanedDocuments(e,r)))).next((I=>(_=Date.now(),$a()<=ke.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-T}ms
	Determined least recently used ${o} in `+(p-d)+`ms
	Removed ${u} targets in `+(y-p)+`ms
	Removed ${I} documents in `+(_-y)+`ms
Total Duration: ${_-T}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:I}))))}}function NN(s,e){return new IN(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(){this.changes=new ea((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?J.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(r!==null&&Fl(r.mutation,o,Sn.empty(),rt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Pe()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Pe()){const o=Fr();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,r).next((u=>{let d=jl();return u.forEach(((p,y)=>{d=d.insert(p,y.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const r=Fr();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Pe())))}populateOverlays(e,n,r){const o=[];return r.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((d,p)=>{n.set(d,p)}))}))}computeViews(e,n,r,o){let u=os();const d=Hl(),p=(function(){return Hl()})();return n.forEach(((y,_)=>{const T=r.get(_.key);o.has(_.key)&&(T===void 0||T.mutation instanceof ir)?u=u.insert(_.key,_):T!==void 0?(d.set(_.key,T.mutation.getFieldMask()),Fl(T.mutation,_,T.mutation.getFieldMask(),rt.now())):d.set(_.key,Sn.empty())})),this.recalculateAndSaveOverlays(e,u).next((y=>(y.forEach(((_,T)=>d.set(_,T))),n.forEach(((_,T)=>p.set(_,new xN(T,d.get(_)??null)))),p)))}recalculateAndSaveOverlays(e,n){const r=Hl();let o=new ut(((d,p)=>d-p)),u=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const p of d)p.keys().forEach((y=>{const _=n.get(y);if(_===null)return;let T=r.get(y)||Sn.empty();T=p.applyToLocalView(_,T),r.set(y,T);const I=(o.get(p.batchId)||Pe()).add(y);o=o.insert(p.batchId,I)}))})).next((()=>{const d=[],p=o.getReverseIterator();for(;p.hasNext();){const y=p.getNext(),_=y.key,T=y.value,I=h0();T.forEach((N=>{if(!u.has(N)){const O=y0(n.get(N),r.get(N));O!==null&&I.set(N,O),u=u.add(N)}})),d.push(this.documentOverlayCache.saveOverlays(e,_,I))}return J.waitFor(d)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,o){return(function(d){return _e.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):a0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next((u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-u.size):J.resolve(Fr());let p=Yl,y=u;return d.next((_=>J.forEach(_,((T,I)=>(p<I.largestBatchId&&(p=I.largestBatchId),u.get(T)?J.resolve():this.remoteDocumentCache.getEntry(e,T).next((N=>{y=y.insert(T,N)}))))).next((()=>this.populateOverlays(e,_,u))).next((()=>this.computeViews(e,y,_,Pe()))).next((T=>({batchId:p,changes:c0(T)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new _e(n)).next((r=>{let o=jl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const u=n.collectionGroup;let d=jl();return this.indexManager.getCollectionParents(e,u).next((p=>J.forEach(p,(y=>{const _=(function(I,N){return new vo(N,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(n,y.child(u));return this.getDocumentsMatchingCollectionQuery(e,_,r,o).next((T=>{T.forEach(((I,N)=>{d=d.insert(I,N)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,u,o)))).next((d=>{u.forEach(((y,_)=>{const T=_.getKey();d.get(T)===null&&(d=d.insert(T,tn.newInvalidDocument(T)))}));let p=jl();return d.forEach(((y,_)=>{const T=u.get(y);T!==void 0&&Fl(T.mutation,_,Sn.empty(),rt.now()),kh(n,_)&&(p=p.insert(y,_))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return J.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Ei(o.createTime)}})(n)),J.resolve()}getNamedQuery(e,n){return J.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:TN(o.bundledQuery),readTime:Ei(o.readTime)}})(n)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(){this.overlays=new ut(_e.comparator),this.qr=new Map}getOverlay(e,n){return J.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Fr();return J.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((o,u)=>{this.St(e,n,u)})),J.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),J.resolve()}getOverlaysForCollection(e,n,r){const o=Fr(),u=n.length+1,d=new _e(n.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const y=p.getNext().value,_=y.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===u&&y.largestBatchId>r&&o.set(y.getKey(),y)}return J.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let u=new ut(((_,T)=>_-T));const d=this.overlays.getIterator();for(;d.hasNext();){const _=d.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>r){let T=u.get(_.largestBatchId);T===null&&(T=Fr(),u=u.insert(_.largestBatchId,T)),T.set(_.getKey(),_)}}const p=Fr(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((_,T)=>p.set(_,T))),!(p.size()>=o)););return J.resolve(p)}St(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new WI(n,r));let u=this.qr.get(n);u===void 0&&(u=Pe(),this.qr.set(n,u)),this.qr.set(n,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(){this.sessionToken=Kt.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(){this.Qr=new Ot(Ut.$r),this.Ur=new Ot(Ut.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ut(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Ut(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new _e(new st([])),r=new Ut(n,e),o=new Ut(n,e+1),u=[];return this.Ur.forEachInRange([r,o],(d=>{this.Gr(d),u.push(d.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new _e(new st([])),r=new Ut(n,e),o=new Ut(n,e+1);let u=Pe();return this.Ur.forEachInRange([r,o],(d=>{u=u.add(d.key)})),u}containsKey(e){const n=new Ut(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ut{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return _e.comparator(e.key,n.key)||je(e.Yr,n.Yr)}static Kr(e,n){return je(e.Yr,n.Yr)||_e.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ot(Ut.$r)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new $I(u,n,r,o);this.mutationQueue.push(d);for(const p of o)this.Zr=this.Zr.add(new Ut(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return J.resolve(d)}lookupMutationBatch(e,n){return J.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.ei(r),u=o<0?0:o;return J.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?lp:this.tr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ut(n,0),o=new Ut(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,o],(d=>{const p=this.Xr(d.Yr);u.push(p)})),J.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ot(je);return n.forEach((o=>{const u=new Ut(o,0),d=new Ut(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,d],(p=>{r=r.add(p.Yr)}))})),J.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let u=r;_e.isDocumentKey(u)||(u=u.child(""));const d=new Ut(new _e(u),0);let p=new Ot(je);return this.Zr.forEachWhile((y=>{const _=y.key.path;return!!r.isPrefixOf(_)&&(_.length===o&&(p=p.add(y.Yr)),!0)}),d),J.resolve(this.ti(p))}ti(e){const n=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Ke(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return J.forEach(n.mutations,(o=>{const u=new Ut(o.key,n.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Ut(n,0),o=this.Zr.firstAfterOrEqual(r);return J.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e){this.ri=e,this.docs=(function(){return new ut(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),u=o?o.size:0,d=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return J.resolve(r?r.document.mutableCopy():tn.newInvalidDocument(n))}getEntries(e,n){let r=os();return n.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():tn.newInvalidDocument(o))})),J.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let u=os();const d=n.path,p=new _e(d.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(p);for(;y.hasNext();){const{key:_,value:{document:T}}=y.getNext();if(!d.isPrefixOf(_.path))break;_.path.length>d.length+1||cI(uI(T),r)<=0||(o.has(T.key)||kh(n,T))&&(u=u.insert(T.key,T.mutableCopy()))}return J.resolve(u)}getAllFromCollectionGroup(e,n,r,o){Ae(9500)}ii(e,n){return J.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new PN(this)}getSize(e){return J.resolve(this.size)}}class PN extends CN{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),J.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e){this.persistence=e,this.si=new ea((n=>hp(n)),dp),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new _p,this.targetCount=0,this.ai=fo.ur()}forEachTarget(e,n){return this.si.forEach(((r,o)=>n(o))),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),J.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new fo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,J.resolve()}updateTargetData(e,n){return this.Pr(n),J.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,n,r){let o=0;const u=[];return this.si.forEach(((d,p)=>{p.sequenceNumber<=n&&r.get(p.targetId)===null&&(this.si.delete(d),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),J.waitFor(u).next((()=>o))}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return J.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),J.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((d=>{u.push(o.markPotentiallyOrphaned(e,d))})),J.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),J.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return J.resolve(r)}containsKey(e,n){return J.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e,n){this.ui={},this.overlays={},this.ci=new Dh(0),this.li=!1,this.li=!0,this.hi=new VN,this.referenceDelegate=e(this),this.Pi=new LN(this),this.indexManager=new AN,this.remoteDocumentCache=(function(o){return new jN(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new EN(n),this.Ii=new ON(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new MN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new kN(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){de("MemoryPersistence","Starting transaction:",e);const o=new UN(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return J.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class UN extends dI{constructor(e){super(),this.currentSequenceNumber=e}}class vp{constructor(e){this.persistence=e,this.Ri=new _p,this.Vi=null}static mi(e){return new vp(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),J.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),J.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),J.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.fi,(r=>{const o=_e.fromPath(r);return this.gi(e,o).next((u=>{u||n.removeEntry(o,Re.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return J.or([()=>J.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class vh{constructor(e,n){this.persistence=e,this.pi=new ea((r=>pI(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=NN(this,n)}static mi(e,n){return new vh(e,n)}Ei(){}di(e){return J.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((o=>r+o))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return J.forEach(this.pi,((r,o)=>this.br(e,r,o).next((u=>u?J.resolve():n(o)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,n).next((p=>{p||(r++,u.removeEntry(d,Re.min()))})))).next((()=>u.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),J.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),J.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),J.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=eh(e.data.value)),n}br(e,n,r){return J.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return J.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=o}static As(e,n){let r=Pe(),o=Pe();for(const u of n.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Ep(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return pS()?8:fI(nn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,o){const u={result:null};return this.ys(e,n).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ws(e,n,o,r).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new zN;return this.Ss(e,n,d).next((p=>{if(u.result=p,this.Vs)return this.bs(e,n,d,p.size)}))})).next((()=>u.result))}bs(e,n,r,o){return r.documentReadCount<this.fs?($a()<=ke.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",Wa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),J.resolve()):($a()<=ke.DEBUG&&de("QueryEngine","Query:",Wa(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?($a()<=ke.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",Wa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vi(n))):J.resolve())}ys(e,n){if(sE(n))return J.resolve(null);let r=vi(n);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Mm(n,null,"F"),r=vi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((u=>{const d=Pe(...u);return this.ps.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,r).next((y=>{const _=this.Ds(n,p);return this.Cs(n,_,d,y.readTime)?this.ys(e,Mm(n,null,"F")):this.vs(e,_,n,y)}))))})))))}ws(e,n,r,o){return sE(n)||o.isEqual(Re.min())?J.resolve(null):this.ps.getDocuments(e,r).next((u=>{const d=this.Ds(n,u);return this.Cs(n,d,r,o)?J.resolve(null):($a()<=ke.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Wa(n)),this.vs(e,d,n,lI(o,Yl)).next((p=>p)))}))}Ds(e,n){let r=new Ot(l0(e));return n.forEach(((o,u)=>{kh(e,u)&&(r=r.add(u))})),r}Cs(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,r){return $a()<=ke.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",Wa(n)),this.ps.getDocumentsMatchingQuery(e,n,Ks.min(),r)}vs(e,n,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((u=>(n.forEach((d=>{u=u.insert(d.key,d)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp="LocalStore",qN=3e8;class HN{constructor(e,n,r,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new ut(je),this.xs=new ea((u=>hp(u)),dp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function FN(s,e,n,r){return new HN(s,e,n,r)}async function D0(s,e){const n=Ie(s);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((u=>{const d=[],p=[];let y=Pe();for(const _ of o){d.push(_.batchId);for(const T of _.mutations)y=y.add(T.key)}for(const _ of u){p.push(_.batchId);for(const T of _.mutations)y=y.add(T.key)}return n.localDocuments.getDocuments(r,y).next((_=>({Ls:_,removedBatchIds:d,addedBatchIds:p})))}))}))}function GN(s,e){const n=Ie(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,y,_,T){const I=_.batch,N=I.keys();let O=J.resolve();return N.forEach((Q=>{O=O.next((()=>T.getEntry(y,Q))).next((te=>{const K=_.docVersions.get(Q);Ke(K!==null,48541),te.version.compareTo(K)<0&&(I.applyToRemoteDocument(te,_),te.isValidDocument()&&(te.setReadTime(_.commitVersion),T.addEntry(te)))}))})),O.next((()=>p.mutationQueue.removeMutationBatch(y,I)))})(n,r,e,u).next((()=>u.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let y=Pe();for(let _=0;_<p.mutationResults.length;++_)p.mutationResults[_].transformResults.length>0&&(y=y.add(p.batch.mutations[_].key));return y})(e)))).next((()=>n.localDocuments.getDocuments(r,o)))}))}function O0(s){const e=Ie(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function QN(s,e){const n=Ie(s),r=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const p=[];e.targetChanges.forEach(((T,I)=>{const N=o.get(I);if(!N)return;p.push(n.Pi.removeMatchingKeys(u,T.removedDocuments,I).next((()=>n.Pi.addMatchingKeys(u,T.addedDocuments,I))));let O=N.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(I)!==null?O=O.withResumeToken(Kt.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):T.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(T.resumeToken,r)),o=o.insert(I,O),(function(te,K,se){return te.resumeToken.approximateByteSize()===0||K.snapshotVersion.toMicroseconds()-te.snapshotVersion.toMicroseconds()>=qN?!0:se.addedDocuments.size+se.modifiedDocuments.size+se.removedDocuments.size>0})(N,O,T)&&p.push(n.Pi.updateTargetData(u,O))}));let y=os(),_=Pe();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(u,T))})),p.push(KN(u,d,e.documentUpdates).next((T=>{y=T.ks,_=T.qs}))),!r.isEqual(Re.min())){const T=n.Pi.getLastRemoteSnapshotVersion(u).next((I=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));p.push(T)}return J.waitFor(p).next((()=>d.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,y,_))).next((()=>y))})).then((u=>(n.Ms=o,u)))}function KN(s,e,n){let r=Pe(),o=Pe();return n.forEach((u=>r=r.add(u))),e.getEntries(s,r).next((u=>{let d=os();return n.forEach(((p,y)=>{const _=u.get(p);y.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(p)),y.isNoDocument()&&y.version.isEqual(Re.min())?(e.removeEntry(p,y.readTime),d=d.insert(p,y)):!_.isValidDocument()||y.version.compareTo(_.version)>0||y.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(y),d=d.insert(p,y)):de(Tp,"Ignoring outdated watch update for ",p,". Current version:",_.version," Watch version:",y.version)})),{ks:d,qs:o}}))}function YN(s,e){const n=Ie(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=lp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function XN(s,e){const n=Ie(s);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return n.Pi.getTargetData(r,e).next((u=>u?(o=u,J.resolve(o)):n.Pi.allocateTargetId(r).next((d=>(o=new Bs(e,d,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=n.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Lm(s,e,n){const r=Ie(s),o=r.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",u,(d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!_o(d))throw d;de(Tp,`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function yE(s,e,n){const r=Ie(s);let o=Re.min(),u=Pe();return r.persistence.runTransaction("Execute query","readwrite",(d=>(function(y,_,T){const I=Ie(y),N=I.xs.get(T);return N!==void 0?J.resolve(I.Ms.get(N)):I.Pi.getTargetData(_,T)})(r,d,vi(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(d,p.targetId).next((y=>{u=y}))})).next((()=>r.Fs.getDocumentsMatchingQuery(d,e,n?o:Re.min(),n?u:Pe()))).next((p=>($N(r,VI(e),p),{documents:p,Qs:u})))))}function $N(s,e,n){let r=s.Os.get(e)||Re.min();n.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Os.set(e,r)}class _E{constructor(){this.activeTargetIds=zI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class WN{constructor(){this.Mo=new _E,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new _E,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="ConnectivityMonitor";class EE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){de(vE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){de(vE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qc=null;function Um(){return Qc===null?Qc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qc++,"0x"+Qc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm="RestConnection",JN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class eC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===mh?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,n,r,o,u){const d=Um(),p=this.zo(e,n.toUriEncodedString());de(hm,`Sending RPC '${e}' ${d}:`,p,r);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,o,u);const{host:_}=new URL(p),T=Zr(_);return this.Jo(e,p,y,r,T).then((I=>(de(hm,`Received RPC '${e}' ${d}: `,I),I)),(I=>{throw lo(hm,`RPC '${e}' ${d} failed with error: `,I,"url: ",p,"request:",r),I}))}Ho(e,n,r,o,u,d){return this.Go(e,n,r,o,u)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+go})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),r&&r.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const r=JN[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection";class nC extends eC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,o,u){const d=Um();return new Promise(((p,y)=>{const _=new kT;_.setWithCredentials(!0),_.listenOnce(jT.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case Jc.NO_ERROR:const I=_.getResponseJson();de(Wt,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(I)),p(I);break;case Jc.TIMEOUT:de(Wt,`RPC '${e}' ${d} timed out`),y(new le(X.DEADLINE_EXCEEDED,"Request time out"));break;case Jc.HTTP_ERROR:const N=_.getStatus();if(de(Wt,`RPC '${e}' ${d} failed with status:`,N,"response text:",_.getResponseText()),N>0){let O=_.getResponseJson();Array.isArray(O)&&(O=O[0]);const Q=O?.error;if(Q&&Q.status&&Q.message){const te=(function(se){const he=se.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(he)>=0?he:X.UNKNOWN})(Q.status);y(new le(te,Q.message))}else y(new le(X.UNKNOWN,"Server responded with status "+_.getStatus()))}else y(new le(X.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:d,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{de(Wt,`RPC '${e}' ${d} completed.`)}}));const T=JSON.stringify(o);de(Wt,`RPC '${e}' ${d} sending request:`,o),_.send(n,"POST",T,r,15)}))}T_(e,n,r){const o=Um(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=UT(),p=LT(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(y.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,n,r),y.encodeInitMessageHeaders=!0;const T=u.join("");de(Wt,`Creating RPC '${e}' stream ${o}: ${T}`,y);const I=d.createWebChannel(T,y);this.I_(I);let N=!1,O=!1;const Q=new tC({Yo:K=>{O?de(Wt,`Not sending because RPC '${e}' stream ${o} is closed:`,K):(N||(de(Wt,`Opening RPC '${e}' stream ${o} transport.`),I.open(),N=!0),de(Wt,`RPC '${e}' stream ${o} sending:`,K),I.send(K))},Zo:()=>I.close()}),te=(K,se,he)=>{K.listen(se,(ne=>{try{he(ne)}catch(ge){setTimeout((()=>{throw ge}),0)}}))};return te(I,kl.EventType.OPEN,(()=>{O||(de(Wt,`RPC '${e}' stream ${o} transport opened.`),Q.o_())})),te(I,kl.EventType.CLOSE,(()=>{O||(O=!0,de(Wt,`RPC '${e}' stream ${o} transport closed`),Q.a_(),this.E_(I))})),te(I,kl.EventType.ERROR,(K=>{O||(O=!0,lo(Wt,`RPC '${e}' stream ${o} transport errored. Name:`,K.name,"Message:",K.message),Q.a_(new le(X.UNAVAILABLE,"The operation could not be completed")))})),te(I,kl.EventType.MESSAGE,(K=>{if(!O){const se=K.data[0];Ke(!!se,16349);const he=se,ne=he?.error||he[0]?.error;if(ne){de(Wt,`RPC '${e}' stream ${o} received error:`,ne);const ge=ne.status;let ue=(function(S){const R=St[S];if(R!==void 0)return v0(R)})(ge),Z=ne.message;ue===void 0&&(ue=X.INTERNAL,Z="Unknown error status: "+ge+" with message "+ne.message),O=!0,Q.a_(new le(ue,Z)),I.close()}else de(Wt,`RPC '${e}' stream ${o} received:`,se),Q.u_(se)}})),te(p,PT.STAT_EVENT,(K=>{K.stat===Rm.PROXY?de(Wt,`RPC '${e}' stream ${o} detected buffering proxy`):K.stat===Rm.NOPROXY&&de(Wt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{Q.__()}),0),Q}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function dm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zh(s){return new aN(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,n,r=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-r);o>0&&de("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE="PersistentStream";class V0{constructor(e,n,r,o,u,d,p,y){this.Mi=e,this.S_=r,this.b_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new M0(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(as(n.toString()),as("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===n&&this.G_(r,o)}),(r=>{e((()=>{const o=new le(X.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return de(TE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(de(TE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class iC extends V0{constructor(e,n,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,d),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=uN(this.serializer,e),r=(function(u){if(!("targetChange"in u))return Re.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Re.min():d.readTime?Ei(d.readTime):Re.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Pm(this.serializer),n.addTarget=(function(u,d){let p;const y=d.target;if(p=Dm(y)?{documents:dN(u,y)}:{query:fN(u,y).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=A0(u,d.resumeToken);const _=Vm(u,d.expectedCount);_!==null&&(p.expectedCount=_)}else if(d.snapshotVersion.compareTo(Re.min())>0){p.readTime=_h(u,d.snapshotVersion.toTimestamp());const _=Vm(u,d.expectedCount);_!==null&&(p.expectedCount=_)}return p})(this.serializer,e);const r=pN(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Pm(this.serializer),n.removeTarget=e,this.q_(n)}}class sC extends V0{constructor(e,n,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,d),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=hN(e.writeResults,e.commitTime),r=Ei(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Pm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>cN(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{}class aC extends rC{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new le(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Go(e,km(n,r),o,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new le(X.UNKNOWN,u.toString())}))}Ho(e,n,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.Ho(e,km(n,r),o,d,p,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new le(X.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class oC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(as(n),this.aa=!1):de("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr="RemoteStore";class lC{constructor(e,n,r,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((d=>{r.enqueueAndForget((async()=>{ta(this)&&(de(Wr,"Restarting streams for network reachability change."),await(async function(y){const _=Ie(y);_.Ea.add(4),await hu(_),_.Ra.set("Unknown"),_.Ea.delete(4),await Bh(_)})(this))}))})),this.Ra=new oC(r,o)}}async function Bh(s){if(ta(s))for(const e of s.da)await e(!0)}async function hu(s){for(const e of s.da)await e(!1)}function k0(s,e){const n=Ie(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),wp(n)?Sp(n):Eo(n).O_()&&bp(n,e))}function Ap(s,e){const n=Ie(s),r=Eo(n);n.Ia.delete(e),r.O_()&&j0(n,e),n.Ia.size===0&&(r.O_()?r.L_():ta(n)&&n.Ra.set("Unknown"))}function bp(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Eo(s).Y_(e)}function j0(s,e){s.Va.Ue(e),Eo(s).Z_(e)}function Sp(s){s.Va=new nN({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Eo(s).start(),s.Ra.ua()}function wp(s){return ta(s)&&!Eo(s).x_()&&s.Ia.size>0}function ta(s){return Ie(s).Ea.size===0}function P0(s){s.Va=void 0}async function uC(s){s.Ra.set("Online")}async function cC(s){s.Ia.forEach(((e,n)=>{bp(s,e)}))}async function hC(s,e){P0(s),wp(s)?(s.Ra.ha(e),Sp(s)):s.Ra.set("Unknown")}async function dC(s,e,n){if(s.Ra.set("Online"),e instanceof T0&&e.state===2&&e.cause)try{await(async function(o,u){const d=u.cause;for(const p of u.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,d),o.Ia.delete(p),o.Va.removeTarget(p))})(s,e)}catch(r){de(Wr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Eh(s,r)}else if(e instanceof ih?s.Va.Ze(e):e instanceof E0?s.Va.st(e):s.Va.tt(e),!n.isEqual(Re.min()))try{const r=await O0(s.localStore);n.compareTo(r)>=0&&await(function(u,d){const p=u.Va.Tt(d);return p.targetChanges.forEach(((y,_)=>{if(y.resumeToken.approximateByteSize()>0){const T=u.Ia.get(_);T&&u.Ia.set(_,T.withResumeToken(y.resumeToken,d))}})),p.targetMismatches.forEach(((y,_)=>{const T=u.Ia.get(y);if(!T)return;u.Ia.set(y,T.withResumeToken(Kt.EMPTY_BYTE_STRING,T.snapshotVersion)),j0(u,y);const I=new Bs(T.target,y,_,T.sequenceNumber);bp(u,I)})),u.remoteSyncer.applyRemoteEvent(p)})(s,n)}catch(r){de(Wr,"Failed to raise snapshot:",r),await Eh(s,r)}}async function Eh(s,e,n){if(!_o(e))throw e;s.Ea.add(1),await hu(s),s.Ra.set("Offline"),n||(n=()=>O0(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{de(Wr,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await Bh(s)}))}function L0(s,e){return e().catch((n=>Eh(s,n,e)))}async function qh(s){const e=Ie(s),n=Ws(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:lp;for(;fC(e);)try{const o=await YN(e.localStore,r);if(o===null){e.Ta.length===0&&n.L_();break}r=o.batchId,mC(e,o)}catch(o){await Eh(e,o)}U0(e)&&z0(e)}function fC(s){return ta(s)&&s.Ta.length<10}function mC(s,e){s.Ta.push(e);const n=Ws(s);n.O_()&&n.X_&&n.ea(e.mutations)}function U0(s){return ta(s)&&!Ws(s).x_()&&s.Ta.length>0}function z0(s){Ws(s).start()}async function pC(s){Ws(s).ra()}async function gC(s){const e=Ws(s);for(const n of s.Ta)e.ea(n.mutations)}async function yC(s,e,n){const r=s.Ta.shift(),o=pp.from(r,e,n);await L0(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await qh(s)}async function _C(s,e){e&&Ws(s).X_&&await(async function(r,o){if((function(d){return JI(d)&&d!==X.ABORTED})(o.code)){const u=r.Ta.shift();Ws(r).B_(),await L0(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await qh(r)}})(s,e),U0(s)&&z0(s)}async function AE(s,e){const n=Ie(s);n.asyncQueue.verifyOperationInProgress(),de(Wr,"RemoteStore received new credentials");const r=ta(n);n.Ea.add(3),await hu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Bh(n)}async function vC(s,e){const n=Ie(s);e?(n.Ea.delete(2),await Bh(n)):e||(n.Ea.add(2),await hu(n),n.Ra.set("Unknown"))}function Eo(s){return s.ma||(s.ma=(function(n,r,o){const u=Ie(n);return u.sa(),new iC(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:uC.bind(null,s),t_:cC.bind(null,s),r_:hC.bind(null,s),H_:dC.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),wp(s)?Sp(s):s.Ra.set("Unknown")):(await s.ma.stop(),P0(s))}))),s.ma}function Ws(s){return s.fa||(s.fa=(function(n,r,o){const u=Ie(n);return u.sa(),new sC(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:pC.bind(null,s),r_:_C.bind(null,s),ta:gC.bind(null,s),na:yC.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await qh(s)):(await s.fa.stop(),s.Ta.length>0&&(de(Wr,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,n,r,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,u){const d=Date.now()+r,p=new Rp(e,n,d,o,u);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ip(s,e){if(as("AsyncQueue",`${e}: ${s}`),_o(s))return new le(X.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{static emptySet(e){return new ao(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||_e.comparator(n.key,r.key):(n,r)=>_e.comparator(n.key,r.key),this.keyedMap=jl(),this.sortedSet=new ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ao)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ao;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(){this.ga=new ut(_e.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class mo{constructor(e,n,r,o,u,d,p,y,_){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=y,this.hasCachedResults=_}static fromInitialDocuments(e,n,r,o,u){const d=[];return n.forEach((p=>{d.push({type:0,doc:p})})),new mo(e,n,ao.emptySet(n),d,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class TC{constructor(){this.queries=SE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=Ie(n),u=o.queries;o.queries=SE(),u.forEach(((d,p)=>{for(const y of p.Sa)y.onError(r)}))})(this,new le(X.ABORTED,"Firestore shutting down"))}}function SE(){return new ea((s=>o0(s)),Vh)}async function B0(s,e){const n=Ie(s);let r=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(r=2):(u=new EC,r=e.Da()?0:1);try{switch(r){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const p=Ip(d,`Initialization of query '${Wa(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&Np(n)}async function q0(s,e){const n=Ie(s),r=e.query;let o=3;const u=n.queries.get(r);if(u){const d=u.Sa.indexOf(e);d>=0&&(u.Sa.splice(d,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function AC(s,e){const n=Ie(s);let r=!1;for(const o of e){const u=o.query,d=n.queries.get(u);if(d){for(const p of d.Sa)p.Fa(o)&&(r=!0);d.wa=o}}r&&Np(n)}function bC(s,e,n){const r=Ie(s),o=r.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);r.queries.delete(e)}function Np(s){s.Ca.forEach((e=>{e.next()}))}var zm,wE;(wE=zm||(zm={})).Ma="default",wE.Cache="cache";class H0{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new mo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==zm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e){this.key=e}}class G0{constructor(e){this.key=e}}class SC{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pe(),this.mutatedKeys=Pe(),this.eu=l0(e),this.tu=new ao(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new bE,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,p=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,I)=>{const N=o.get(T),O=kh(this.query,I)?I:null,Q=!!N&&this.mutatedKeys.has(N.key),te=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let K=!1;N&&O?N.data.isEqual(O.data)?Q!==te&&(r.track({type:3,doc:O}),K=!0):this.su(N,O)||(r.track({type:2,doc:O}),K=!0,(y&&this.eu(O,y)>0||_&&this.eu(O,_)<0)&&(p=!0)):!N&&O?(r.track({type:0,doc:O}),K=!0):N&&!O&&(r.track({type:1,doc:N}),K=!0,(y||_)&&(p=!0)),K&&(O?(d=d.add(O),u=te?u.add(T):u.delete(T)):(d=d.delete(T),u=u.delete(T)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const T=this.query.limitType==="F"?d.last():d.first();d=d.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{tu:d,iu:r,Cs:p,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((T,I)=>(function(O,Q){const te=K=>{switch(K){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:K})}};return te(O)-te(Q)})(T.type,I.type)||this.eu(T.doc,I.doc))),this.ou(r),o=o??!1;const p=n&&!o?this._u():[],y=this.Xa.size===0&&this.current&&!o?1:0,_=y!==this.Za;return this.Za=y,d.length!==0||_?{snapshot:new mo(this.query,e.tu,u,d,e.mutatedKeys,y===0,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new bE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Pe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new G0(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new F0(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Pe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return mo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Cp="SyncEngine";class wC{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class RC{constructor(e){this.key=e,this.hu=!1}}class IC{constructor(e,n,r,o,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new ea((p=>o0(p)),Vh),this.Iu=new Map,this.Eu=new Set,this.du=new ut(_e.comparator),this.Au=new Map,this.Ru=new _p,this.Vu={},this.mu=new Map,this.fu=fo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function NC(s,e,n=!0){const r=W0(s);let o;const u=r.Tu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await Q0(r,e,n,!0),o}async function CC(s,e){const n=W0(s);await Q0(n,e,!0,!1)}async function Q0(s,e,n,r){const o=await XN(s.localStore,vi(e)),u=o.targetId,d=s.sharedClientState.addLocalQueryTarget(u,n);let p;return r&&(p=await xC(s,e,u,d==="current",o.resumeToken)),s.isPrimaryClient&&n&&k0(s.remoteStore,o),p}async function xC(s,e,n,r,o){s.pu=(I,N,O)=>(async function(te,K,se,he){let ne=K.view.ru(se);ne.Cs&&(ne=await yE(te.localStore,K.query,!1).then((({documents:C})=>K.view.ru(C,ne))));const ge=he&&he.targetChanges.get(K.targetId),ue=he&&he.targetMismatches.get(K.targetId)!=null,Z=K.view.applyChanges(ne,te.isPrimaryClient,ge,ue);return IE(te,K.targetId,Z.au),Z.snapshot})(s,I,N,O);const u=await yE(s.localStore,e,!0),d=new SC(e,u.Qs),p=d.ru(u.documents),y=cu.createSynthesizedTargetChangeForCurrentChange(n,r&&s.onlineState!=="Offline",o),_=d.applyChanges(p,s.isPrimaryClient,y);IE(s,n,_.au);const T=new wC(e,n,d);return s.Tu.set(e,T),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),_.snapshot}async function DC(s,e,n){const r=Ie(s),o=r.Tu.get(e),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((d=>!Vh(d,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Lm(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),n&&Ap(r.remoteStore,o.targetId),Bm(r,o.targetId)})).catch(yo)):(Bm(r,o.targetId),await Lm(r.localStore,o.targetId,!0))}async function OC(s,e){const n=Ie(s),r=n.Tu.get(e),o=n.Iu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ap(n.remoteStore,r.targetId))}async function MC(s,e,n){const r=zC(s);try{const o=await(function(d,p){const y=Ie(d),_=rt.now(),T=p.reduce(((O,Q)=>O.add(Q.key)),Pe());let I,N;return y.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let Q=os(),te=Pe();return y.Ns.getEntries(O,T).next((K=>{Q=K,Q.forEach(((se,he)=>{he.isValidDocument()||(te=te.add(se))}))})).next((()=>y.localDocuments.getOverlayedDocuments(O,Q))).next((K=>{I=K;const se=[];for(const he of p){const ne=YI(he,I.get(he.key).overlayedDocument);ne!=null&&se.push(new ir(he.key,ne,JT(ne.value.mapValue),ln.exists(!0)))}return y.mutationQueue.addMutationBatch(O,_,se,p)})).next((K=>{N=K;const se=K.applyToLocalDocumentSet(I,te);return y.documentOverlayCache.saveOverlays(O,K.batchId,se)}))})).then((()=>({batchId:N.batchId,changes:c0(I)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(d,p,y){let _=d.Vu[d.currentUser.toKey()];_||(_=new ut(je)),_=_.insert(p,y),d.Vu[d.currentUser.toKey()]=_})(r,o.batchId,n),await du(r,o.changes),await qh(r.remoteStore)}catch(o){const u=Ip(o,"Failed to persist write");n.reject(u)}}async function K0(s,e){const n=Ie(s);try{const r=await QN(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const d=n.Au.get(u);d&&(Ke(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Ke(d.hu,14607):o.removedDocuments.size>0&&(Ke(d.hu,42227),d.hu=!1))})),await du(n,r,e)}catch(r){await yo(r)}}function RE(s,e,n){const r=Ie(s);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Tu.forEach(((u,d)=>{const p=d.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(d,p){const y=Ie(d);y.onlineState=p;let _=!1;y.queries.forEach(((T,I)=>{for(const N of I.Sa)N.va(p)&&(_=!0)})),_&&Np(y)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function VC(s,e,n){const r=Ie(s);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Au.get(e),u=o&&o.key;if(u){let d=new ut(_e.comparator);d=d.insert(u,tn.newNoDocument(u,Re.min()));const p=Pe().add(u),y=new Uh(Re.min(),new Map,new ut(je),d,p);await K0(r,y),r.du=r.du.remove(u),r.Au.delete(e),xp(r)}else await Lm(r.localStore,e,!1).then((()=>Bm(r,e,n))).catch(yo)}async function kC(s,e){const n=Ie(s),r=e.batch.batchId;try{const o=await GN(n.localStore,e);X0(n,r,null),Y0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await du(n,o)}catch(o){await yo(o)}}async function jC(s,e,n){const r=Ie(s);try{const o=await(function(d,p){const y=Ie(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let T;return y.mutationQueue.lookupMutationBatch(_,p).next((I=>(Ke(I!==null,37113),T=I.keys(),y.mutationQueue.removeMutationBatch(_,I)))).next((()=>y.mutationQueue.performConsistencyCheck(_))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(_,T,p))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,T))).next((()=>y.localDocuments.getDocuments(_,T)))}))})(r.localStore,e);X0(r,e,n),Y0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await du(r,o)}catch(o){await yo(o)}}function Y0(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function X0(s,e,n){const r=Ie(s);let o=r.Vu[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function Bm(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),n&&s.Pu.yu(r,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((r=>{s.Ru.containsKey(r)||$0(s,r)}))}function $0(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(Ap(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),xp(s))}function IE(s,e,n){for(const r of n)r instanceof F0?(s.Ru.addReference(r.key,e),PC(s,r)):r instanceof G0?(de(Cp,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,e),s.Ru.containsKey(r.key)||$0(s,r.key)):Ae(19791,{wu:r})}function PC(s,e){const n=e.key,r=n.path.canonicalString();s.du.get(n)||s.Eu.has(r)||(de(Cp,"New document in limbo: "+n),s.Eu.add(r),xp(s))}function xp(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new _e(st.fromString(e)),r=s.fu.next();s.Au.set(r,new RC(n)),s.du=s.du.insert(n,r),k0(s.remoteStore,new Bs(vi(fp(n.path)),r,"TargetPurposeLimboResolution",Dh.ce))}}async function du(s,e,n){const r=Ie(s),o=[],u=[],d=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,y)=>{d.push(r.pu(y,e,n).then((_=>{if((_||n)&&r.isPrimaryClient){const T=_?!_.fromCache:n?.targetChanges.get(y.targetId)?.current;r.sharedClientState.updateQueryState(y.targetId,T?"current":"not-current")}if(_){o.push(_);const T=Ep.As(y.targetId,_);u.push(T)}})))})),await Promise.all(d),r.Pu.H_(o),await(async function(y,_){const T=Ie(y);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>J.forEach(_,(N=>J.forEach(N.Es,(O=>T.persistence.referenceDelegate.addReference(I,N.targetId,O))).next((()=>J.forEach(N.ds,(O=>T.persistence.referenceDelegate.removeReference(I,N.targetId,O)))))))))}catch(I){if(!_o(I))throw I;de(Tp,"Failed to update sequence numbers: "+I)}for(const I of _){const N=I.targetId;if(!I.fromCache){const O=T.Ms.get(N),Q=O.snapshotVersion,te=O.withLastLimboFreeSnapshotVersion(Q);T.Ms=T.Ms.insert(N,te)}}})(r.localStore,u))}async function LC(s,e){const n=Ie(s);if(!n.currentUser.isEqual(e)){de(Cp,"User change. New user:",e.toKey());const r=await D0(n.localStore,e);n.currentUser=e,(function(u,d){u.mu.forEach((p=>{p.forEach((y=>{y.reject(new le(X.CANCELLED,d))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await du(n,r.Ls)}}function UC(s,e){const n=Ie(s),r=n.Au.get(e);if(r&&r.hu)return Pe().add(r.key);{let o=Pe();const u=n.Iu.get(e);if(!u)return o;for(const d of u){const p=n.Tu.get(d);o=o.unionWith(p.view.nu)}return o}}function W0(s){const e=Ie(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=K0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VC.bind(null,e),e.Pu.H_=AC.bind(null,e.eventManager),e.Pu.yu=bC.bind(null,e.eventManager),e}function zC(s){const e=Ie(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jC.bind(null,e),e}class Th{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return FN(this.persistence,new BN,e.initialUser,this.serializer)}Cu(e){return new x0(vp.mi,this.serializer)}Du(e){return new WN}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Th.provider={build:()=>new Th};class BC extends Th{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ke(this.persistence.referenceDelegate instanceof vh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new RN(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?dn.withCacheSize(this.cacheSizeBytes):dn.DEFAULT;return new x0((r=>vh.mi(r,n)),this.serializer)}}class qm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>RE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=LC.bind(null,this.syncEngine),await vC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new TC})()}createDatastore(e){const n=zh(e.databaseInfo.databaseId),r=(function(u){return new nC(u)})(e.databaseInfo);return(function(u,d,p,y){return new aC(u,d,p,y)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,o,u,d,p){return new lC(r,o,u,d,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>RE(this.syncEngine,n,0)),(function(){return EE.v()?new EE:new ZN})())}createSyncEngine(e,n){return(function(o,u,d,p,y,_,T){const I=new IC(o,u,d,p,y,_);return T&&(I.gu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Ie(n);de(Wr,"RemoteStore shutting down."),r.Ea.add(5),await hu(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}qm.provider={build:()=>new qm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):as("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs="FirestoreClient";class qC{constructor(e,n,r,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=en.UNAUTHENTICATED,this.clientId=op.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async d=>{de(Zs,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(r,(d=>(de(Zs,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ip(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function fm(s,e){s.asyncQueue.verifyOperationInProgress(),de(Zs,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let r=n.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await D0(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function NE(s,e){s.asyncQueue.verifyOperationInProgress();const n=await HC(s);de(Zs,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((r=>AE(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>AE(e.remoteStore,o))),s._onlineComponents=e}async function HC(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){de(Zs,"Using user provided OfflineComponentProvider");try{await fm(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===X.FAILED_PRECONDITION||o.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;lo("Error using user provided cache. Falling back to memory cache: "+n),await fm(s,new Th)}}else de(Zs,"Using default OfflineComponentProvider"),await fm(s,new BC(void 0));return s._offlineComponents}async function J0(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(de(Zs,"Using user provided OnlineComponentProvider"),await NE(s,s._uninitializedComponentsProvider._online)):(de(Zs,"Using default OnlineComponentProvider"),await NE(s,new qm))),s._onlineComponents}function FC(s){return J0(s).then((e=>e.syncEngine))}async function eA(s){const e=await J0(s),n=e.eventManager;return n.onListen=NC.bind(null,e.syncEngine),n.onUnlisten=DC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=CC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=OC.bind(null,e.syncEngine),n}function GC(s,e,n={}){const r=new is;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,y,_){const T=new Z0({next:N=>{T.Nu(),d.enqueueAndForget((()=>q0(u,I)));const O=N.docs.has(p);!O&&N.fromCache?_.reject(new le(X.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&N.fromCache&&y&&y.source==="server"?_.reject(new le(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(N)},error:N=>_.reject(N)}),I=new H0(fp(p.path),T,{includeMetadataChanges:!0,qa:!0});return B0(u,I)})(await eA(s),s.asyncQueue,e,n,r))),r.promise}function QC(s,e,n={}){const r=new is;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,y,_){const T=new Z0({next:N=>{T.Nu(),d.enqueueAndForget((()=>q0(u,I))),N.fromCache&&y.source==="server"?_.reject(new le(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(N)},error:N=>_.reject(N)}),I=new H0(p,T,{includeMetadataChanges:!0,qa:!0});return B0(u,I)})(await eA(s),s.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA="firestore.googleapis.com",xE=!0;class DE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=nA,this.ssl=xE}else this.host=e.host,this.ssl=e.ssl??xE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=C0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<SN)throw new le(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tA(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new le(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new le(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new le(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hh{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new DE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new DE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new WR;switch(r.type){case"firstParty":return new tI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new le(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=CE.get(n);r&&(de("ComponentProvider","Removing Datastore"),CE.delete(n),r.terminate())})(this),Promise.resolve()}}function KC(s,e,n,r={}){s=Bn(s,Hh);const o=Zr(e),u=s._getSettings(),d={...u,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${n}`;o&&(Gm(`https://${p}`),Qm("Firestore",!0)),u.host!==nA&&u.host!==p&&lo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...u,host:p,ssl:o,emulatorOptions:r};if(!Qr(y,d)&&(s._setSettings(y),r.mockUserToken)){let _,T;if(typeof r.mockUserToken=="string")_=r.mockUserToken,T=en.MOCK_USER;else{_=XE(r.mockUserToken,s._app?.options.projectId);const I=r.mockUserToken.sub||r.mockUserToken.user_id;if(!I)throw new le(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new en(I)}s._authCredentials=new ZR(new BT(_,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new na(this.firestore,e,this._query)}}class _t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _t(this.firestore,e,this._key)}toJSON(){return{type:_t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(lu(n,_t._jsonSchema))return new _t(e,r||null,new _e(st.fromString(n.referencePath)))}}_t._jsonSchemaVersion="firestore/documentReference/1.0",_t._jsonSchema={type:Rt("string",_t._jsonSchemaVersion),referencePath:Rt("string")};class Gs extends na{constructor(e,n,r){super(e,n,fp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new _e(e))}withConverter(e){return new Gs(this.firestore,e,this._path)}}function gt(s,e,...n){if(s=vt(s),qT("collection","path",e),s instanceof Hh){const r=st.fromString(e,...n);return Fv(r),new Gs(s,null,r)}{if(!(s instanceof _t||s instanceof Gs))throw new le(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(st.fromString(e,...n));return Fv(r),new Gs(s.firestore,null,r)}}function Jt(s,e,...n){if(s=vt(s),arguments.length===1&&(e=op.newId()),qT("doc","path",e),s instanceof Hh){const r=st.fromString(e,...n);return Hv(r),new _t(s,null,new _e(r))}{if(!(s instanceof _t||s instanceof Gs))throw new le(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(st.fromString(e,...n));return Hv(r),new _t(s.firestore,s instanceof Gs?s.converter:null,new _e(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE="AsyncQueue";class ME{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new M0(this,"async_queue_retry"),this._c=()=>{const r=dm();r&&de(OE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=dm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=dm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new is;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!_o(e))throw e;de(OE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,as("INTERNAL UNHANDLED ERROR: ",VE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Rp.createAndSchedule(this,e,n,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Ae(47125,{Pc:VE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function VE(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class sr extends Hh{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new ME,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ME(e),this._firestoreClient=void 0,await e}}}function YC(s,e){const n=typeof s=="object"?s:Xm(),r=typeof s=="string"?s:mh,o=Rh(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=QE("firestore");u&&KC(o,...u)}return o}function Fh(s){if(s._terminated)throw new le(X.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||XC(s),s._firestoreClient}function XC(s){const e=s._freezeSettings(),n=(function(o,u,d,p){return new _I(o,u,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,tA(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new qC(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Un(Kt.fromBase64String(e))}catch(n){throw new le(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Un(Kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Un._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(lu(e,Un._jsonSchema))return Un.fromBase64String(e.bytes)}}Un._jsonSchemaVersion="firestore/bytes/1.0",Un._jsonSchema={type:Rt("string",Un._jsonSchemaVersion),bytes:Rt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new le(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new le(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new le(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ti._jsonSchemaVersion}}static fromJSON(e){if(lu(e,Ti._jsonSchema))return new Ti(e.latitude,e.longitude)}}Ti._jsonSchemaVersion="firestore/geoPoint/1.0",Ti._jsonSchema={type:Rt("string",Ti._jsonSchemaVersion),latitude:Rt("number"),longitude:Rt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ai._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(lu(e,Ai._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ai(e.vectorValues);throw new le(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ai._jsonSchemaVersion="firestore/vectorValue/1.0",Ai._jsonSchema={type:Rt("string",Ai._jsonSchemaVersion),vectorValues:Rt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C=/^__.*__$/;class WC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ir(e,this.data,this.fieldMask,n,this.fieldTransforms):new uu(e,this.data,n,this.fieldTransforms)}}class iA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ir(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function sA(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:s})}}class Dp{constructor(e,n,r,o,u,d){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Dp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ah(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(sA(this.Ac)&&$C.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class ZC{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||zh(e)}Cc(e,n,r,o=!1){return new Dp({Ac:e,methodName:n,Dc:r,path:Qt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mu(s){const e=s._freezeSettings(),n=zh(s._databaseId);return new ZC(s._databaseId,!!e.ignoreUndefinedProperties,n)}function Op(s,e,n,r,o,u={}){const d=s.Cc(u.merge||u.mergeFields?2:0,e,n,o);Vp("Data must be an object, but it was:",d,r);const p=oA(r,d);let y,_;if(u.merge)y=new Sn(d.fieldMask),_=d.fieldTransforms;else if(u.mergeFields){const T=[];for(const I of u.mergeFields){const N=Hm(e,I,n);if(!d.contains(N))throw new le(X.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);uA(T,N)||T.push(N)}y=new Sn(T),_=d.fieldTransforms.filter((I=>y.covers(I.field)))}else y=null,_=d.fieldTransforms;return new WC(new mn(p),y,_)}class Qh extends Gh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qh}}class Mp extends Gh{_toFieldTransform(e){return new FI(e.path,new Jl)}isEqual(e){return e instanceof Mp}}function rA(s,e,n,r){const o=s.Cc(1,e,n);Vp("Data must be an object, but it was:",o,r);const u=[],d=mn.empty();nr(r,((y,_)=>{const T=kp(e,y,n);_=vt(_);const I=o.yc(T);if(_ instanceof Qh)u.push(T);else{const N=pu(_,I);N!=null&&(u.push(T),d.set(T,N))}}));const p=new Sn(u);return new iA(d,p,o.fieldTransforms)}function aA(s,e,n,r,o,u){const d=s.Cc(1,e,n),p=[Hm(e,r,n)],y=[o];if(u.length%2!=0)throw new le(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<u.length;N+=2)p.push(Hm(e,u[N])),y.push(u[N+1]);const _=[],T=mn.empty();for(let N=p.length-1;N>=0;--N)if(!uA(_,p[N])){const O=p[N];let Q=y[N];Q=vt(Q);const te=d.yc(O);if(Q instanceof Qh)_.push(O);else{const K=pu(Q,te);K!=null&&(_.push(O),T.set(O,K))}}const I=new Sn(_);return new iA(T,I,d.fieldTransforms)}function JC(s,e,n,r=!1){return pu(n,s.Cc(r?4:3,e))}function pu(s,e){if(lA(s=vt(s)))return Vp("Unsupported field value:",e,s),oA(s,e);if(s instanceof Gh)return(function(r,o){if(!sA(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const u=[];let d=0;for(const p of r){let y=pu(p,o.wc(d));y==null&&(y={nullValue:"NULL_VALUE"}),u.push(y),d++}return{arrayValue:{values:u}}})(s,e)}return(function(r,o){if((r=vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return BI(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=rt.fromDate(r);return{timestampValue:_h(o.serializer,u)}}if(r instanceof rt){const u=new rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_h(o.serializer,u)}}if(r instanceof Ti)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Un)return{bytesValue:A0(o.serializer,r._byteString)};if(r instanceof _t){const u=o.databaseId,d=r.firestore._databaseId;if(!d.isEqual(u))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:yp(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Ai)return(function(d,p){return{mapValue:{fields:{[WT]:{stringValue:ZT},[ph]:{arrayValue:{values:d.toArray().map((_=>{if(typeof _!="number")throw p.Sc("VectorValues must only contain numeric values.");return mp(p.serializer,_)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${xh(r)}`)})(s,e)}function oA(s,e){const n={};return GT(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):nr(s,((r,o)=>{const u=pu(o,e.mc(r));u!=null&&(n[r]=u)})),{mapValue:{fields:n}}}function lA(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof rt||s instanceof Ti||s instanceof Un||s instanceof _t||s instanceof Gh||s instanceof Ai)}function Vp(s,e,n){if(!lA(n)||!HT(n)){const r=xh(n);throw r==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+r)}}function Hm(s,e,n){if((e=vt(e))instanceof fu)return e._internalPath;if(typeof e=="string")return kp(s,e);throw Ah("Field path arguments must be of type string or ",s,!1,void 0,n)}const ex=new RegExp("[~\\*/\\[\\]]");function kp(s,e,n){if(e.search(ex)>=0)throw Ah(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new fu(...e.split("."))._internalPath}catch{throw Ah(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Ah(s,e,n,r,o){const u=r&&!r.isEmpty(),d=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(u||d)&&(y+=" (found",u&&(y+=` in field ${r}`),d&&(y+=` in document ${o}`),y+=")"),new le(X.INVALID_ARGUMENT,p+s+y)}function uA(s,e){return s.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e,n,r,o,u){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Kh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class tx extends cA{data(){return super.data()}}function Kh(s,e){return typeof e=="string"?kp(s,e):e instanceof fu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new le(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jp{}class hA extends jp{}function Ln(s,e,...n){let r=[];e instanceof jp&&r.push(e),r=r.concat(n),(function(u){const d=u.filter((y=>y instanceof Pp)).length,p=u.filter((y=>y instanceof Yh)).length;if(d>1||d>0&&p>0)throw new le(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)s=o._apply(s);return s}class Yh extends hA{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Yh(e,n,r)}_apply(e){const n=this._parse(e);return dA(e._query,n),new na(e.firestore,e.converter,Om(e._query,n))}_parse(e){const n=mu(e.firestore);return(function(u,d,p,y,_,T,I){let N;if(_.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new le(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){jE(I,T);const Q=[];for(const te of I)Q.push(kE(y,u,te));N={arrayValue:{values:Q}}}else N=kE(y,u,I)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||jE(I,T),N=JC(p,d,I,T==="in"||T==="not-in");return wt.create(_,T,N)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Yn(s,e,n){const r=e,o=Kh("where",s);return Yh._create(o,r,n)}class Pp extends jp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Pp(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Zn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let d=o;const p=u.getFlattenedFilters();for(const y of p)dA(d,y),d=Om(d,y)})(e._query,n),new na(e.firestore,e.converter,Om(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Lp extends hA{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Lp(e,n)}_apply(e){const n=(function(o,u,d){if(o.startAt!==null)throw new le(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new le(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zl(u,d)})(e._query,this._field,this._direction);return new na(e.firestore,e.converter,(function(o,u){const d=o.explicitOrderBy.concat([u]);return new vo(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function Xa(s,e="asc"){const n=e,r=Kh("orderBy",s);return Lp._create(r,n)}function kE(s,e,n){if(typeof(n=vt(n))=="string"){if(n==="")throw new le(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!a0(e)&&n.indexOf("/")!==-1)throw new le(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(st.fromString(n));if(!_e.isDocumentKey(r))throw new le(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Zv(s,new _e(r))}if(n instanceof _t)return Zv(s,n._key);throw new le(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xh(n)}.`)}function jE(s,e){if(!Array.isArray(s)||s.length===0)throw new le(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function dA(s,e){const n=(function(o,u){for(const d of o)for(const p of d.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new le(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class ix{convertValue(e,n="none"){switch($s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return nr(e,((o,u)=>{r[o]=this.convertValue(u,n)})),r}convertVectorValue(e){const n=e.fields?.[ph].arrayValue?.values?.map((r=>yt(r.doubleValue)));return new Ai(n)}convertGeoPoint(e){return new Ti(yt(e.latitude),yt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Mh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Xl(e));default:return null}}convertTimestamp(e){const n=Ys(e);return new rt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=st.fromString(e);Ke(N0(r),9688,{name:e});const o=new $l(r.get(1),r.get(3)),u=new _e(r.popFirst(5));return o.isEqual(n)||as(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(s,e,n){let r;return r=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,r}class Ll{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gr extends cA{constructor(e,n,r,o,u,d){super(e,n,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new sh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Kh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Gr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Gr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Gr._jsonSchema={type:Rt("string",Gr._jsonSchemaVersion),bundleSource:Rt("string","DocumentSnapshot"),bundleName:Rt("string"),bundle:Rt("string")};class sh extends Gr{data(e={}){return super.data(e)}}class oo{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Ll(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new sh(this._firestore,this._userDataWriter,r.key,r,new Ll(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new le(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((p=>{const y=new sh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Ll(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const y=new sh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Ll(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,T=-1;return p.type!==0&&(_=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),T=d.indexOf(p.doc.key)),{type:sx(p.type),doc:y,oldIndex:_,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=oo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=op.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function sx(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(s){s=Bn(s,_t);const e=Bn(s.firestore,sr);return GC(Fh(e),s._key).then((n=>ax(e,s,n)))}oo._jsonSchemaVersion="firestore/querySnapshot/1.0",oo._jsonSchema={type:Rt("string",oo._jsonSchemaVersion),bundleSource:Rt("string","QuerySnapshot"),bundleName:Rt("string"),bundle:Rt("string")};class mA extends ix{constructor(e){super(),this.firestore=e}convertBytes(e){return new Un(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,n)}}function Zt(s){s=Bn(s,na);const e=Bn(s.firestore,sr),n=Fh(e),r=new mA(e);return nx(s._query),QC(n,s._query).then((o=>new oo(e,r,s,o)))}function rx(s,e,n){s=Bn(s,_t);const r=Bn(s.firestore,sr),o=Up(s.converter,e,n);return gu(r,[Op(mu(r),"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,ln.none())])}function Kc(s,e,n,...r){s=Bn(s,_t);const o=Bn(s.firestore,sr),u=mu(o);let d;return d=typeof(e=vt(e))=="string"||e instanceof fu?aA(u,"updateDoc",s._key,e,n,r):rA(u,"updateDoc",s._key,e),gu(o,[d.toMutation(s._key,ln.exists(!0))])}function Dl(s){return gu(Bn(s.firestore,sr),[new Lh(s._key,ln.none())])}function Ol(s,e){const n=Bn(s.firestore,sr),r=Jt(s),o=Up(s.converter,e);return gu(n,[Op(mu(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,ln.exists(!1))]).then((()=>r))}function gu(s,e){return(function(r,o){const u=new is;return r.asyncQueue.enqueueAndForget((async()=>MC(await FC(r),o,u))),u.promise})(Fh(s),e)}function ax(s,e,n){const r=n.docs.get(e._key),o=new mA(s);return new Gr(s,o,e._key,r,new Ll(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=mu(e)}set(e,n,r){this._verifyNotCommitted();const o=mm(e,this._firestore),u=Up(o.converter,n,r),d=Op(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,r);return this._mutations.push(d.toMutation(o._key,ln.none())),this}update(e,n,r,...o){this._verifyNotCommitted();const u=mm(e,this._firestore);let d;return d=typeof(n=vt(n))=="string"||n instanceof fu?aA(this._dataReader,"WriteBatch.update",u._key,n,r,o):rA(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(d.toMutation(u._key,ln.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=mm(e,this._firestore);return this._mutations=this._mutations.concat(new Lh(n._key,ln.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new le(X.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function mm(s,e){if((s=vt(s)).firestore!==e)throw new le(X.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}function no(){return new Mp("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(s){return Fh(s=Bn(s,sr)),new ox(s,(e=>gu(s,e)))}(function(e,n=!0){(function(o){go=o})(Jr),Kr(new Qs("firestore",((r,{instanceIdentifier:o,options:u})=>{const d=r.getProvider("app").getImmediate(),p=new sr(new JR(r.getProvider("auth-internal")),new nI(d,r.getProvider("app-check-internal")),(function(_,T){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new le(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $l(_.options.projectId,T)})(d,o),d);return u={useFetchStreams:n,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),yi(Uv,zv,e),yi(Uv,zv,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="firebasestorage.googleapis.com",lx="storageBucket",ux=120*1e3,cx=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends wi{constructor(e,n,r=0){super(gm(e),`Firebase Storage: ${n} (${gm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ri.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return gm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Si;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Si||(Si={}));function gm(s){return"storage/"+s}function hx(){const s="An unknown error occurred, please check the error payload for server response.";return new Ri(Si.UNKNOWN,s)}function dx(){return new Ri(Si.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function fx(){return new Ri(Si.CANCELED,"User canceled the upload/download.")}function mx(s){return new Ri(Si.INVALID_URL,"Invalid URL '"+s+"'.")}function px(s){return new Ri(Si.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function PE(s){return new Ri(Si.INVALID_ARGUMENT,s)}function gA(){return new Ri(Si.APP_DELETED,"The Firebase app was deleted.")}function gx(s){return new Ri(Si.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=$n.makeFromUrl(e,n)}catch{return new $n(e,"")}if(r.path==="")return r;throw px(e)}static makeFromUrl(e,n){let r=null;const o="([A-Za-z0-9.\\-_]+)";function u(ge){ge.path.charAt(ge.path.length-1)==="/"&&(ge.path_=ge.path_.slice(0,-1))}const d="(/(.*))?$",p=new RegExp("^gs://"+o+d,"i"),y={bucket:1,path:3};function _(ge){ge.path_=decodeURIComponent(ge.path)}const T="v[A-Za-z0-9_]+",I=n.replace(/[.]/g,"\\."),N="(/([^?#]*).*)?$",O=new RegExp(`^https?://${I}/${T}/b/${o}/o${N}`,"i"),Q={bucket:1,path:3},te=n===pA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,K="([^?#]*)",se=new RegExp(`^https?://${te}/${o}/${K}`,"i"),ne=[{regex:p,indices:y,postModify:u},{regex:O,indices:Q,postModify:_},{regex:se,indices:{bucket:1,path:2},postModify:_}];for(let ge=0;ge<ne.length;ge++){const ue=ne[ge],Z=ue.regex.exec(e);if(Z){const C=Z[ue.indices.bucket];let S=Z[ue.indices.path];S||(S=""),r=new $n(C,S),ue.postModify(r);break}}if(r==null)throw mx(e);return r}}class yx{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(s,e,n){let r=1,o=null,u=null,d=!1,p=0;function y(){return p===2}let _=!1;function T(...K){_||(_=!0,e.apply(null,K))}function I(K){o=setTimeout(()=>{o=null,s(O,y())},K)}function N(){u&&clearTimeout(u)}function O(K,...se){if(_){N();return}if(K){N(),T.call(null,K,...se);return}if(y()||d){N(),T.call(null,K,...se);return}r<64&&(r*=2);let ne;p===1?(p=2,ne=0):ne=(r+Math.random())*1e3,I(ne)}let Q=!1;function te(K){Q||(Q=!0,N(),!_&&(o!==null?(K||(p=2),clearTimeout(o),I(0)):K||(p=1)))}return I(0),u=setTimeout(()=>{d=!0,te(!0)},n),te}function vx(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(s){return s!==void 0}function LE(s,e,n,r){if(r<e)throw PE(`Invalid value for '${s}'. Expected ${e} or greater.`);if(r>n)throw PE(`Invalid value for '${s}'. Expected ${n} or less.`)}function Tx(s){const e=encodeURIComponent;let n="?";for(const r in s)if(s.hasOwnProperty(r)){const o=e(r)+"="+e(s[r]);n=n+o+"&"}return n=n.slice(0,-1),n}var bh;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(bh||(bh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(s,e){const n=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return n||o||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e,n,r,o,u,d,p,y,_,T,I,N=!0,O=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=d,this.callback_=p,this.errorCallback_=y,this.timeout_=_,this.progressCallback_=T,this.connectionFactory_=I,this.retry=N,this.isUsingEmulator=O,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Q,te)=>{this.resolve_=Q,this.reject_=te,this.start_()})}start_(){const e=(r,o)=>{if(o){r(!1,new Yc(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const d=p=>{const y=p.loaded,_=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(y,_)};this.progressCallback_!==null&&u.addUploadProgressListener(d),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(d),this.pendingConnection_=null;const p=u.getErrorCode()===bh.NO_ERROR,y=u.getStatus();if(!p||Ax(y,this.additionalRetryCodes_)&&this.retry){const T=u.getErrorCode()===bh.ABORT;r(!1,new Yc(!1,null,T));return}const _=this.successCodes_.indexOf(y)!==-1;r(!0,new Yc(_,u))})},n=(r,o)=>{const u=this.resolve_,d=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const y=this.callback_(p,p.getResponse());Ex(y)?u(y):u()}catch(y){d(y)}else if(p!==null){const y=hx();y.serverResponse=p.getErrorText(),this.errorCallback_?d(this.errorCallback_(p,y)):d(y)}else if(o.canceled){const y=this.appDelete_?gA():fx();d(y)}else{const y=dx();d(y)}};this.canceled_?n(!1,new Yc(!1,null,!0)):this.backoffId_=_x(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&vx(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Yc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Sx(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function wx(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Rx(s,e){e&&(s["X-Firebase-GMPID"]=e)}function Ix(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function Nx(s,e,n,r,o,u,d=!0,p=!1){const y=Tx(s.urlParams),_=s.url+y,T=Object.assign({},s.headers);return Rx(T,e),Sx(T,n),wx(T,u),Ix(T,r),new bx(_,s.method,T,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,d,p)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function xx(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,n){this._service=e,n instanceof $n?this._location=n:this._location=$n.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Sh(e,n)}get root(){const e=new $n(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xx(this._location.path)}get storage(){return this._service}get parent(){const e=Cx(this._location.path);if(e===null)return null;const n=new $n(this._location.bucket,e);return new Sh(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw gx(e)}}function UE(s,e){const n=e?.[lx];return n==null?null:$n.makeFromBucketSpec(n,s)}function Dx(s,e,n,r={}){s.host=`${e}:${n}`;const o=Zr(e);o&&(Gm(`https://${s.host}/b`),Qm("Storage",!0)),s._isUsingEmulator=!0,s._protocol=o?"https":"http";const{mockUserToken:u}=r;u&&(s._overrideAuthToken=typeof u=="string"?u:XE(u,s.app.options.projectId))}class Ox{constructor(e,n,r,o,u,d=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=d,this._bucket=null,this._host=pA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ux,this._maxUploadRetryTime=cx,this._requests=new Set,o!=null?this._bucket=$n.makeFromBucketSpec(o,this._host):this._bucket=UE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=$n.makeFromBucketSpec(this._url,e):this._bucket=UE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){LE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){LE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(fn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Sh(this,e)}_makeRequest(e,n,r,o,u=!0){if(this._deleted)return new yx(gA());{const d=Nx(e,this._appId,r,o,n,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,n){const[r,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,o).getPromise()}}const zE="@firebase/storage",BE="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA="storage";function Mx(s=Xm(),e){s=vt(s);const r=Rh(s,yA).getImmediate({identifier:e}),o=QE("storage");return o&&Vx(r,...o),r}function Vx(s,e,n,r={}){Dx(s,e,n,r)}function kx(s,{instanceIdentifier:e}){const n=s.getProvider("app").getImmediate(),r=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new Ox(n,r,o,e,Jr)}function jx(){Kr(new Qs(yA,kx,"PUBLIC").setMultipleInstances(!0)),yi(zE,BE,""),yi(zE,BE,"esm2020")}jx();const Px={apiKey:"AIzaSyBRaHhg2CmvUBtg_UC3OHB6G2Bm4fDUifQ",authDomain:"kelazgraphicdesigner.firebaseapp.com",projectId:"kelazgraphicdesigner",storageBucket:"kelazgraphicdesigner.firebasestorage.app",messagingSenderId:"568241737996",appId:"1:568241737996:web:efa6fef6c268aa29b03929"},zp=ZE(Px),eo=KR(zp),Lx=new Ji,xe=YC(zp);Mx(zp);const to={getUserRole(s){return s==="josefhimanuel123@gmail.com"?"teacher":"student"},async registerWithEmail(s,e,n,r){try{const u=(await D1(eo,s,e)).user,d=r||this.getUserRole(s);return await this.saveUserToFirestore(u.uid,{name:n,email:u.email||s,role:d,createdAt:no()}),u}catch(o){throw console.error("Registration error:",o),o}},async loginWithEmail(s,e){try{const r=(await O1(eo,s,e)).user,o=await this.getUserFromFirestore(r.uid);return o&&s==="josefhimanuel123@gmail.com"&&o.role!=="teacher"&&(console.log("Updating existing user role to teacher"),await this.updateUserRole(r.uid,"teacher")),r}catch(n){throw console.error("Login error:",n),n}},async loginWithGoogle(){try{const e=(await nR(eo,Lx)).user,n=await this.getUserFromFirestore(e.uid);if(n)e.email==="josefhimanuel123@gmail.com"&&n.role!=="teacher"&&(console.log("Updating existing Google user role to teacher"),await this.updateUserRole(e.uid,"teacher"));else{const r=this.getUserRole(e.email||"");await this.saveUserToFirestore(e.uid,{name:e.displayName||"Unknown",email:e.email||"",role:r,createdAt:no()})}return e}catch(s){throw console.error("Google login error:",s),s}},async logout(){try{await j1(eo)}catch(s){throw console.error("Logout error:",s),s}},async saveUserToFirestore(s,e){try{await rx(Jt(xe,"users",s),e)}catch(n){throw console.error("Error saving user to Firestore:",n),n}},async getUserFromFirestore(s){try{const e=await fA(Jt(xe,"users",s));if(e.exists()){const n=e.data();if(n.email==="josefhimanuel123@gmail.com"&&n.role!=="teacher"){console.log("Updating role to teacher for:",n.email);const r={...n,role:"teacher"};return await this.saveUserToFirestore(s,r),r}return n}return null}catch(e){throw console.error("Error getting user from Firestore:",e),e}},async updateUserRole(s,e){try{const n=await this.getUserFromFirestore(s);if(n){const r={...n,role:e};await this.saveUserToFirestore(s,r)}}catch(n){throw console.error("Error updating user role:",n),n}},getCurrentUser(){return eo.currentUser}},Bp=()=>{const[s,e]=fe.useState({user:null,userDoc:null,loading:!0,error:null});return fe.useEffect(()=>{const d=k1(eo,async p=>{e(y=>({...y,loading:!0,error:null}));try{if(p){const y=await to.getUserFromFirestore(p.uid);e({user:p,userDoc:y,loading:!1,error:null})}else e({user:null,userDoc:null,loading:!1,error:null})}catch(y){e(_=>({..._,loading:!1,error:y instanceof Error?y.message:"Unknown error occurred"}))}});return()=>d()},[]),{...s,login:async(d,p)=>{e(y=>({...y,loading:!0,error:null}));try{await to.loginWithEmail(d,p)}catch(y){throw e(_=>({..._,loading:!1,error:y instanceof Error?y.message:"Login failed"})),y}},loginWithGoogle:async()=>{e(d=>({...d,loading:!0,error:null}));try{await to.loginWithGoogle()}catch(d){throw e(p=>({...p,loading:!1,error:d instanceof Error?d.message:"Google login failed"})),d}},register:async(d,p,y)=>{e(_=>({..._,loading:!0,error:null}));try{await to.registerWithEmail(d,p,y)}catch(_){throw e(T=>({...T,loading:!1,error:_ instanceof Error?_.message:"Registration failed"})),_}},logout:async()=>{e(d=>({...d,loading:!0,error:null}));try{await to.logout()}catch(d){throw e(p=>({...p,loading:!1,error:d instanceof Error?d.message:"Logout failed"})),d}},isAuthenticated:!!s.user,isTeacher:s.userDoc?.role==="teacher",isStudent:s.userDoc?.role==="student"}},Ux=({onLoginClick:s})=>{const[e,n]=fe.useState("home");return m.jsxs("div",{className:"home-page",children:[m.jsx("header",{className:"header",children:m.jsxs("div",{className:"container",children:[m.jsxs("div",{className:"logo",children:[m.jsx("h2",{children:"Kelaz"}),m.jsx("span",{children:"Graphic Design Online Class"})]}),m.jsx("nav",{className:"nav",children:m.jsxs("ul",{children:[m.jsx("li",{children:m.jsx("a",{href:"#home",className:e==="home"?"active":"",onClick:()=>n("home"),children:"Home"})}),m.jsx("li",{children:m.jsx("a",{href:"#courses",className:e==="courses"?"active":"",onClick:()=>n("courses"),children:"Courses"})}),m.jsx("li",{children:m.jsx("a",{href:"#about",className:e==="about"?"active":"",onClick:()=>n("about"),children:"About"})}),m.jsx("li",{children:m.jsx("a",{href:"#contact",className:e==="contact"?"active":"",onClick:()=>n("contact"),children:"Contact"})}),m.jsx("li",{children:m.jsx("button",{className:"btn-login",onClick:s,children:"Login"})})]})})]})}),m.jsx("section",{className:"hero",children:m.jsxs("div",{className:"container",children:[m.jsxs("div",{className:"hero-content",children:[m.jsx("h1",{children:"Learn Graphic Design Online"}),m.jsx("p",{children:"Join our free online graphic design class. Master the fundamentals of design with interactive lessons, quizzes, and hands-on projects."}),m.jsxs("div",{className:"hero-stats",children:[m.jsxs("div",{className:"stat",children:[m.jsx("h3",{children:"3"}),m.jsx("p",{children:"Active Students"})]}),m.jsxs("div",{className:"stat",children:[m.jsx("h3",{children:"Free"}),m.jsx("p",{children:"100% Free Course"})]}),m.jsxs("div",{className:"stat",children:[m.jsx("h3",{children:"Online"}),m.jsx("p",{children:"Learn Anywhere"})]})]}),m.jsxs("div",{className:"hero-buttons",children:[m.jsx("button",{className:"btn-primary",onClick:s,children:"Start Learning"}),m.jsx("button",{className:"btn-secondary",children:"View Curriculum"})]})]}),m.jsx("div",{className:"hero-image",children:m.jsxs("div",{className:"design-placeholder",children:[m.jsx("div",{className:"design-element element-1",children:"📐"}),m.jsx("div",{className:"design-element element-2",children:"🎨"}),m.jsx("div",{className:"design-element element-3",children:"✏️"}),m.jsx("div",{className:"design-element element-4",children:"📱"})]})})]})}),m.jsx("section",{className:"features",children:m.jsxs("div",{className:"container",children:[m.jsx("h2",{children:"Why Choose Our Online Class?"}),m.jsxs("div",{className:"features-grid",children:[m.jsxs("div",{className:"feature-card",children:[m.jsx("div",{className:"feature-icon",children:"📚"}),m.jsx("h3",{children:"Interactive Lessons"}),m.jsx("p",{children:"Learn through engaging content with text, images, and video materials."})]}),m.jsxs("div",{className:"feature-card",children:[m.jsx("div",{className:"feature-icon",children:"❓"}),m.jsx("h3",{children:"Quiz & Assessment"}),m.jsx("p",{children:"Test your knowledge with multiple-choice quizzes and track your progress."})]}),m.jsxs("div",{className:"feature-card",children:[m.jsx("div",{className:"feature-icon",children:"👥"}),m.jsx("h3",{children:"Small Group Learning"}),m.jsx("p",{children:"Personal attention with only 3 students per class for better guidance."})]}),m.jsxs("div",{className:"feature-card",children:[m.jsx("div",{className:"feature-icon",children:"💾"}),m.jsx("h3",{children:"Progress Tracking"}),m.jsx("p",{children:"Monitor your learning journey and see your improvement over time."})]})]})]})}),m.jsx("section",{className:"modules",children:m.jsxs("div",{className:"container",children:[m.jsx("h2",{children:"Course Modules"}),m.jsxs("div",{className:"modules-list",children:[m.jsxs("div",{className:"module-card",children:[m.jsx("div",{className:"module-number",children:"01"}),m.jsxs("div",{className:"module-content",children:[m.jsx("h3",{children:"Design Fundamentals"}),m.jsx("p",{children:"Learn the basic principles of design including color theory, typography, and composition."}),m.jsxs("div",{className:"module-meta",children:[m.jsx("span",{children:"5 Lessons"}),m.jsx("span",{children:"2 Quizzes"})]})]})]}),m.jsxs("div",{className:"module-card",children:[m.jsx("div",{className:"module-number",children:"02"}),m.jsxs("div",{className:"module-content",children:[m.jsx("h3",{children:"Logo Design"}),m.jsx("p",{children:"Create memorable logos and understand brand identity development."}),m.jsxs("div",{className:"module-meta",children:[m.jsx("span",{children:"6 Lessons"}),m.jsx("span",{children:"3 Quizzes"})]})]})]}),m.jsxs("div",{className:"module-card",children:[m.jsx("div",{className:"module-number",children:"03"}),m.jsxs("div",{className:"module-content",children:[m.jsx("h3",{children:"Digital Design Tools"}),m.jsx("p",{children:"Master popular design software and digital design techniques."}),m.jsxs("div",{className:"module-meta",children:[m.jsx("span",{children:"8 Lessons"}),m.jsx("span",{children:"4 Quizzes"})]})]})]})]})]})}),m.jsx("section",{className:"cta",children:m.jsxs("div",{className:"container",children:[m.jsx("h2",{children:"Ready to Start Your Design Journey?"}),m.jsx("p",{children:"Join our free online graphic design class today and unlock your creative potential."}),m.jsx("button",{className:"btn-primary btn-large",onClick:s,children:"Get Started Now"})]})}),m.jsx("footer",{className:"footer",children:m.jsxs("div",{className:"container",children:[m.jsxs("div",{className:"footer-content",children:[m.jsxs("div",{className:"footer-section",children:[m.jsx("h3",{children:"Kelaz Graphic Design"}),m.jsx("p",{children:"Free online graphic design education for everyone."})]}),m.jsxs("div",{className:"footer-section",children:[m.jsx("h4",{children:"Quick Links"}),m.jsxs("ul",{children:[m.jsx("li",{children:m.jsx("a",{href:"#courses",children:"Courses"})}),m.jsx("li",{children:m.jsx("a",{href:"#about",children:"About"})}),m.jsx("li",{children:m.jsx("a",{href:"#contact",children:"Contact"})}),m.jsx("li",{children:m.jsx("button",{onClick:s,className:"footer-link",children:"Login"})})]})]}),m.jsxs("div",{className:"footer-section",children:[m.jsx("h4",{children:"Platform Info"}),m.jsx("p",{children:"Built with React + TypeScript"}),m.jsx("p",{children:"Powered by Firebase"}),m.jsx("p",{children:"Hosted on GitHub Pages"})]})]}),m.jsx("div",{className:"footer-bottom",children:m.jsx("p",{children:"© 2025 Kelaz Graphic Design Online Class. Free for everyone."})})]})})]})},zx=()=>{const[s,e]=fe.useState(!0),[n,r]=fe.useState({email:"",password:"",name:"",confirmPassword:""}),[o,u]=fe.useState(""),{login:d,register:p,loginWithGoogle:y,loading:_}=Bp(),T=te=>{const{name:K,value:se}=te.target;r(he=>({...he,[K]:se})),o&&u("")},I=()=>{if(!n.email||!n.password)return u("Email and password are required"),!1;if(!s){if(!n.name)return u("Name is required"),!1;if(n.password.length<6)return u("Password must be at least 6 characters"),!1;if(n.password!==n.confirmPassword)return u("Passwords do not match"),!1}return!0},N=async te=>{if(te.preventDefault(),u(""),!!I())try{s?await d(n.email,n.password):await p(n.email,n.password,n.name)}catch(K){u(K instanceof Error?K.message:"An error occurred")}},O=async()=>{u("");try{await y()}catch(te){u(te instanceof Error?te.message:"Google login failed")}},Q=()=>{e(!s),r({email:"",password:"",name:"",confirmPassword:""}),u("")};return m.jsx("div",{className:"auth-page",children:m.jsxs("div",{className:"auth-container",children:[m.jsxs("div",{className:"auth-header",children:[m.jsx("h1",{children:"Kelaz Graphic Design"}),m.jsx("p",{children:"Online Learning Platform"})]}),m.jsxs("div",{className:"auth-card",children:[m.jsxs("div",{className:"auth-tabs",children:[m.jsx("button",{className:`tab ${s?"active":""}`,onClick:()=>e(!0),type:"button",children:"Login"}),m.jsx("button",{className:`tab ${s?"":"active"}`,onClick:()=>e(!1),type:"button",children:"Register"})]}),m.jsxs("form",{onSubmit:N,className:"auth-form",children:[!s&&m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"name",children:"Full Name"}),m.jsx("input",{type:"text",id:"name",name:"name",value:n.name,onChange:T,placeholder:"Enter your full name",required:!s})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"email",children:"Email Address"}),m.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:T,placeholder:"Enter your email",required:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"password",children:"Password"}),m.jsx("input",{type:"password",id:"password",name:"password",value:n.password,onChange:T,placeholder:"Enter your password",required:!0})]}),!s&&m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),m.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:n.confirmPassword,onChange:T,placeholder:"Confirm your password",required:!s})]}),o&&m.jsx("div",{className:"error-message",children:o}),m.jsx("button",{type:"submit",className:"btn-primary btn-full",disabled:_,children:_?"Please wait...":s?"Login":"Create Account"})]}),m.jsx("div",{className:"auth-divider",children:m.jsx("span",{children:"or"})}),m.jsxs("button",{type:"button",onClick:O,className:"btn-google",disabled:_,children:[m.jsx("span",{className:"google-icon",children:"🔍"}),"Continue with Google"]}),m.jsxs("div",{className:"auth-footer",children:[m.jsxs("p",{children:[s?"Don't have an account? ":"Already have an account? ",m.jsx("button",{type:"button",onClick:Q,className:"link-button",children:s?"Sign up":"Sign in"})]}),m.jsxs("div",{className:"role-info",children:[m.jsx("p",{children:"📚 Join our free graphic design online class"}),m.jsx("p",{children:"� Start learning with interactive lessons and quizzes"})]})]})]})]})})},Ge={async getModules(){try{const s=gt(xe,"modules"),e=Ln(s,Xa("createdAt","desc"));let r=(await Zt(e)).docs.map(o=>({id:o.id,...o.data()}));return r.sort((o,u)=>(o.order||999)-(u.order||999)),r}catch(s){throw console.error("Error getting modules:",s),s}},async createModule(s){try{return(await Ol(gt(xe,"modules"),{...s,createdAt:no()})).id}catch(e){throw console.error("Error creating module:",e),e}},async updateModule(s,e){try{await Kc(Jt(xe,"modules",s),e)}catch(n){throw console.error("Error updating module:",n),n}},async deleteModule(s){try{const e=await Zt(gt(xe,"modules",s,"lessons"));if(!e.empty){const n=pm(xe);e.forEach(r=>{n.delete(Jt(xe,"modules",s,"lessons",r.id))}),await n.commit()}await Dl(Jt(xe,"modules",s))}catch(e){throw console.error("Error deleting module:",e),e}},async getModuleWithLessons(s){try{const e=await fA(Jt(xe,"modules",s));if(!e.exists())return null;const n={id:e.id,...e.data()},r=await this.getLessons(s);return{...n,lessons:r}}catch(e){throw console.error("Error getting module with lessons:",e),e}},async getLessons(s){try{const e=gt(xe,"modules",s,"lessons"),n=Ln(e,Xa("createdAt","desc"));let o=(await Zt(n)).docs.map(u=>({id:u.id,...u.data()}));return o.sort((u,d)=>(u.order||999)-(d.order||999)),o}catch(e){throw console.error("Error getting lessons:",e),e}},async getAllLessons(){try{const s=await this.getModules(),e=[];for(const n of s){const r=await this.getLessons(n.id);e.push(...r)}return e}catch(s){return console.error("Error getting all lessons:",s),[]}},async getAllLessonsCount(){try{const s=await this.getModules();let e=0;for(const n of s){const r=await this.getLessons(n.id);e+=r.length}return e}catch(s){return console.error("Error getting lessons count:",s),0}},async createLesson(s,e){try{const n=gt(xe,"modules",s,"lessons");return(await Ol(n,{...e,createdAt:no()})).id}catch(n){throw console.error("Error creating lesson:",n),n}},async updateLesson(s,e,n){try{await Kc(Jt(xe,"modules",s,"lessons",e),n)}catch(r){throw console.error("Error updating lesson:",r),r}},async deleteLesson(s,e){try{await Dl(Jt(xe,"modules",s,"lessons",e))}catch(n){throw console.error("Error deleting lesson:",n),n}},async getQuizzes(s){try{const e=gt(xe,"quizzes");let n;return s?n=Ln(e,Yn("moduleId","==",s),Xa("createdAt","desc")):n=Ln(e,Xa("createdAt","desc")),(await Zt(n)).docs.map(o=>({id:o.id,...o.data()}))}catch(e){return console.error("Error getting quizzes:",e),[]}},async createQuiz(s){try{return(await Ol(gt(xe,"quizzes"),{...s,createdAt:no()})).id}catch(e){throw console.error("Error creating quiz:",e),e}},async addQuestionToQuiz(s,e){try{const n=gt(xe,"quizzes",s,"questions");return(await Ol(n,{...e,order:1})).id}catch(n){throw console.error("Error adding question to quiz:",n),n}},async updateQuiz(s,e){try{await Kc(Jt(xe,"quizzes",s),e)}catch(n){throw console.error("Error updating quiz:",n),n}},async deleteQuiz(s){try{const e=await Zt(gt(xe,"quizzes",s,"questions"));if(!e.empty){const o=pm(xe);e.forEach(u=>{o.delete(Jt(xe,"quizzes",s,"questions",u.id))}),await o.commit()}const n=gt(xe,"answers"),r=await Zt(Ln(n,Yn("quizId","==",s)));if(!r.empty){const o=pm(xe);r.forEach(u=>o.delete(Jt(xe,"answers",u.id))),await o.commit()}await Dl(Jt(xe,"quizzes",s))}catch(e){throw console.error("Error deleting quiz:",e),e}},async getQuestions(s){try{const e=gt(xe,"quizzes",s,"questions"),r=(await Zt(e)).docs.map(o=>({id:o.id,...o.data()}));return r.sort((o,u)=>(o.order??999)-(u.order??999)),r}catch(e){return console.error("Error getting questions:",e),[]}},async getAnswersByUser(s,e){try{const n=gt(xe,"answers");let r;return e?r=Ln(n,Yn("userId","==",s),Yn("quizId","==",e),Xa("answeredAt","desc")):r=Ln(n,Yn("userId","==",s),Xa("answeredAt","desc")),(await Zt(r)).docs.map(u=>({id:u.id,...u.data()}))}catch(n){return console.error("Error getting answers:",n),[]}},async getUserProgress(s,e){try{const n=gt(xe,"progress");let r;return e?r=Ln(n,Yn("userId","==",s),Yn("moduleId","==",e)):r=Ln(n,Yn("userId","==",s)),(await Zt(r)).docs.map(u=>({id:u.id,...u.data()}))}catch(n){return console.error("Error getting user progress:",n),[]}},async getEnrollmentsByUser(s){try{const e=gt(xe,"enrollments");return(await Zt(Ln(e,Yn("userId","==",s)))).docs.map(r=>({id:r.id,...r.data()}))}catch(e){return console.error("Error getting enrollments:",e),[]}},async enrollUserToModule(s,e){try{return(await Ol(gt(xe,"enrollments"),{userId:s,moduleId:e,enrolledAt:no()})).id}catch(n){throw console.error("Error creating enrollment:",n),n}},async unenrollUser(s){try{await Dl(Jt(xe,"enrollments",s))}catch(e){throw console.error("Error deleting enrollment:",e),e}},async getStudentCount(){try{const s=gt(xe,"users"),e=Ln(s,Yn("role","==","student"));return(await Zt(e)).size}catch(s){return console.error("Error getting student count:",s),0}},async updateUser(s,e){try{await Kc(Jt(xe,"users",s),e)}catch(n){throw console.error("Error updating user:",n),n}},async deleteUser(s){try{await Dl(Jt(xe,"users",s))}catch(e){throw console.error("Error deleting user:",e),e}},async getStudents(){try{const s=gt(xe,"users"),e=Ln(s,Yn("role","==","student"));return(await Zt(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(s){return console.error("Error getting students:",s),[]}},async getAnalytics(){try{const[s,e,n,r]=await Promise.all([this.getStudentCount(),this.getTotalQuizzes(),this.getCompletedQuizzes(),this.getAverageQuizScore()]),o=await this.getTotalSubmissions(),u=s>0?n/s*100:0;return{totalStudents:s,totalQuizzes:e,totalSubmissions:o,completedQuizzes:n,avgScore:r,completionRate:u}}catch(s){return console.error("Error getting analytics:",s),{totalStudents:0,totalQuizzes:0,totalSubmissions:0,completedQuizzes:0,avgScore:0,completionRate:0}}},async getTotalQuizzes(){try{const s=gt(xe,"quizzes");return(await Zt(s)).size}catch(s){return console.error("Error getting total quizzes:",s),0}},async getTotalSubmissions(){try{const s=gt(xe,"answers");return(await Zt(s)).size}catch(s){return console.error("Error getting total submissions:",s),0}},async getCompletedQuizzes(){try{const s=gt(xe,"answers"),e=await Zt(s),n=new Set;return e.forEach(r=>{const o=r.data();n.add(`${o.userId}-${o.quizId}`)}),n.size}catch(s){return console.error("Error getting completed quizzes count:",s),0}},async getAverageQuizScore(){try{const s=gt(xe,"answers"),e=await Zt(s);if(e.empty)return 0;const n={};e.forEach(o=>{const u=o.data(),d=`${u.userId}-${u.quizId}`;n[d]||(n[d]={correct:0,total:0}),n[d].total++,u.isCorrect&&n[d].correct++});const r=Object.values(n).map(o=>o.total>0?o.correct/o.total*100:0);return r.length>0?r.reduce((o,u)=>o+u,0)/r.length:0}catch(s){return console.error("Error getting average quiz score:",s),0}},async createSampleData(s){try{console.log("Creating sample data...");const e=await this.createModule({title:"Dasar-dasar Desain",description:"Pelajari prinsip-prinsip dasar desain grafis termasuk teori warna, tipografi, dan komposisi.",createdBy:s,order:1}),n=await this.createModule({title:"Tipografi & Tata Letak",description:"Kuasai seni tipografi dan buat tata letak menakjub untuk berbagai media.",createdBy:s,order:2}),r=await this.createModule({title:"Tools Desain Digital",description:"Kuasai software desain populer dan teknik desain digital.",createdBy:s,order:3});await this.createLesson(e,{title:"Pengenalan Prinsip Desain",content:"Selamat datang di dunia desain grafis! Dalam materi ini, kita akan menjelajahi prinsip-prinsip dasar yang memandu semua desain yang baik.",order:1}),await this.createLesson(e,{title:"Dasar-dasar Teori Warna",content:"Memahami hubungan warna, roda warna, dan cara membuat palet warna yang efektif untuk desain Anda.",order:2}),await this.createLesson(n,{title:"Dasar Tipografi",content:"Pelajari tentang berbagai jenis font, spasi, hierarki, dan bagaimana tipografi mempengaruhi keterbacaan dan suasana.",order:1}),await this.createLesson(n,{title:"Tata Letak dan Komposisi",content:"Kuasai sistem grid, ruang kosong, dan keseimbangan visual untuk menciptakan tata letak yang menarik.",order:2}),await this.createLesson(r,{title:"Tinjauan Tools Desain Digital",content:"Pelajari tentang software desain paling populer dan cara memilih tools yang tepat untuk proyek Anda.",order:1});const o=await this.createQuiz({moduleId:e,title:"Kuis Prinsip Desain",createdBy:s,timeLimitSec:600}),u=await this.createQuiz({moduleId:e,title:"Kuis Teori Warna",createdBy:s,timeLimitSec:480});console.log("Sample data created successfully!"),console.log("Created modules:",e,n,r),console.log("Created quizzes:",o,u)}catch(e){throw console.error("Error creating sample data:",e),e}}},Bx=()=>{const[s,e]=fe.useState({students:[],modules:[],totalLessons:0,analytics:{totalStudents:0,totalQuizzes:0,totalSubmissions:0,completionRate:0,avgScore:0},loading:!0,error:null}),n=async()=>{e(o=>({...o,loading:!0,error:null}));try{const[o,u,d,p]=await Promise.all([Ge.getStudents(),Ge.getModules(),Ge.getAllLessonsCount(),Ge.getAnalytics()]);e({students:o,modules:u,totalLessons:d,analytics:p,loading:!1,error:null})}catch(o){e(u=>({...u,loading:!1,error:o instanceof Error?o.message:"Failed to load dashboard data"}))}},r=async o=>{try{await Ge.createSampleData(o),await n()}catch(u){throw console.error("Error creating sample data:",u),u}};return fe.useEffect(()=>{n()},[]),{...s,refreshData:n,createSampleData:r}},qx=s=>{const[e,n]=fe.useState(!0),[r,o]=fe.useState(null),[u,d]=fe.useState([]),[p,y]=fe.useState([]),[_,T]=fe.useState([]),[I,N]=fe.useState([]);fe.useEffect(()=>{(async()=>{if(s){n(!0),o(null);try{const[ne,ge,ue,Z]=await Promise.all([Ge.getQuizzes(),Ge.getAnswersByUser(s),Ge.getModules(),Ge.getEnrollmentsByUser(s)]);d(ne),y(ge),T(ue),N(Z)}catch(ne){o(ne?.message||"Gagal memuat data siswa")}finally{n(!1)}}})()},[s]);const{totalQuizzes:O,completedQuizzes:Q,averageScore:te,progressPercent:K,moduleProgress:se}=fe.useMemo(()=>{const he=new Set(I.map(w=>w.moduleId)),ne=u.filter(w=>!w.moduleId||he.has(w.moduleId)),ge=_.filter(w=>he.has(w.id)),ue=ne.length,Z=new Map;p.forEach(w=>{const ie=Z.get(w.quizId)||{correct:0,total:0};ie.total+=1,w.isCorrect&&(ie.correct+=1),Z.set(w.quizId,ie)});const C=Z.size;let S=0;const R=Array.from(Z.values()).map(w=>w.total>0?w.correct/w.total*100:0);R.length>0&&(S=R.reduce((w,ie)=>w+ie,0)/R.length);const M=ue>0?Math.round(C/ue*100):0,V=new Map;ne.forEach(w=>{if(!w.moduleId)return;const ie=V.get(w.moduleId)||{total:0,done:0};ie.total+=1,Z.has(w.id)&&(ie.done+=1),V.set(w.moduleId,ie)});const j=ge.map(w=>{const ie=V.get(w.id)||{total:0,done:0},be=ie.total>0?Math.round(ie.done/ie.total*100):0;return{moduleId:w.id,title:w.title,percent:be}});return{totalQuizzes:ue,completedQuizzes:C,averageScore:Math.round(S),progressPercent:M,moduleProgress:j}},[u,p,_,I]);return{loading:e,error:r,totalQuizzes:O,completedQuizzes:Q,averageScore:te,progressPercent:K,moduleProgress:se}},Hx=({onClose:s})=>{const[e,n]=fe.useState([]),[r,o]=fe.useState([]),[u,d]=fe.useState("modules"),[p,y]=fe.useState(!0),[_,T]=fe.useState(!1),[I,N]=fe.useState(!1),[O,Q]=fe.useState(""),[te,K]=fe.useState(""),[se,he]=fe.useState(""),[ne,ge]=fe.useState(null),[ue,Z]=fe.useState({title:"",description:"",order:1}),[C,S]=fe.useState({title:"",content:"",order:1}),[R,M]=fe.useState({title:"",description:"",order:1}),[V,j]=fe.useState({title:"",content:"",order:1});fe.useEffect(()=>{w()},[]);const w=async()=>{try{y(!0);const z=await Ge.getModules();if(n(z),O){const ce=await Ge.getLessons(O);o(ce)}else o([])}catch(z){console.error("Error loading data:",z)}finally{y(!1)}};fe.useEffect(()=>{p||(async()=>{if(O){const z=await Ge.getLessons(O);o(z)}else o([])})()},[O]);const ie=async z=>{z.preventDefault();try{await Ge.createModule({title:ue.title,description:ue.description,createdBy:"current-user",order:ue.order}),Z({title:"",description:"",order:1}),T(!1),w()}catch(ce){console.error("Error creating module:",ce)}},be=async z=>{if(z.preventDefault(),!O){alert("Pilih bab terlebih dahulu");return}try{await Ge.createLesson(O,{title:C.title,content:C.content,order:C.order}),S({title:"",content:"",order:1}),N(!1),w()}catch(ce){console.error("Error creating lesson:",ce)}},G=z=>{K(z.id),M({title:z.title,description:z.description??"",order:z.order||1})},ae=async()=>{try{await Ge.updateModule(te,{title:R.title,description:R.description,order:R.order}),K(""),await w()}catch(z){console.error("Error updating module:",z)}},pe=z=>ge({type:"module",id:z}),Le=z=>ge({type:"lesson",id:z}),D=async()=>{if(ne)try{ne.type==="module"?(await Ge.deleteModule(ne.id),O===ne.id&&Q("")):ne.type==="lesson"&&O&&await Ge.deleteLesson(O,ne.id),ge(null),await w()}catch(z){console.error("Error deleting:",z)}},ee=z=>{he(z.id),j({title:z.title,content:z.content??"",order:z.order||1})},oe=async()=>{if(O)try{await Ge.updateLesson(O,se,{title:V.title,content:V.content,order:V.order}),he(""),await w()}catch(z){console.error("Error updating lesson:",z)}};return p?m.jsx("div",{className:"modal-overlay",children:m.jsx("div",{className:"modal-container",children:m.jsxs("div",{className:"loading-spinner",children:[m.jsx("div",{className:"spinner"}),m.jsx("p",{children:"Loading content..."})]})})}):m.jsx("div",{className:"modal-overlay",children:m.jsxs("div",{className:"modal-container large",children:[m.jsxs("div",{className:"modal-header",children:[m.jsxs("h2",{children:[m.jsx("i",{className:"fas fa-cogs"}),"Manage Content"]}),m.jsx("button",{className:"close-btn",onClick:s,title:"Tutup","aria-label":"Tutup",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:m.jsx("path",{d:"M6 6l12 12M18 6l-12 12"})})})]}),m.jsx("div",{className:"tabs-container",children:m.jsxs("div",{className:"tabs",children:[m.jsxs("button",{className:`tab ${u==="modules"?"active":""}`,onClick:()=>d("modules"),children:[m.jsx("i",{className:"fas fa-th-large"}),"Bab (",e.length,")"]}),m.jsxs("button",{className:`tab ${u==="lessons"?"active":""}`,onClick:()=>d("lessons"),children:[m.jsx("i",{className:"fas fa-book-open"}),"Materi ",O?"(Bab terpilih)":""]})]})}),m.jsxs("div",{className:"modal-content",children:[u==="modules"&&m.jsxs("div",{className:"tab-content",children:[m.jsxs("div",{className:"content-header",children:[m.jsx("h3",{children:"Bab Pembelajaran"}),m.jsxs("button",{className:"btn-primary",onClick:()=>T(!0),children:[m.jsx("i",{className:"fas fa-plus"}),"Tambah Bab"]})]}),_&&m.jsx("div",{className:"form-card",children:m.jsxs("form",{onSubmit:ie,children:[m.jsxs("h4",{children:[m.jsx("i",{className:"fas fa-plus-circle"}),"Buat Bab Baru"]}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Judul Bab *"}),m.jsx("input",{type:"text",value:ue.title,onChange:z=>Z({...ue,title:z.target.value}),placeholder:"Contoh: Design Fundamental",required:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Urutan"}),m.jsx("input",{type:"number",value:ue.order,onChange:z=>Z({...ue,order:parseInt(z.target.value)}),min:"1",required:!0})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Deskripsi Bab *"}),m.jsx("textarea",{value:ue.description,onChange:z=>Z({...ue,description:z.target.value}),placeholder:"Jelaskan apa yang akan dipelajari siswa dalam bab ini",rows:3,required:!0})]}),m.jsxs("div",{className:"form-actions",children:[m.jsxs("button",{type:"submit",className:"btn-primary",children:[m.jsx("i",{className:"fas fa-save"}),"Buat Bab"]}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>T(!1),children:"Batal"})]})]})}),m.jsx("div",{className:"content-grid",children:e.length===0?m.jsxs("div",{className:"empty-state",children:[m.jsx("i",{className:"fas fa-th-large"}),m.jsx("h4",{children:"Belum ada bab yang dibuat"}),m.jsx("p",{children:"Buat bab pertama untuk mulai mengorganisir konten pembelajaran."})]}):e.map(z=>m.jsxs("div",{className:"content-card",children:[m.jsxs("div",{className:"card-header",children:[m.jsxs("div",{className:"module-order",children:["Bab #",z.order]}),m.jsxs("div",{className:"card-actions",children:[m.jsxs("button",{className:`btn-action ${O===z.id?"secondary":"primary"}`,title:O===z.id?"Bab terpilih":"Pilih bab untuk dikelola",onClick:()=>Q(z.id),children:[m.jsx("i",{className:"fas fa-check"}),m.jsx("span",{children:O===z.id?"Dipilih":"Pilih Bab"})]}),m.jsxs("button",{className:"btn-action edit",onClick:()=>G(z),title:"Edit bab",children:[m.jsx("i",{className:"fas fa-edit"}),m.jsx("span",{children:"Edit"})]}),m.jsxs("button",{className:"btn-action delete",onClick:()=>pe(z.id),title:"Hapus bab",children:[m.jsx("i",{className:"fas fa-trash"}),m.jsx("span",{children:"Hapus"})]})]})]}),m.jsxs("div",{className:"card-content",children:[te===z.id?m.jsxs("div",{className:"form-inline",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Judul"}),m.jsx("input",{value:R.title,onChange:ce=>M({...R,title:ce.target.value})})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Deskripsi"}),m.jsx("textarea",{rows:2,value:R.description,onChange:ce=>M({...R,description:ce.target.value})})]}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Urutan"}),m.jsx("input",{type:"number",min:1,value:R.order,onChange:ce=>M({...R,order:parseInt(ce.target.value)})})]}),m.jsxs("div",{className:"form-actions small",children:[m.jsx("button",{className:"btn-primary",onClick:ae,children:"Simpan"}),m.jsx("button",{className:"btn-secondary",onClick:()=>K(""),children:"Batal"})]})]})]}):m.jsxs(m.Fragment,{children:[m.jsx("h4",{children:z.title}),m.jsx("p",{children:z.description}),O===z.id&&m.jsx("div",{className:"selected-badge",children:"Dipilih untuk dikelola"})]}),m.jsx("div",{className:"card-meta",children:m.jsxs("span",{children:[m.jsx("i",{className:"fas fa-calendar"})," Dibuat: ",new Date().toLocaleDateString("id-ID")]})})]})]},z.id))})]}),u==="lessons"&&m.jsxs("div",{className:"tab-content",children:[m.jsxs("div",{className:"content-header",children:[m.jsx("h3",{children:"Materi Pembelajaran"}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Pilih Bab untuk dikelola"}),m.jsxs("select",{value:O,onChange:z=>Q(z.target.value),children:[m.jsx("option",{value:"",children:"-- Pilih Bab --"}),e.map(z=>m.jsxs("option",{value:z.id,children:["Bab ",z.order,": ",z.title]},z.id))]})]}),m.jsxs("button",{className:"btn-primary",onClick:()=>N(!0),disabled:!O,title:O?"Tambah materi":"Pilih bab dahulu",children:[m.jsx("i",{className:"fas fa-plus"}),"Tambah Materi"]})]})]}),!O&&m.jsxs("div",{className:"empty-state",children:[m.jsx("i",{className:"fas fa-layer-group"}),m.jsx("h4",{children:"Pilih Bab"}),m.jsx("p",{children:"Silakan pilih bab terlebih dahulu untuk melihat dan mengelola materi."})]}),I&&m.jsx("div",{className:"form-card",children:m.jsxs("form",{onSubmit:be,children:[m.jsxs("h4",{children:[m.jsx("i",{className:"fas fa-plus-circle"}),"Buat Materi Baru"]}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Bab *"}),m.jsx("input",{value:e.find(z=>z.id===O)?.title||"",disabled:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Urutan"}),m.jsx("input",{type:"number",value:C.order,onChange:z=>S({...C,order:parseInt(z.target.value)}),min:"1",required:!0})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Judul Materi *"}),m.jsx("input",{type:"text",value:C.title,onChange:z=>S({...C,title:z.target.value}),placeholder:"Contoh: Pengertian Desain Grafis",required:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Konten Materi *"}),m.jsx("textarea",{value:C.content,onChange:z=>S({...C,content:z.target.value}),placeholder:"Tulis konten pembelajaran untuk materi ini",rows:4,required:!0})]}),m.jsxs("div",{className:"form-actions",children:[m.jsxs("button",{type:"submit",className:"btn-primary",children:[m.jsx("i",{className:"fas fa-save"}),"Buat Materi"]}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>N(!1),children:"Batal"})]})]})}),m.jsx("div",{className:"content-grid",children:O&&r.length===0?m.jsxs("div",{className:"empty-state",children:[m.jsx("i",{className:"fas fa-book-open"}),m.jsx("h4",{children:"Belum ada materi yang dibuat"}),m.jsx("p",{children:"Buat materi pertama untuk mulai menambahkan konten pembelajaran."})]}):r.map(z=>m.jsxs("div",{className:"content-card",children:[m.jsxs("div",{className:"card-header",children:[m.jsxs("div",{className:"lesson-order",children:["Materi #",z.order]}),m.jsxs("div",{className:"card-actions",children:[m.jsxs("button",{className:"btn-action edit",onClick:()=>ee(z),title:"Edit materi",children:[m.jsx("i",{className:"fas fa-edit"}),m.jsx("span",{children:"Edit"})]}),m.jsxs("button",{className:"btn-action delete",onClick:()=>Le(z.id),title:"Hapus materi",children:[m.jsx("i",{className:"fas fa-trash"}),m.jsx("span",{children:"Hapus"})]})]})]}),m.jsxs("div",{className:"card-content",children:[se===z.id?m.jsxs("div",{className:"form-inline",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Judul Materi"}),m.jsx("input",{value:V.title,onChange:ce=>j({...V,title:ce.target.value})})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Konten"}),m.jsx("textarea",{rows:3,value:V.content,onChange:ce=>j({...V,content:ce.target.value})})]}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Urutan"}),m.jsx("input",{type:"number",min:1,value:V.order,onChange:ce=>j({...V,order:parseInt(ce.target.value)})})]}),m.jsxs("div",{className:"form-actions small",children:[m.jsx("button",{className:"btn-primary",onClick:oe,children:"Simpan"}),m.jsx("button",{className:"btn-secondary",onClick:()=>he(""),children:"Batal"})]})]})]}):m.jsxs(m.Fragment,{children:[m.jsx("h4",{children:z.title}),m.jsx("p",{children:z.content?z.content.substring(0,100)+"...":"Belum ada konten"})]}),m.jsx("div",{className:"card-meta",children:m.jsxs("span",{children:[m.jsx("i",{className:"fas fa-clock"})," Durasi: 30 menit"]})})]})]},z.id))})]})]}),ne&&m.jsx("div",{className:"modal-overlay confirm",children:m.jsxs("div",{className:"modal-container small",children:[m.jsxs("div",{className:"modal-header",children:[m.jsxs("h2",{children:[m.jsx("i",{className:"fas fa-exclamation-triangle"}),"Konfirmasi Hapus"]}),m.jsx("button",{className:"close-btn",onClick:()=>ge(null),children:m.jsx("i",{className:"fas fa-times"})})]}),m.jsxs("div",{className:"modal-content",children:[m.jsx("p",{children:ne.type==="module"?"Menghapus bab juga akan menghapus semua materi di dalamnya. Lanjutkan?":"Anda yakin ingin menghapus materi ini?"}),m.jsxs("div",{className:"form-actions",children:[m.jsx("button",{className:"btn-secondary",onClick:()=>ge(null),children:"Batal"}),m.jsx("button",{className:"btn-danger",onClick:D,children:"Hapus"})]})]})]})})]})})},Fx=({onClose:s})=>{const[e,n]=fe.useState([]),[r,o]=fe.useState([]),[u,d]=fe.useState(!0),[p,y]=fe.useState("quiz-info"),[_,T]=fe.useState({moduleId:"",lessonId:"",title:"",timeLimitSec:600}),[I,N]=fe.useState([]),[O,Q]=fe.useState({type:"multiple_choice",text:"",options:["","",""],correctIndex:0,correctIndexes:[]});fe.useEffect(()=>{(async()=>{try{d(!0);const C=await Ge.getModules();n(C)}catch(C){console.error("Error loading modules:",C)}finally{d(!1)}})()},[]),fe.useEffect(()=>{(async()=>{if(!_.moduleId){o([]),T(C=>({...C,lessonId:""}));return}try{d(!0);const C=await Ge.getLessons(_.moduleId);o(C),C.find(S=>S.id===_.lessonId)||T(S=>({...S,lessonId:""}))}catch(C){console.error("Error loading lessons:",C)}finally{d(!1)}})()},[_.moduleId]);const te=Z=>{if(Z.preventDefault(),!_.moduleId||!_.lessonId||!_.title){alert("Mohon lengkapi semua kolom yang diperlukan");return}y("questions")},K=(Z,C)=>{const S=O.options?[...O.options]:[];S[Z]=C,Q({...O,options:S})},se=()=>{const Z=O.options?[...O.options]:[];Z.push(""),Q({...O,options:Z})},he=Z=>{const C=(O.options||[]).filter((R,M)=>M!==Z),S={...O,options:C};O.type!=="checkboxes"?(O.correctIndex??0)>=C.length&&(S.correctIndex=0):S.correctIndexes=(O.correctIndexes||[]).filter(R=>R!==Z).map(R=>R>Z?R-1:R),Q(S)},ne=()=>{if(!O.text.trim()){alert("Mohon isi teks pertanyaan");return}if(["multiple_choice","checkboxes","dropdown"].includes(O.type)){const Z=O.options||[];if(Z.length<2||Z.some(C=>!C.trim())){alert("Minimal 2 pilihan dan tidak boleh kosong");return}if(O.type!=="checkboxes"&&(O.correctIndex??-1)<0){alert("Pilih jawaban benar");return}if(O.type==="checkboxes"&&(!O.correctIndexes||O.correctIndexes.length===0)){alert("Pilih minimal satu jawaban benar");return}}N([...I,{...O}]),Q({type:"multiple_choice",text:"",options:["","",""],correctIndex:0,correctIndexes:[]})},ge=Z=>{N(I.filter((C,S)=>S!==Z))},ue=async()=>{if(I.length===0){alert("Mohon tambahkan minimal satu pertanyaan");return}try{d(!0);const Z=await Ge.createQuiz({moduleId:_.moduleId,lessonId:_.lessonId,title:_.title,createdBy:"current-user",timeLimitSec:_.timeLimitSec});for(const C of I)await Ge.addQuestionToQuiz(Z,C);alert("Kuis berhasil dibuat!"),s()}catch(Z){console.error("Error creating quiz:",Z),alert("Gagal membuat kuis. Silakan coba lagi.")}finally{d(!1)}};return u?m.jsx("div",{className:"modal-overlay",children:m.jsx("div",{className:"modal",children:m.jsx("div",{className:"modal-content",children:"Memuat..."})})}):m.jsx("div",{className:"modal-overlay",children:m.jsxs("div",{className:"modal-container large",children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h2",{children:"Buat Kuis"}),m.jsx("button",{className:"close-btn",onClick:s,"aria-label":"Tutup",children:"×"})]}),m.jsxs("div",{className:"modal-content",children:[m.jsxs("div",{className:"tabs",children:[m.jsx("button",{className:`tab ${p==="quiz-info"?"active":""}`,onClick:()=>y("quiz-info"),children:"Info Kuis"}),m.jsx("button",{className:`tab ${p==="questions"?"active":""}`,onClick:()=>y("questions"),disabled:!_.moduleId||!_.lessonId||!_.title,children:"Pertanyaan"})]}),p==="quiz-info"&&m.jsxs("form",{onSubmit:te,children:[m.jsxs("div",{className:"form-card",children:[m.jsx("h4",{children:"Informasi Kuis"}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Pilih Bab *"}),m.jsxs("select",{value:_.moduleId,onChange:Z=>T({..._,moduleId:Z.target.value}),children:[m.jsx("option",{value:"",children:"-- Pilih Bab --"}),e.map(Z=>m.jsx("option",{value:Z.id,children:Z.title},Z.id))]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Pilih Materi *"}),m.jsxs("select",{value:_.lessonId,onChange:Z=>T({..._,lessonId:Z.target.value}),disabled:!_.moduleId,children:[m.jsx("option",{value:"",children:"-- Pilih Materi --"}),r.map(Z=>m.jsx("option",{value:Z.id,children:Z.title},Z.id))]})]})]}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",style:{flex:2},children:[m.jsx("label",{children:"Judul Kuis *"}),m.jsx("input",{type:"text",value:_.title,onChange:Z=>T({..._,title:Z.target.value}),placeholder:"Contoh: Kuis Bab 1 - Desain Dasar"})]}),m.jsxs("div",{className:"form-group",style:{maxWidth:"220px"},children:[m.jsx("label",{children:"Batas Waktu (menit)"}),m.jsx("input",{type:"number",min:1,value:Math.max(1,Math.round(_.timeLimitSec/60)),onChange:Z=>{const C=Math.max(1,parseInt(Z.target.value||"1",10));T({..._,timeLimitSec:C*60})}})]})]})]}),m.jsxs("div",{className:"form-actions",children:[m.jsx("button",{type:"button",className:"btn-secondary",onClick:s,children:"Batal"}),m.jsx("button",{type:"submit",className:"btn-primary",children:"Lanjut ke Pertanyaan"})]})]}),p==="questions"&&m.jsxs("div",{children:[m.jsxs("div",{className:"form-card",children:[m.jsx("h4",{children:"Ringkasan"}),m.jsxs("div",{className:"card-meta",style:{gap:"24px"},children:[m.jsxs("span",{children:["Bab: ",e.find(Z=>Z.id===_.moduleId)?.title]}),m.jsxs("span",{children:["Materi: ",r.find(Z=>Z.id===_.lessonId)?.title||"-"]}),m.jsxs("span",{children:["Batas Waktu: ",Math.floor(_.timeLimitSec/60)," menit"]})]})]}),m.jsxs("div",{className:"form-card",children:[m.jsx("h4",{children:"Tambah Pertanyaan Baru"}),m.jsx("div",{className:"form-row",children:m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Tipe Pertanyaan"}),m.jsxs("select",{value:O.type,onChange:Z=>Q({...O,type:Z.target.value}),children:[m.jsx("option",{value:"multiple_choice",children:"Multiple Choice"}),m.jsx("option",{value:"checkboxes",children:"Checkboxes"}),m.jsx("option",{value:"dropdown",children:"Dropdown"}),m.jsx("option",{value:"short_answer",children:"Short Answer"}),m.jsx("option",{value:"paragraph",children:"Paragraph"})]})]})}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Pertanyaan *"}),m.jsx("textarea",{value:O.text,onChange:Z=>Q({...O,text:Z.target.value}),rows:3,placeholder:"Masukkan pertanyaan Anda"})]}),["multiple_choice","checkboxes","dropdown"].includes(O.type)&&m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Pilihan"}),(O.options||[]).map((Z,C)=>m.jsxs("div",{className:"option-row",children:[O.type==="checkboxes"?m.jsx("input",{type:"checkbox",checked:(O.correctIndexes||[]).includes(C),onChange:S=>{const R=new Set(O.correctIndexes||[]);S.target.checked?R.add(C):R.delete(C),Q({...O,correctIndexes:Array.from(R).sort((M,V)=>M-V)})}}):m.jsx("input",{type:"radio",name:"correct",checked:(O.correctIndex??0)===C,onChange:()=>Q({...O,correctIndex:C})}),m.jsx("input",{type:"text",value:Z,onChange:S=>K(C,S.target.value),placeholder:`Pilihan ${C+1}`,className:"option-input"}),m.jsx("button",{type:"button",className:"btn-delete",onClick:()=>he(C),title:"Hapus pilihan",children:m.jsx("span",{children:"Hapus"})})]},C)),m.jsx("div",{className:"form-actions",style:{marginTop:"8px"},children:m.jsx("button",{type:"button",className:"btn-secondary",onClick:se,children:"+ Tambah Pilihan"})})]}),m.jsxs("div",{className:"form-actions",children:[m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>y("quiz-info"),children:"Kembali"}),m.jsx("button",{type:"button",className:"btn-primary",onClick:ne,children:"Tambahkan ke Daftar"})]})]}),m.jsxs("div",{className:"form-card",children:[m.jsxs("h4",{children:["Pertanyaan (",I.length,")"]}),I.length===0?m.jsx("div",{className:"empty-state",style:{padding:"20px"},children:"Belum ada pertanyaan ditambahkan"}):m.jsx("div",{className:"content-grid",style:{gridTemplateColumns:"1fr"},children:I.map((Z,C)=>m.jsxs("div",{className:"content-card",children:[m.jsxs("div",{className:"card-header",children:[m.jsxs("div",{className:"lesson-order",children:["P",C+1]}),m.jsx("div",{className:"card-actions",children:m.jsx("button",{className:"btn-action delete",onClick:()=>ge(C),children:m.jsx("span",{children:"Hapus"})})})]}),m.jsxs("div",{className:"card-content",children:[m.jsx("h4",{children:Z.type==="multiple_choice"?"Multiple Choice":Z.type==="checkboxes"?"Checkboxes":Z.type==="dropdown"?"Dropdown":Z.type==="short_answer"?"Short Answer":"Paragraph"}),m.jsx("p",{children:Z.text}),["multiple_choice","checkboxes","dropdown"].includes(Z.type)&&m.jsx("div",{className:"card-meta",style:{display:"block",color:"#475569"},children:(Z.options||[]).map((S,R)=>{const M=Z.type==="checkboxes"?(Z.correctIndexes||[]).includes(R):(Z.correctIndex??-1)===R;return m.jsxs("div",{style:{marginBottom:"4px"},children:[M?"✓":"○"," ",S]},R)})})]})]},C))}),m.jsx("div",{className:"form-actions",children:m.jsx("button",{className:"btn-primary",onClick:ue,disabled:I.length===0,children:"Buat Kuis"})})]})]})]})]})})},Gx=({onClose:s})=>{const[e,n]=fe.useState([]),[r,o]=fe.useState(!0),[u,d]=fe.useState(null),[p,y]=fe.useState(null),[_,T]=fe.useState({title:"",timeLimitMin:10}),[I,N]=fe.useState(null),[O,Q]=fe.useState([]),[te,K]=fe.useState([]),[se,he]=fe.useState(null),[ne,ge]=fe.useState({}),[ue,Z]=fe.useState(null),C=async()=>{try{o(!0);const[ie,be,G]=await Promise.all([Ge.getQuizzes(),Ge.getModules(),Ge.getAllLessons()]);n(ie),Q(be),K(G),d(null)}catch{d("Gagal memuat daftar kuis")}finally{o(!1)}};fe.useEffect(()=>{C()},[]);const S=ie=>{y(ie.id),T({title:ie.title,timeLimitMin:Math.max(1,Math.round((ie.timeLimitSec??600)/60))})},R=async()=>{if(p)try{await Ge.updateQuiz(p,{title:_.title.trim(),timeLimitSec:Math.max(60,_.timeLimitMin*60)}),y(null),await C()}catch{alert("Gagal menyimpan perubahan kuis")}},M=async()=>{if(I)try{await Ge.deleteQuiz(I.id),N(null),await C()}catch{alert("Gagal menghapus kuis")}},V=ie=>O.find(be=>be.id===ie)?.title||"-",j=ie=>te.find(be=>be.id===ie)?.title||"-",w=async ie=>{if(he(be=>be===ie?null:ie),!ne[ie])try{Z(ie);const be=await Ge.getQuestions(ie);ge(G=>({...G,[ie]:be}))}finally{Z(null)}};return m.jsxs("div",{className:"modal-overlay",children:[m.jsxs("div",{className:"modal-container large",children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h2",{children:"Kelola Kuis"}),m.jsx("button",{className:"close-btn",onClick:s,"aria-label":"Tutup",children:"×"})]}),m.jsxs("div",{className:"modal-content",children:[u&&m.jsx("div",{className:"error-message",children:u}),r?m.jsxs("div",{className:"loading-state",children:[m.jsx("div",{className:"loading-spinner"}),m.jsx("p",{children:"Memuat kuis..."})]}):m.jsxs("div",{className:"content-grid",style:{gridTemplateColumns:"1fr"},children:[e.length===0&&m.jsx("div",{className:"empty-state",children:"Belum ada kuis dibuat"}),e.map(ie=>m.jsxs("div",{className:"content-card",children:[m.jsxs("div",{className:"card-header",children:[m.jsx("div",{className:"lesson-order",children:"KZ"}),m.jsx("div",{className:"card-actions",children:p===ie.id?m.jsxs(m.Fragment,{children:[m.jsx("button",{className:"btn-action secondary",onClick:()=>y(null),children:"Batal"}),m.jsx("button",{className:"btn-action primary",onClick:R,children:"Simpan"})]}):m.jsxs(m.Fragment,{children:[m.jsx("button",{className:"btn-action",onClick:()=>w(ie.id),children:se===ie.id?"Tutup":"Lihat"}),m.jsx("button",{className:"btn-action edit",onClick:()=>S(ie),children:"Edit"}),m.jsx("button",{className:"btn-action delete",onClick:()=>N({id:ie.id,title:ie.title}),children:"Hapus"})]})})]}),m.jsx("div",{className:"card-content",children:p===ie.id?m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",style:{flex:2},children:[m.jsx("label",{children:"Judul Kuis"}),m.jsx("input",{value:_.title,onChange:be=>T(G=>({...G,title:be.target.value}))})]}),m.jsxs("div",{className:"form-group",style:{maxWidth:220},children:[m.jsx("label",{children:"Batas Waktu (menit)"}),m.jsx("input",{type:"number",min:1,value:_.timeLimitMin,onChange:be=>T(G=>({...G,timeLimitMin:Math.max(1,parseInt(be.target.value||"1",10))}))})]})]}):m.jsxs(m.Fragment,{children:[m.jsx("h4",{children:ie.title}),m.jsxs("p",{children:["Bab: ",V(ie.moduleId)]}),ie.lessonId&&m.jsxs("p",{children:["Materi: ",j(ie.lessonId)]}),m.jsx("div",{className:"card-meta",children:m.jsxs("span",{children:["Waktu: ",Math.floor((ie.timeLimitSec??600)/60)," menit"]})}),se===ie.id&&m.jsxs("div",{style:{marginTop:12},children:[m.jsx("h5",{style:{margin:"8px 0"},children:"Pertanyaan"}),ue===ie.id&&m.jsx("div",{style:{color:"#64748b"},children:"Memuat pertanyaan..."}),ne[ie.id]&&ne[ie.id].length===0&&m.jsx("div",{className:"empty-state",children:"Belum ada pertanyaan"}),ne[ie.id]&&ne[ie.id].length>0&&m.jsx("ul",{style:{paddingLeft:16,margin:0},children:ne[ie.id].map((be,G)=>m.jsxs("li",{style:{marginBottom:8},children:[m.jsxs("div",{style:{fontWeight:600},children:[G+1,". ",be.text]}),["multiple_choice","checkboxes","dropdown"].includes(be.type)&&m.jsx("div",{style:{marginTop:4,color:"#475569"},children:(be.options||[]).map((ae,pe)=>{const Le=be.type==="checkboxes"?(be.correctIndexes||[]).includes(pe):(be.correctIndex??-1)===pe;return m.jsxs("div",{children:[Le?"✓":"○"," ",ae]},pe)})})]},be.id))})]})]})})]},ie.id))]})]})]}),I&&m.jsx("div",{className:"modal-overlay",children:m.jsxs("div",{className:"modal-container",style:{maxWidth:520},children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h2",{children:"Konfirmasi Hapus"}),m.jsx("button",{className:"close-btn",onClick:()=>N(null),"aria-label":"Tutup",children:"×"})]}),m.jsxs("div",{className:"modal-content",children:[m.jsxs("p",{children:['Hapus kuis "',I.title,'"? Tindakan ini juga akan menghapus pertanyaan dan jawaban terkait.']}),m.jsxs("div",{className:"form-actions",children:[m.jsx("button",{className:"btn-secondary",onClick:()=>N(null),children:"Batal"}),m.jsx("button",{className:"btn-primary",onClick:M,children:"Hapus"})]})]})]})})]})},Qx=({onClose:s})=>{const[e,n]=fe.useState([]),[r,o]=fe.useState(!0),[u,d]=fe.useState(null),[p,y]=fe.useState(null),[_,T]=fe.useState({name:"",role:"student"}),[I,N]=fe.useState(null),O=async()=>{try{o(!0);const se=await Ge.getStudents();n(se),d(null)}catch{d("Gagal memuat daftar siswa")}finally{o(!1)}};fe.useEffect(()=>{O()},[]);const Q=se=>{y(se.id),T({name:se.name,role:se.role})},te=async()=>{if(p)try{const se={name:_.name.trim(),role:_.role};await Ge.updateUser(p,se),y(null),await O()}catch{alert("Gagal menyimpan perubahan siswa")}},K=async()=>{if(I)try{await Ge.deleteUser(I.id),N(null),await O()}catch{alert("Gagal menghapus siswa")}};return m.jsxs("div",{className:"modal-overlay",children:[m.jsxs("div",{className:"modal-container large",children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h2",{children:"Kelola Siswa"}),m.jsx("button",{className:"close-btn",onClick:s,"aria-label":"Tutup",children:"×"})]}),m.jsxs("div",{className:"modal-content",children:[u&&m.jsx("div",{className:"error-message",children:u}),r?m.jsxs("div",{className:"loading-state",children:[m.jsx("div",{className:"loading-spinner"}),m.jsx("p",{children:"Memuat siswa..."})]}):m.jsxs("div",{className:"content-grid",style:{gridTemplateColumns:"1fr"},children:[e.length===0&&m.jsx("div",{className:"empty-state",children:"Belum ada siswa terdaftar"}),e.map(se=>m.jsxs("div",{className:"content-card",children:[m.jsxs("div",{className:"card-header",children:[m.jsx("div",{className:"module-order",children:"S"}),m.jsx("div",{className:"card-actions",children:p===se.id?m.jsxs(m.Fragment,{children:[m.jsx("button",{className:"btn-action secondary",onClick:()=>y(null),children:"Batal"}),m.jsx("button",{className:"btn-action primary",onClick:te,children:"Simpan"})]}):m.jsxs(m.Fragment,{children:[m.jsx("button",{className:"btn-action edit",onClick:()=>Q(se),children:"Edit"}),m.jsx("button",{className:"btn-action delete",onClick:()=>N({id:se.id,name:se.name}),children:"Hapus"})]})})]}),m.jsx("div",{className:"card-content",children:p===se.id?m.jsxs("div",{className:"form-row",style:{gridTemplateColumns:"2fr 1fr"},children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Nama"}),m.jsx("input",{value:_.name,onChange:he=>T(ne=>({...ne,name:he.target.value}))})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Role"}),m.jsxs("select",{value:_.role,onChange:he=>T(ne=>({...ne,role:he.target.value})),children:[m.jsx("option",{value:"student",children:"Siswa"}),m.jsx("option",{value:"teacher",children:"Guru"})]})]})]}):m.jsxs(m.Fragment,{children:[m.jsx("h4",{children:se.name}),m.jsxs("p",{children:["Email: ",se.email||"-"]}),m.jsxs("div",{className:"card-meta",children:[m.jsxs("span",{children:["Role: ",se.role==="teacher"?"Guru":"Siswa"]}),m.jsx("span",{children:"Dibuat: "})]})]})})]},se.id))]})]})]}),I&&m.jsx("div",{className:"modal-overlay",children:m.jsxs("div",{className:"modal-container",style:{maxWidth:520},children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h2",{children:"Konfirmasi Hapus"}),m.jsx("button",{className:"close-btn",onClick:()=>N(null),"aria-label":"Tutup",children:"×"})]}),m.jsxs("div",{className:"modal-content",children:[m.jsxs("p",{children:['Hapus siswa "',I.name,'"? Ini hanya menghapus data di aplikasi, bukan akun login.']}),m.jsxs("div",{className:"form-actions",children:[m.jsx("button",{className:"btn-secondary",onClick:()=>N(null),children:"Batal"}),m.jsx("button",{className:"btn-primary",onClick:K,children:"Hapus"})]})]})]})})]})},Kx=()=>{const{userDoc:s,logout:e,isTeacher:n,isStudent:r,user:o}=Bp(),{students:u,modules:d,totalLessons:p,analytics:y,loading:_,error:T,refreshData:I,createSampleData:N}=Bx(),O=qx(o?.uid),[Q,te]=fe.useState(!1),[K,se]=fe.useState(!1),[he,ne]=fe.useState(!1),[ge,ue]=fe.useState(!1),Z=async()=>{try{await e()}catch(ie){console.error("Logout error:",ie)}},C=async()=>{if(o&&s?.email==="josefhimanuel123@gmail.com")try{await to.updateUserRole(o.uid,"teacher"),window.location.reload()}catch(ie){console.error("Error updating role:",ie)}},S=async()=>{if(o&&n)try{await N(o.uid),alert("Data contoh berhasil dibuat!")}catch(ie){console.error("Error creating sample data:",ie),alert("Gagal membuat data contoh. Silakan coba lagi.")}},R=()=>{te(!0)},M=()=>{se(!0)},V=()=>{ne(!0)},j=()=>{alert(`Dashboard Analitik:

📊 Progres Siswa: ${y.completionRate}% rata-rata penyelesaian
🎯 Performa Kuis: ${y.avgScore}% rata-rata nilai
📚 Siswa Aktif: ${u.length}
📖 Total Konten: ${d.length} bab, ${p} materi`)},w=()=>{ue(!0)};return s?m.jsxs("div",{className:"dashboard",children:[m.jsx("header",{className:"dashboard-header",children:m.jsxs("div",{className:"container",children:[m.jsxs("div",{className:"logo",children:[m.jsx("h2",{children:"Kelaz"}),m.jsx("span",{children:"Kelas Online Desain Grafis"})]}),m.jsxs("div",{className:"user-menu",children:[m.jsxs("span",{className:"user-name",children:["Selamat datang, ",s.name]}),m.jsx("span",{className:`user-role ${s.role}`,children:s.role==="teacher"?"👨‍🏫 Guru":"👨‍🎓 Siswa"}),s.email==="josefhimanuel123@gmail.com"&&s.role!=="teacher"&&m.jsx("button",{onClick:C,className:"btn-update-role",children:"🔄 Perbaiki Role Guru"}),m.jsx("button",{onClick:Z,className:"btn-logout",children:"Keluar"})]})]})}),m.jsx("main",{className:"dashboard-main",children:m.jsxs("div",{className:"container",children:[r&&m.jsxs("div",{className:"student-dashboard",children:[m.jsx("h1",{children:"Dashboard Siswa"}),m.jsxs("div",{className:"dashboard-grid",children:[m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"📚 Kelas Saya"}),m.jsx("p",{children:"Akses kelas yang Anda ikuti dan pantau progres pembelajaran"}),m.jsxs("div",{className:"course-progress",children:[m.jsx("div",{className:"progress-bar",children:m.jsx("div",{className:"progress-fill",style:{width:`${O.progressPercent}%`}})}),m.jsxs("span",{children:[O.progressPercent,"% Selesai"]})]}),m.jsx("button",{className:"btn-primary",children:"Lanjutkan Belajar"})]}),m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"❓ Kuis"}),m.jsx("p",{children:"Uji pengetahuan Anda dengan kuis interaktif"}),m.jsxs("div",{className:"quiz-stats",children:[m.jsxs("div",{className:"stat",children:[m.jsx("strong",{children:O.completedQuizzes}),m.jsx("span",{children:"Selesai"})]}),m.jsxs("div",{className:"stat",children:[m.jsxs("strong",{children:[O.averageScore,"%"]}),m.jsx("span",{children:"Rata-rata Nilai"})]})]}),m.jsx("button",{className:"btn-secondary",children:"Ikuti Kuis"})]}),m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"📊 Progres"}),m.jsx("p",{children:"Pantau perjalanan belajar Anda"}),m.jsxs("div",{className:"progress-stats",children:[O.moduleProgress.slice(0,3).map(ie=>m.jsxs("div",{className:"progress-item",children:[m.jsx("span",{children:ie.title}),m.jsx("div",{className:"progress-bar small",children:m.jsx("div",{className:"progress-fill",style:{width:`${ie.percent}%`}})})]},ie.moduleId)),O.moduleProgress.length===0&&m.jsx("div",{className:"empty-state",children:"Belum ada progres untuk ditampilkan"})]})]}),m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"🎯 Pencapaian"}),m.jsx("p",{children:"Milestone pembelajaran Anda"}),m.jsxs("div",{className:"achievements",children:[m.jsx("div",{className:`achievement ${O.completedQuizzes>=1?"earned":""}`,children:"🏆 Kuis Pertama Selesai"}),m.jsx("div",{className:`achievement ${O.averageScore>=90?"earned":""}`,children:"💯 Rata-rata Nilai ≥ 90%"})]})]})]})]}),n&&m.jsxs("div",{className:"teacher-dashboard",children:[m.jsxs("div",{className:"dashboard-header-controls",children:[m.jsx("h1",{children:"Dashboard Guru"}),m.jsx("button",{onClick:I,className:"btn-refresh",disabled:_,children:"🔄 Refresh Data"}),d.length===0&&m.jsx("button",{onClick:S,className:"btn-sample-data",children:"📝 Buat Data Contoh"})]}),T&&m.jsxs("div",{className:"error-message",children:["Error memuat dashboard: ",T]}),_?m.jsxs("div",{className:"loading-state",children:[m.jsx("div",{className:"loading-spinner"}),m.jsx("p",{children:"Memuat data dashboard..."})]}):m.jsxs("div",{className:"dashboard-grid",children:[m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"👥 Siswa"}),m.jsx("p",{children:"Kelola dan pantau progres siswa"}),m.jsxs("div",{className:"student-count",children:[m.jsx("strong",{children:y.totalStudents})," Siswa Aktif"]}),m.jsxs("div",{className:"student-list",children:[u.slice(0,3).map(ie=>m.jsxs("div",{className:"student-item",children:["👨‍🎓 ",ie.name]},ie.id)),u.length>3&&m.jsxs("div",{className:"student-more",children:["+",u.length-3," siswa lainnya"]})]}),m.jsx("button",{className:"btn-primary",onClick:w,children:"Lihat Semua Siswa"})]}),m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"📚 Konten Kelas"}),m.jsx("p",{children:"Buat dan kelola materi, bab, dan konten pembelajaran"}),m.jsxs("div",{className:"content-stats",children:[m.jsxs("div",{className:"stat",children:[m.jsx("strong",{children:d.length}),m.jsx("span",{children:"Bab"})]}),m.jsxs("div",{className:"stat",children:[m.jsx("strong",{children:p}),m.jsx("span",{children:"Materi"})]})]}),m.jsxs("div",{className:"module-list",children:[d.slice(0,2).map(ie=>m.jsxs("div",{className:"module-item",children:["📖 ",ie.title]},ie.id)),d.length>2&&m.jsxs("div",{className:"module-more",children:["+",d.length-2," bab lainnya"]})]}),m.jsx("button",{className:"btn-primary",onClick:R,children:"Kelola Konten"})]}),m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"❓ Kuis"}),m.jsx("p",{children:"Buat dan kelola kuis serta penilaian"}),m.jsxs("div",{className:"quiz-stats",children:[m.jsxs("div",{className:"stat",children:[m.jsx("strong",{children:y.totalQuizzes}),m.jsx("span",{children:"Total Kuis"})]}),m.jsxs("div",{className:"stat",children:[m.jsx("strong",{children:y.totalSubmissions}),m.jsx("span",{children:"Pengumpulan"})]})]}),m.jsxs("div",{className:"form-actions",style:{justifyContent:"flex-start",gap:"8px"},children:[m.jsx("button",{className:"btn-secondary",onClick:M,children:"Buat Kuis"}),m.jsx("button",{className:"btn-primary",onClick:V,children:"Kelola Kuis"})]})]}),m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"📊 Analitik"}),m.jsx("p",{children:"Lihat analitik dan wawasan detail"}),m.jsxs("div",{className:"analytics-preview",children:[m.jsxs("div",{className:"metric",children:[m.jsx("span",{children:"Tingkat Penyelesaian"}),m.jsxs("strong",{children:[y.completionRate,"%"]})]}),m.jsxs("div",{className:"metric",children:[m.jsx("span",{children:"Rata-rata Nilai Kuis"}),m.jsxs("strong",{children:[y.avgScore,"%"]})]})]}),m.jsx("button",{className:"btn-secondary",onClick:j,children:"Lihat Analitik"})]})]})]})]})}),Q&&m.jsx(Hx,{onClose:()=>te(!1)}),K&&m.jsx(Fx,{onClose:()=>se(!1)}),he&&m.jsx(Gx,{onClose:()=>ne(!1)}),ge&&m.jsx(Qx,{onClose:()=>ue(!1)})]}):m.jsx("div",{className:"dashboard-loading",children:m.jsx("p",{children:"Memuat data pengguna..."})})};function Yx(){const[s,e]=fe.useState(!1),{isAuthenticated:n,loading:r}=Bp();return r?m.jsxs("div",{className:"app-loading",children:[m.jsx("div",{className:"loading-spinner"}),m.jsx("p",{children:"Loading..."})]}):n?m.jsx(Kx,{}):s?m.jsx(zx,{}):m.jsx(Ux,{onLoginClick:()=>e(!0)})}Wb.createRoot(document.getElementById("root")).render(m.jsx(fe.StrictMode,{children:m.jsx(Yx,{})}));
